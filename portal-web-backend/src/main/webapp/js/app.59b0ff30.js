(function(){"use strict";var e={574:function(e,t,s){var a=s(61),n=s(252);const r={class:"container"},i=(0,n._)("header",null,[(0,n._)("h2",null,"Welcome!")],-1),o=(0,n._)("footer",null,null,-1);function l(e,t,s,a,l,c){const h=(0,n.up)("NavbarTop"),d=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",r,[i,(0,n.Wm)(h),(0,n.Wm)(d),o])}const c={class:"navbar navbar-expand-lg navbar-light rounded",style:{"background-color":"#BC8F8F"}},h={key:0,class:"container-fluid"},d=(0,n._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,n._)("span",{class:"navbar-toggler-icon"})],-1),u={id:"navbarSupportedContent",class:"collapse navbar-collapse"},m={class:"navbar-nav me-auto mb-2 mb-lg-0"},g={class:"nav-item"},p=(0,n.Uk)("Home"),b={class:"nav-item"},w=(0,n.Uk)("Games"),T={key:0,class:"nav-item"},f=(0,n.Uk)("Registration"),y={class:"nav-item"},v=(0,n.Uk)(" Terms and conditions "),k={class:"nav-item"},_=(0,n._)("i",{class:"bi bi-megaphone"},null,-1),x=(0,n.Uk)(" Top lists "),C={class:"nav-item"},S=(0,n.Uk)(" Feedback "),D={class:"navbar-nav ms-auto"},N={class:"nav-item dropdown"},L=(0,n._)("a",{class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,n._)("i",{class:"bi bi-person-fill"}),(0,n.Uk)(" User ")],-1),I={class:"dropdown-menu ms-auto","aria-labelledby":"navbarDropdown"},B={key:0},A=(0,n.Uk)("Show profile"),E={key:1},O=(0,n.Uk)("Logout"),M={key:2},G=(0,n.Uk)(" Login "),z={key:1,class:"container-fluid"},P=(0,n._)("div",{class:"spinner-border",role:"status"},[(0,n._)("span",{class:"sr-only"})],-1),R=[P];function $(e,t,s,a,r,i){const o=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("nav",c,[e.loading?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",h,[d,(0,n._)("div",u,[(0,n._)("ul",m,[(0,n._)("li",g,[(0,n.Wm)(o,{class:"nav-link",to:{name:"Home"}},{default:(0,n.w5)((()=>[p])),_:1})]),(0,n._)("li",b,[(0,n.Wm)(o,{class:"nav-link",to:{name:"Lobby"}},{default:(0,n.w5)((()=>[w])),_:1})]),e.authenticated?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("li",T,[(0,n.Wm)(o,{class:"nav-link",to:{name:"Registration"}},{default:(0,n.w5)((()=>[f])),_:1})])),(0,n._)("li",y,[(0,n.Wm)(o,{class:"nav-link",to:{name:"Info"}},{default:(0,n.w5)((()=>[v])),_:1})]),(0,n._)("li",k,[(0,n.Wm)(o,{class:"nav-link",to:{name:"TopLists"}},{default:(0,n.w5)((()=>[_,x])),_:1})]),(0,n._)("li",C,[(0,n.Wm)(o,{class:"nav-link",to:{name:"Feedback"}},{default:(0,n.w5)((()=>[S])),_:1})])]),(0,n._)("ul",D,[(0,n._)("li",N,[L,(0,n._)("ul",I,[e.authenticated?((0,n.wg)(),(0,n.iD)("li",B,[(0,n.Wm)(o,{class:"dropdown-item",to:{name:"Profile",params:{selectedName:e.userName}}},{default:(0,n.w5)((()=>[A])),_:1},8,["to"])])):(0,n.kq)("",!0),e.authenticated?((0,n.wg)(),(0,n.iD)("li",E,[(0,n.Wm)(o,{onClick:e.logout,class:"dropdown-item",to:{name:"Login"}},{default:(0,n.w5)((()=>[O])),_:1},8,["onClick"])])):(0,n.kq)("",!0),e.authenticated?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("li",M,[(0,n.Wm)(o,{class:"dropdown-item",to:{name:"Login"}},{default:(0,n.w5)((()=>[G])),_:1})]))])])])])])),e.loading?((0,n.wg)(),(0,n.iD)("div",z,R)):(0,n.kq)("",!0)])}const U={data(){return{token:null}},computed:{authenticated(){let e=this.$store.getters.user;return!(!e||!e.token||e.token.startsWith("null")||e.token.startsWith("Anom:"))},userName(){return this.$store.getters.user?.name},user(){return this.$store.getters.user}},created(){},methods:{getToken(){const e=this.$store.getters.user;return e?e.token:null},logout(){return this.$store.dispatch("logout",this.$store.getters.user)}}};var W=(0,n.aZ)({name:"NavbarTop",mixins:[U],props:{msg:String},data(){return{}},created(){},computed:{loading(){return this.$store.getters.loadingStatus}},methods:{}}),q=s(744);const F=(0,q.Z)(W,[["render",$]]);var V=F,H=(0,n.aZ)({name:"TicTacToe",components:{NavbarTop:V},mixins:[U],data(){return{title:""}},async created(){if(!this.user){const e=sessionStorage.getItem("userName"),t=sessionStorage.getItem("token");let s={name:e,token:t,webSocket:null};if(e&&!e.startsWith("Anon")){}await this.$store.dispatch("setUser",s)}},methods:{}});const Y=(0,q.Z)(H,[["render",l]]);var Z=Y,J=s(612);const j={key:0,class:"row"},X={class:"row"},K={class:"col-md-6 offset-md-3 alert alert-info"},Q=(0,n._)("br",null,null,-1),ee={key:1,class:"row"},te={class:"col m-2"},se=(0,n._)("h3",null,"Login ",-1),ae=(0,n.Uk)(" UserName: "),ne=(0,n._)("br",null,null,-1),re={key:2,class:"row"},ie={class:"col m-2"},oe=(0,n.Uk)(" Password: "),le=["disabled"],ce={key:3,class:"row d-inline-flex p-2 alert-danger",role:"alert"};function he(e,t,s,r,i,o){return(0,n.wg)(),(0,n.iD)(n.HY,null,[e.authenticated?((0,n.wg)(),(0,n.iD)("div",j,[(0,n._)("div",X,[(0,n._)("div",K,[(0,n.Uk)(" Welcome "+(0,J.zw)(e.userName)+" ",1),Q])])])):(0,n.kq)("",!0),e.authenticated?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",ee,[(0,n._)("div",te,[se,(0,n._)("div",null,[ae,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.usrNameTemp=t),class:"p-3",type:"text"},null,512),[[a.nr,e.usrNameTemp]]),ne])])])),e.authenticated?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",re,[(0,n._)("div",ie,[oe,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.usrPwTemp=t),class:"p-3",type:"password"},null,512),[[a.nr,e.usrPwTemp]]),(0,n._)("div",null,[(0,n._)("button",{onClick:t[2]||(t[2]=(...t)=>e.login&&e.login(...t)),disabled:e.isLoginButtonDisabled},"Login",8,le)])])])),e.errorFromLogin?((0,n.wg)(),(0,n.iD)("div",ce," Login error occured! ")):(0,n.kq)("",!0)],64)}var de=(0,n.aZ)({name:"Login",mixins:[U],props:{token:String},data(){return{loginToken:null,usrNameTemp:null,usrPwTemp:null,loginError:null,loginRequestOnTheFly:!1}},computed:{isLoginButtonDisabled(){return!!this.loginRequestOnTheFly||(!this.usrNameTemp||!this.usrPwTemp||(this.usrNameTemp.length<1||this.usrPwTemp.length<1))},errorFromLogin(){return null!=this.loginError}},created(){},methods:{login(){this.logout().then((()=>{this.loginError=null,this.loginRequestOnTheFly=!0;const e={method:"POST",headers:{"Content-Type":"application/json",Authorization:null},body:JSON.stringify({userName:this.usrNameTemp,password:this.usrPwTemp})},t="http://35.217.7.146/portal/api/user/login";this.$store.dispatch("setLoadingStatus",!0),fetch(t,e).then((e=>(this.resetLoginData(),200!==e.status?Promise.reject("error in login"):e.json()))).then((e=>{let t={name:e.name,token:e.activeLoginId};this.$store.dispatch("setUser",t)}),(()=>{this.loginError=!0})).finally((()=>{this.loginRequestOnTheFly=!1,this.$store.dispatch("setLoadingStatus",!1)}))}))},resetLoginData(){this.usrName=null,this.pw=null}}});const ue=(0,q.Z)(de,[["render",he]]);var me=ue;const ge={class:"row mt-3"},pe={class:"col-xs-12 col-sm-4 mt-3 mt-md-0 pt-3"},be=(0,n._)("span",{class:"fw-bold"}," Players ",-1),we={class:"list-group"},Te=["onClick"],fe={class:"float-start"},ye={key:0,xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",fill:"currentColor",class:"bi bi-arrow-left",viewBox:"0 0 16 16"},ve=(0,n._)("path",{"fill-rule":"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"},null,-1),ke=[ve],_e={key:0,class:"bi bi-star float-end tooltipselector",title:"ConnectFour ranking"},xe={key:1,class:"bi bi-suit-diamond float-end tooltipselector",title:"TicTacToe ranking"},Ce={class:"col-xs-12 col-sm-4 mt-3 mt-md-0"},Se={class:"row"},De={class:"col-xs-6"},Ne=(0,n._)("span",{class:"fw-bold"}," Tables ",-1),Le={class:"float-end"},Ie={key:0,type:"button",class:"btn btn-primary w-30 float-start","data-bs-toggle":"modal","data-bs-target":"#createTableModal"},Be={class:"row"},Ae={key:0,class:"table"},Ee=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",{scope:"col"},"Type"),(0,n._)("th",{scope:"col"},"Playing"),(0,n._)("th",{scope:"col"},"Size"),(0,n._)("th",{scope:"col"},"Action")])],-1),Oe={key:0,scope:"row"},Me={key:1,scope:"row"},Ge={key:0},ze=["disabled","onClick"],Pe=["onClick"],Re={key:1,class:"col fw-bold"},$e=(0,n._)("span",{class:"float-start"}," No tables at the moment. ",-1),Ue=[$e],We={class:"modal fade",id:"createTableModal",tabindex:"-1","aria-labelledby":"createTableModalLabel","aria-hidden":"true"},qe={class:"modal-dialog"},Fe={class:"modal-content"},Ve=(0,n._)("div",{class:"modal-header"},[(0,n._)("h5",{class:"modal-title",id:"createTableModalLabel"},"Create table"),(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),He={class:"modal-body"},Ye={class:"btn-group",role:"group","aria-label":"Select game",id:"select-game"},Ze=(0,n._)("label",{class:"form-label ms-1",for:"tictactoe"},"TicTacToe",-1),Je=(0,n._)("label",{class:"form-label ms-1",for:"connect4"},"Connect 4",-1),je={class:"mb-3",id:"v-model-select-dynamic"},Xe={value:0,key:0},Ke=["value"],Qe={class:"mb-3",id:"computer_selection"},et=(0,n._)("label",{class:"form-check-label",for:"computerSelection"},"Play against computer",-1),tt={class:"modal-footer"},st=(0,n._)("button",{type:"button",class:"btn btn-secondary float-start","data-bs-dismiss":"modal"},"Close",-1),at=["disabled"];function nt(e,t,s,r,i,o){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",ge,[(0,n._)("div",pe,[be,(0,n._)("ul",we,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.users,((t,s)=>((0,n.wg)(),(0,n.iD)("li",{key:t.name,onClick:s=>e.openProfile(t.name),class:(0,J.C_)(["list-group-item bg-success p-2 text-dark",[s%2==0?"bg-opacity-25":" bg-opacity-10",t.name.startsWith("Anonym")?"":"games-profile-link"]])},[(0,n._)("div",fe,[(0,n.Uk)((0,J.zw)(t.name)+" ",1),t.name===e.userName?((0,n.wg)(),(0,n.iD)("svg",ye,ke)):(0,n.kq)("",!0)]),t.rankingConnectFour>0?((0,n.wg)(),(0,n.iD)("i",_e,"  "+(0,J.zw)(e.fixVal(t.rankingConnectFour))+"  ",1)):(0,n.kq)("",!0),t.rankingTictactoe>0?((0,n.wg)(),(0,n.iD)("i",xe,"  "+(0,J.zw)(e.fixVal(t.rankingTictactoe))+"  ",1)):(0,n.kq)("",!0)],10,Te)))),128))])]),(0,n._)("div",Ce,[(0,n._)("div",Se,[(0,n._)("div",De,[Ne,(0,n._)("span",Le,[e.hasCreatedTable?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("button",Ie," Create table ")),e.isRemoveTableButtonVisible?((0,n.wg)(),(0,n.iD)("button",{key:1,onClick:t[0]||(t[0]=t=>e.removeTable()),type:"button",class:"btn btn-primary bg-danger w-30 float-start"}," Remove table ")):(0,n.kq)("",!0)])])]),(0,n._)("div",Be,[e.tablesExist?((0,n.wg)(),(0,n.iD)("table",Ae,[Ee,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.tables,(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t.id},[t.gameMode.id<20?((0,n.wg)(),(0,n.iD)("td",Oe," X.O ")):t.gameMode.id>=20?((0,n.wg)(),(0,n.iD)("td",Me," 4x ")):(0,n.kq)("",!0),(0,n._)("td",null,(0,J.zw)(t.playerA.name)+" - "+(0,J.zw)(t.playerB?.name),1),(0,n._)("td",null,(0,J.zw)(t.gameMode.x)+" x "+(0,J.zw)(t.gameMode.y),1),(0,n._)("td",null,[e.hasCreatedTable?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("section",Ge,[e.playButtonVisible(t)?((0,n.wg)(),(0,n.iD)("button",{key:0,disabled:!e.createTableButtonVisible,onClick:s=>e.play(t),type:"button",class:"btn btn-primary w-30 float-start"}," Play ",8,ze)):(0,n.kq)("",!0),t.playerA&&t.playerB?((0,n.wg)(),(0,n.iD)("button",{key:1,onClick:s=>e.watchTable(t),type:"button",class:"btn btn-primary w-30 float-end"}," Watch ",8,Pe)):(0,n.kq)("",!0)]))])])))),128))])])):((0,n.wg)(),(0,n.iD)("div",Re,Ue))])])]),(0,n._)("div",We,[(0,n._)("div",qe,[(0,n._)("div",Fe,[Ve,(0,n._)("div",He,[(0,n._)("form",null,[(0,n._)("div",Ye,[(0,n.wy)((0,n._)("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=t=>e.selectedGame=t),value:"1",onChange:t[2]||(t[2]=(...t)=>e.changeSelectedGame&&e.changeSelectedGame(...t)),id:"tictactoe",name:"tictactoe",class:"btn"},null,544),[[a.G2,e.selectedGame]]),Ze,(0,n.wy)((0,n._)("input",{type:"radio","onUpdate:modelValue":t[3]||(t[3]=t=>e.selectedGame=t),value:"2",onChange:t[4]||(t[4]=(...t)=>e.changeSelectedGame&&e.changeSelectedGame(...t)),id:"connect4",name:"connect4",class:"btn ms-2 pt-1"},null,544),[[a.G2,e.selectedGame]]),Je]),(0,n._)("div",je,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":t[5]||(t[5]=t=>e.selectedGameMode=t)},[((0,n.wg)(),(0,n.iD)("option",Xe," Select board size ")),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.gameModes,(e=>((0,n.wg)(),(0,n.iD)("option",{value:e.id,key:e.id},(0,J.zw)(e.name)+" connect "+(0,J.zw)(e.requiredConnections),9,Ke)))),128))],512),[[a.bM,e.selectedGameMode]])]),(0,n._)("div",Qe,[(0,n.wy)((0,n._)("input",{class:"form-check-input mr-2",type:"checkbox",id:"computerSelection",onChange:t[6]||(t[6]=(...t)=>e.computerSelectionOnChanged&&e.computerSelectionOnChanged(...t)),"onUpdate:modelValue":t[7]||(t[7]=t=>e.playAgainstComputerChecked=t)},null,544),[[a.e8,e.playAgainstComputerChecked]]),et])])]),(0,n._)("div",tt,[st,(0,n._)("button",{disabled:e.modalCreateTableDisabled,onClick:t[8]||(t[8]=(...t)=>e.createTable&&e.createTable(...t)),type:"button","data-bs-dismiss":"modal",class:"btn btn-primary"}," Create table ",8,at)])])])])],64)}var rt,it,ot;(function(e){e["O"]="O",e["X"]="X"})(rt||(rt={})),function(e){e["GAME"]="G",e["RESIGNITION"]="R"}(it||(it={})),function(e){e[e["WIN_BY_PLAY"]=1]="WIN_BY_PLAY",e[e["WIN_BY_TIME"]=2]="WIN_BY_TIME",e[e["WIN_BY_RESIGNATION"]=3]="WIN_BY_RESIGNATION",e[e["WIN_BY_DISCONNECT"]=4]="WIN_BY_DISCONNECT",e[e["DRAW"]=5]="DRAW"}(ot||(ot={}));const lt={data(){return{token:null}},computed:{},created(){},methods:{convertInstantToDate(e){return new Date(e).toLocaleDateString()},convertInstantToTime(e){return new Date(e).toLocaleTimeString()},convertResultToText(e){const t=ot[e];return t.toLowerCase()},getRankingChange(e,t){if(e&&t){const s=t>=e?"-":"+",a=Math.abs(e-t),n=s.concat(a.toFixed());return n}},fixVal(e){return e.toFixed()}}};var ct=(0,n.aZ)({name:"Lobby",mixins:[U,lt],data(){return{createTableButtonVisible:!0,watchTableButtonDisabled:!1,removeTableButtonVisible:!1,selectedGame:"1",selectedGameMode:"0",playAgainstComputerChecked:!1,computerLevel:"0"}},computed:{users(){return this.$store.getters.users},tables(){return this.$store.getters.tables},gameModes(){return"1"===this.selectedGame?this.$store.getters.gameModes.filter((e=>1===e.gameNumber)):this.$store.getters.gameModes.filter((e=>2===e.gameNumber))},modalCreateTableDisabled(){return"0"===this.selectedGameMode},tablesExist(){return this.$store.getters.tables.length>0},hasCreatedTable(){const e=this.$store.getters.tables[0];return!(!e||!e.playerA)&&e.playerA.name===this.userName},isRemoveTableButtonVisible(){const e=this.$store.getters.tables[0];return!(!e||!e.playerA)&&e.playerA.name===this.userName}},created(){this.user&&!this.user.webSocket&&this.connect(this.user.token)},methods:{connect(e){let t=new WebSocket("ws://35.217.7.146:80/games/ws");t.onopen=e=>{const s="LOGIN",a={title:s,message:this.user.token},n=(JSON.stringify(a),JSON.stringify(a));t.send(n)},t.onmessage=e=>{let s=JSON.parse(e.data);switch(s.title){case"LOGIN":let e={name:s.to,token:s.token,webSocket:t};this.$store.dispatch("setUser",e).then((()=>{this.$store.dispatch("setUsers",s.players),this.$store.dispatch("setGameModes",s.gameModes),this.$store.dispatch("setTables",s.tables)}));break;case"CREATE_TABLE":this.$store.dispatch("addTable",s.table),s.table.playerA.name===this.userName&&(this.createTableButtonVisible=!1,this.removeTableButtonVisible=!0);break;case"REMOVE_PLAYER":this.$store.dispatch("leaveTable",s.who.name).then((()=>{this.$store.dispatch("removePlayer",s.who),s.table&&this.$store.dispatch("removeTable",s.table)}));break;case"REMOVE_TABLE":this.$store.dispatch("removeTable",s.table);const a=s.table;a.playerA&&a.playerA.name===this.userName&&(this.createTableButtonVisible=!0,this.removeTableButtonVisible=!1);break;case"NEW_PLAYER":this.$store.dispatch("addPlayer",s.who);break;case"START_GAME":this.$store.dispatch("startGame",s.table);const n=s.table;n.playerA.name!==this.userName&&n.playerB.name!==this.userName||(n.playerA.wins=0,n.playerB.wins=0,this.createTableButtonVisible=!1,this.removeTableButtonVisible=!1,this.watchTableButtonVisible=!1,this.$store.dispatch("selectTable",s.table).then((()=>{2!==n.gameMode.gameNumber?this.$router.push({name:"TableTicTacToe",id:s.table.id}):this.$router.push({name:"TableConnectFour",id:s.table.id})})));break;case"MOVE":const r={x:s.x,y:s.y,coordinates:s.x.toString().concat(s.y.toString()),token:s.token};this.$store.dispatch("move",r),this.$store.dispatch("changeTurn",s.table.playerInTurn);break;case"WATCH":this.$router.push({name:"Table",params:{watch:"1"}}),this.$store.dispatch("selectTable",s.table).then((()=>{2!==s.table.gameMode.gameNumber?this.$router.push({name:"TableTicTacToe",id:s.table.id,params:{watch:"1"}}):this.$router.push({name:"TableConnectFour",id:s.table.id,params:{watch:"1"}})}));break;case"ADD_WATCHER":this.$store.dispatch("addWatcher",s.who).then((()=>{}));break;case"CHAT":const i={text:s.message,from:s.from};if("COMMON"===s.to)return void this.$store.dispatch("updateCommonChat",i);this.$store.dispatch("chat",i);break;case"REMATCH":this.$store.dispatch("rematch",s.table).then((()=>{}));break;case"LEAVE_TABLE":this.$store.dispatch("leaveTable",s.who.name);break;case"GAME_END":const o={x:s.x,y:s.y,coordinates:s.x.toString().concat(s.y.toString()),token:s.token};if(this.$store.dispatch("move",o),console.log("RES:"+JSON.stringify(s.win)),"DRAW"===s.win.resultType){const e={table:s.table,win:s.win};this.$store.dispatch("setDraw",e)}else{const e={winner:s.win.winner.name,reason:it.GAME,winsA:s.table.playerA.wins,winsB:s.table.playerB.wins,from:"System"};this.$store.dispatch("updateScore",e);const t={fromX:s.win.fromX,fromY:s.win.fromY,toX:s.win.toX,toY:s.win.toY,resultType:s.win.resultType,winner:{name:s.win.winner.name}};this.$store.dispatch("updateWinner",t)}break;case"WINNER":const l={winner:s.who.name,reason:s.reason,winsA:s.table.playerA.wins,winsB:s.table.playerB.wins,from:s.from};this.$store.dispatch("updateScore",l);const c="R"===s.message?it.RESIGNITION:it.GAME;let h=s.who.name.concat(c===it.RESIGNITION?" won by resignation":" won");const d={from:s.from,text:h};this.$store.dispatch("chat",d);break}},t.onerror=e=>{},t.onclose=e=>{this.user&&(this.user.webSocket=null)}},createTable(){const e={title:"CREATE_TABLE",message:this.selectedGameMode,computer:this.playAgainstComputerChecked};this.user.webSocket.send(JSON.stringify(e)),this.computerLevel=null,this.playAgainstComputerChecked=!1},computerSelectionOnChanged(){this.playAgainstComputerChecked||(this.computerLevel="0")},changeSelectedGame(e){this.selectedGameMode="0"},removeTable(){const e={title:"REMOVE_TABLE",message:""};this.user.webSocket.send(JSON.stringify(e))},play(e){const t={title:"JOIN_TABLE",message:e.tableId};this.user.webSocket.send(JSON.stringify(t))},playButtonVisible(e){return!e.playerA||!e.playerB},isOwnTable(e){return e?.playerA?.name===this.userName},watchTable(e){const t={title:"WATCH",message:e.tableId};this.user.webSocket.send(JSON.stringify(t))},openProfile(e){e.startsWith("Anonym")||this.$router.push({name:"Profile",params:{selectedName:e}})}}});const ht=(0,q.Z)(ct,[["render",nt]]);var dt=ht;const ut=(0,n.uE)('<div class="row" data-v-0d82d5fb><div class="col fw-bold" data-v-0d82d5fb> Hi! </div></div><div class="row mt-4" data-v-0d82d5fb><div class="col question" data-v-0d82d5fb> Play anonymous <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 25 25" data-v-0d82d5fb><path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z" data-v-0d82d5fb></path></svg></div><div class="col" data-v-0d82d5fb><p class="text-start" data-v-0d82d5fb> 1. Click play on the top navigation bar <br data-v-0d82d5fb> 2. Join table <br data-v-0d82d5fb> 3. Or create your own table with selected options <br data-v-0d82d5fb> 4. Invite your friend to play or wait for random player </p></div></div><div class="row" data-v-0d82d5fb><div class="col question" data-v-0d82d5fb> Play with nickname <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 25 25" data-v-0d82d5fb><path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z" data-v-0d82d5fb></path></svg></div><div class="col" data-v-0d82d5fb><p class="text-start" data-v-0d82d5fb> 1. Navigate to nickname registration page <br data-v-0d82d5fb> 2. Type nickname and password <br data-v-0d82d5fb> 3. After registration, login and click play <br data-v-0d82d5fb></p></div></div>',3);function mt(e,t,s,a,n,r){return ut}var gt=(0,n.aZ)({name:"Home",methods:{toMainPage(){this.$router.push("/")}},created(){}});const pt=(0,q.Z)(gt,[["render",mt],["__scopeId","data-v-0d82d5fb"]]);var bt=pt;const wt=e=>((0,n.dD)("data-v-5588a37c"),e=e(),(0,n.Cn)(),e),Tt={class:"row"},ft={class:"col"},yt=["disabled"],vt={class:"row"},kt={class:"col-xs-12 col-sm-4"},_t=wt((()=>(0,n._)("br",null,null,-1))),xt=wt((()=>(0,n._)("label",{class:"form-check-label ms-1",for:"highlight"},"Highlight last",-1))),Ct=wt((()=>(0,n._)("br",null,null,-1))),St=wt((()=>(0,n._)("label",{class:"form-check-label ms-1",for:"soundOn"},"Notification sound",-1))),Dt=wt((()=>(0,n._)("br",null,null,-1))),Nt={class:"text-primary"},Lt=wt((()=>(0,n._)("br",null,null,-1))),It=(0,n.Uk)(" vs. "),Bt=wt((()=>(0,n._)("br",null,null,-1))),At={class:"text-primary"},Et={key:2,class:"text-success"},Ot={key:3,class:"text-success"},Mt={key:4,class:"text-danger"},Gt={class:"text-danger"},zt={class:"col-xs-12 col-sm-8"};function Pt(e,t,s,r,i,o){const l=(0,n.up)("chat");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",Tt,[(0,n._)("div",ft,[e.resignButtonVisible?((0,n.wg)(),(0,n.iD)("button",{key:0,disabled:e.resignButtonDisabled,onClick:t[0]||(t[0]=(...t)=>e.resign&&e.resign(...t)),type:"button",class:"btn btn-primary w-30 float-xs-start float-sm-end"}," Resign ",8,yt)):(0,n.kq)("",!0),e.rematchButtonEnabled?((0,n.wg)(),(0,n.iD)("button",{key:1,onClick:t[1]||(t[1]=(...t)=>e.rematch&&e.rematch(...t)),type:"button",class:"btn btn-primary w-30 float-xs-start float-sm-end"}," Rematch ")):(0,n.kq)("",!0)])]),(0,n._)("div",vt,[(0,n._)("div",kt,[(0,n.Uk)(" Connect "+(0,J.zw)(e.theTable.gameMode.requiredConnections)+" to win ",1),_t,(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"checkbox",id:"highlight",onChange:t[2]||(t[2]=(...t)=>e.highlightLastSquareIfSelected&&e.highlightLastSquareIfSelected(...t)),"onUpdate:modelValue":t[3]||(t[3]=t=>e.showLastVal=t)},null,544),[[a.e8,e.showLastVal]]),xt,Ct,(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"checkbox",id:"soundOn","onUpdate:modelValue":t[4]||(t[4]=t=>e.soundOn=t)},null,512),[[a.e8,e.soundOn]]),St,Dt,e.theTable.playerA?((0,n.wg)(),(0,n.iD)("span",{key:0,class:(0,J.C_)(["fw-bold",{"text-success":e.theTable.playerInTurn?.name===e.theTable?.playerA?.name}])},(0,J.zw)(e.theTable?.playerA?.gameToken)+" = "+(0,J.zw)(e.theTable?.playerA?.name),3)):(0,n.kq)("",!0),(0,n._)("span",Nt," [ w:"+(0,J.zw)(e.theTable?.playerA?.wins)+" , d:"+(0,J.zw)(e.theTable?.playerA?.draws)+" ] ",1),Lt,It,Bt,e.theTable.playerB?((0,n.wg)(),(0,n.iD)("span",{key:1,class:(0,J.C_)(["fw-bold",{"text-success":e.theTable.playerInTurn?.name===e.theTable?.playerB?.name}])},(0,J.zw)(e.theTable?.playerB?.gameToken)+" = "+(0,J.zw)(e.theTable?.playerB?.name),3)):(0,n.kq)("",!0),(0,n._)("span",At," [ w:"+(0,J.zw)(e.theTable?.playerB?.wins)+" , d:"+(0,J.zw)(e.theTable?.playerB?.draws)+" ] ",1),e.theTable.playerInTurn?.name===e.userName?((0,n.wg)(),(0,n.iD)("span",Et," It's your turn. ")):null===e.theTable?.playerInTurn?((0,n.wg)(),(0,n.iD)("span",Ot," Game ended ")):((0,n.wg)(),(0,n.iD)("div",Mt," In turn: "+(0,J.zw)(e.theTable.playerInTurn?.name),1)),(0,n._)("div",{class:(0,J.C_)({hidden:e.theTable.playerInTurn?.name!==e.userName})},[(0,n._)("span",Gt," Time left "+(0,J.zw)(e.timeLeft),1)],2)]),(0,n._)("div",zt,[(0,n._)("canvas",{class:(0,J.C_)({"bg-secondary":null==e.theTable.playerInTurn}),id:"canvas"},null,2)])]),(0,n.Wm)(l,{id:e.theTable.id},null,8,["id"])],64)}const Rt={class:"row"},$t={class:"col overflow-auto",style:{"max-height":"500px !important"}};function Ut(e,t,s,a,r,i){return(0,n.wg)(),(0,n.iD)("div",Rt,[(0,n._)("div",$t,[(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.messagesd,((e,t)=>((0,n.wg)(),(0,n.iD)("li",{key:t,class:(0,J.C_)(["list-group-item rounded-pill text-start w-75 text-break mb-1",[t%2==0?"bg-success p-2 text-dark bg-opacity-25":"bg-success p-2 text-dark bg-opacity-10"]])},"  "+(0,J.zw)(e.from)+":  "+(0,J.zw)(e.text),3)))),128))])])])}var Wt=(0,n.aZ)({name:"Chat",mixins:[U],props:["id","common"],data(){return{messages:null,users:null,message:{text:""}}},computed:{messageExist(){return this.message.text.length>0},messagesd(){return this.common?this.$store.getters.commonChatMessages:this.$store.getters.chatMessages}},created(){},methods:{sendMessage(){let e=this.message.text.trim();if(e.length<1||e.length>75)return void(this.message.text="");const t=this.common?"COMMON":this.id,s={title:"CHAT",message:e,to:t};this.user.webSocket.send(JSON.stringify(s)),this.message.text=""}}});const qt=(0,q.Z)(Wt,[["render",Ut]]);var Ft=qt,Vt=(0,n.aZ)({components:{Chat:Ft},name:"TableTicTacToe",mixins:[U],props:["watch"],data(){return{horizontalGap:null,verticalGap:null,canvas:null,renderingContext:null,showLastVal:!1,soundOn:!1,secondsLeft:120}},created(){this.unsubscribe=this.$store.subscribe(((e,t)=>{if("move"===e.type){t.theTable.board;this.removeLastSquareHighLightning(),this.drawToken(this.theTable.board[this.theTable.board.length-1]),this.playMoveNotification(),this.highlightLastSquareIfSelected()}else if("changeTurn"===e.type)t.theTable.playerInTurn.name===this.userName?(this.addMouseListener(),this.startReducer()):(this.removeMouseListener(),this.stopReducer());else if("rematch"===e.type)this.initBoard();else if("updateWinner"===e.type){const e=t.theTable.win;this.removeMouseListener(),this.stopReducer(),this.drawWinningLine(e)}else"setDraw"===e.type&&(this.stopReducer(),this.removeMouseListener())})),this.theTable.playerInTurn?.name===this.userName&&(this.startTime=120,this.startReducer())},computed:{timeLeft(){return this.secondsLeft},theTable(){return this.$store.getters.theTable},iconColor(){const e=this.$store.getters.theTable.watchers;return e&&e.length>1?"green":"#000000"},watchers(){return this.$store.getters.theTable.watchers},resignButtonDisabled(){this.$store.getters.theTable;return!!this.watch||(!(!this.theTable||this.theTable.playerInTurn)||(this.theTable.playerInTurn.name!==this.userName||!!(this.theTable&&this.theTable.board&&this.theTable.board.length<4)))},rematchButtonEnabled(){const e=this.$store.getters.theTable;return!this.watch&&null===e.playerInTurn},resignButtonVisible(){return this.userName===this.theTable?.playerA?.name||this.userName===this.theTable?.playerB?.name}},mounted(){this.$store.getters.theTable?(this.initBoard(),"1"===this.watch&&this.drawBoard()):this.$router.push("/error")},beforeUnmount(){this.unsubscribe(),this.leaveTable()},methods:{startReducer(){this.redurcerInterval&&this.stopReducer(),this.secondsLeft=120,this.redurcerInterval=setInterval((()=>{this.secondsLeft=this.secondsLeft-1,this.secondsLeft<=0&&(this.stopReducer(),this.resign())}),1e3)},stopReducer(){clearInterval(this.redurcerInterval),this.secondsLeft=null},highlightLastSquareIfSelected(){if(this.showLastVal&&this.theTable.board.length>1){const e=this.theTable.board,t=e[e.length-1];this.drawToken(t,"#FF0000")}},playMoveNotification(){if(this.soundOn){const e=new window.AudioContext,t=e.createOscillator();t.type="sine",t.frequency.setValueAtTime(446,e.currentTime),t.connect(e.destination),t.start(),setTimeout((()=>{t.stop()}),250)}},removeLastSquareHighLightning(){if(this.theTable.board.length>1){const e=this.theTable.board,t=e[e.length-2];this.drawToken(t,"#000000")}},removeMouseListener(){this.canvas.removeEventListener("click",this.handleClick,!1)},addMouseListener(){this.canvas.addEventListener("click",this.handleClick,!1)},drawWinningLine(e){this.renderingContext.beginPath(),this.renderingContext.moveTo(e.fromX*this.horizontalGap+this.horizontalGap/2-10,e.fromY*this.verticalGap+this.verticalGap/2),this.renderingContext.lineTo(e.toX*this.horizontalGap+this.horizontalGap/2+10,e.toY*this.verticalGap+this.verticalGap/2),this.renderingContext.strokeStyle="#00FFFF",this.renderingContext.lineWidth=5,this.renderingContext.stroke()},initBoard(){let e=this.theTable;this.canvas=document.getElementById("canvas"),this.renderingContext=this.canvas.getContext("2d");window.innerHeight,window.innerWidth;this.canvas.height=400,this.canvas.width=400,e.x>=10&&e.x<=20?(this.canvas.height=600,this.canvas.width=600):e.x>20&&(this.canvas.height=800,this.canvas.width=800);let t=e.x-1,s=e.y-1;this.verticalGap=this.canvas.height/e.x,this.horizontalGap=this.canvas.width/e.y;let a=0,n=0;for(let r=0;r<t;r++)a+=this.horizontalGap,this.renderingContext.beginPath(),this.renderingContext.moveTo(a,n),this.renderingContext.lineTo(a,this.canvas.height),this.renderingContext.stroke();a=0,n=0;for(let r=0;r<s;r++)n+=this.verticalGap,this.renderingContext.beginPath(),this.renderingContext.moveTo(a,n),this.renderingContext.lineTo(this.canvas.width,n),this.renderingContext.stroke();this.theTable.playerInTurn.name===this.userName&&this.canvas.addEventListener("click",this.handleClick,!1)},drawBoard(){let e=this.theTable.board;e.forEach((e=>{this.drawToken(e)}))},drawToken(e,t){const s=e.token,a=e.x,n=e.y;if(s==rt.X){const e=Math.floor(a*this.horizontalGap+.1*this.horizontalGap),s=Math.floor(n*this.verticalGap+.1*this.verticalGap);t&&(this.renderingContext.strokeStyle=t),this.renderingContext.beginPath(),this.renderingContext.moveTo(e,s),this.renderingContext.lineTo(e+this.horizontalGap-.2*this.horizontalGap,s+this.verticalGap-.2*this.verticalGap),this.renderingContext.stroke(),this.renderingContext.beginPath(),this.renderingContext.moveTo(e,s+this.verticalGap-.2*this.verticalGap),this.renderingContext.lineTo(e+this.horizontalGap-.2*this.horizontalGap,s),this.renderingContext.stroke()}else{t&&(this.renderingContext.strokeStyle=t);const e=this.horizontalGap/2+a*this.horizontalGap,s=this.verticalGap/2+n*this.verticalGap,r=this.verticalGap/2*.85;this.renderingContext.beginPath(),this.renderingContext.arc(e,s,r,0,2*Math.PI),this.renderingContext.stroke()}},handleClick(e){const t=Math.floor(e.offsetX/this.verticalGap),s=Math.floor(e.offsetY/this.horizontalGap);let a={x:t,y:s,coordinates:t.toString().concat(s.toString())};const n=this.theTable.board.find((e=>e.coordinates===a.coordinates));if(!n){this.removeMouseListener();const e={title:"MOVE",x:a.x,y:a.y};this.user.webSocket.send(JSON.stringify(e)),this.removeMouseListener()}},disableBoard(){return this.renderingContext.font="30px Arial",this.renderingContext.fillText("Game over",10,this.canvas.height/2),!0},rematch(){const e={title:"REMATCH",message:""};this.user.webSocket.send(JSON.stringify(e))},resign(){const e={title:"RESIGN",message:this.tablea};this.user.webSocket.send(JSON.stringify(e))},leaveTable(){const e={title:"LEAVE_TABLE",message:this.theTable.tableId};this?.user?.webSocket?.send(JSON.stringify(e))}}});const Ht=(0,q.Z)(Vt,[["render",Pt],["__scopeId","data-v-5588a37c"]]);var Yt=Ht;const Zt={key:0,class:"row"},Jt={class:"row col-md-6 offset-md-3 alert alert-info text-start"},jt=(0,n._)("br",null,null,-1),Xt=(0,n._)("br",null,null,-1),Kt={class:"row"},Qt={key:0,class:"col-xs-12 col-sm-6"},es={key:1,class:"col-xs-12 col-sm-6"},ts={key:1,class:"row"};function ss(e,t,s,a,r,i){const o=(0,n.up)("GameHistory");return(0,n.wg)(),(0,n.iD)(n.HY,null,[e.userName&&e.memberSince?((0,n.wg)(),(0,n.iD)("div",Zt,[(0,n._)("div",Jt,[(0,n._)("b",null,(0,J.zw)(e.selectedName),1),jt,(0,n.Uk)(" Joined: "+(0,J.zw)(e.memberSince)+" ",1),Xt,(0,n.Uk)(" "+(0,J.zw)(e.text),1)]),(0,n._)("div",Kt,[e.connectFours.length>0?((0,n.wg)(),(0,n.iD)("div",Qt,[(0,n.Wm)(o,{games:e.connectFours,title:"Connect fours"},null,8,["games"])])):(0,n.kq)("",!0),e.tictactoes.length>0?((0,n.wg)(),(0,n.iD)("div",es,[(0,n.Wm)(o,{games:e.tictactoes,title:"TicTacToes"},null,8,["games"])])):(0,n.kq)("",!0)])])):(0,n.kq)("",!0),204==e.status||e.status>=400?((0,n.wg)(),(0,n.iD)("div",ts," User not found ")):(0,n.kq)("",!0)],64)}const as={class:"fw-bold"},ns={class:"list-group"},rs={class:""},is=(0,n._)("br",null,null,-1),os=(0,n._)("br",null,null,-1),ls=(0,n._)("br",null,null,-1),cs={key:0},hs=(0,n._)("br",null,null,-1),ds={key:1};function us(e,t,s,a,r,i){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("span",as,(0,J.zw)(s.title),1),(0,n._)("ul",ns,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.games,((t,s)=>((0,n.wg)(),(0,n.iD)("li",{key:t,class:(0,J.C_)(["list-group-item",[s%2==0?"bg-success p-2 text-dark bg-opacity-25":"bg-success p-2 text-dark bg-opacity-10"]])},[(0,n._)("div",rs,[(0,n.Uk)((0,J.zw)(e.convertInstantToDate(t.startInstant))+" ",1),is,(0,n.Uk)(" "+(0,J.zw)(t.playerAName)+" - "+(0,J.zw)(t.playerBName)+" ",1),os,(0,n.Uk)(" "+(0,J.zw)(t.playerAStartRanking)+" ( "+(0,J.zw)(e.getRankingChange(t.playerAEndRanking,t.playerAStartRanking))+" ) vs. "+(0,J.zw)(t.playerBStartRanking)+" ( "+(0,J.zw)(e.getRankingChange(t.playerBEndRanking,t.playerBStartRanking))+" ) ",1),ls,(0,n.Uk)(" Board: "+(0,J.zw)(t.boardDescription)+" ",1),t?.winnerUsername?((0,n.wg)(),(0,n.iD)("p",cs,[(0,n.Uk)(" Winner: "+(0,J.zw)(t.winnerUsername)+" ",1),hs,(0,n.Uk)(" "+(0,J.zw)(e.convertResultToText(t.result)),1)])):((0,n.wg)(),(0,n.iD)("p",ds,(0,J.zw)(e.convertResultToText(t.result)),1))])],2)))),128))])],64)}var ms={props:{games:Array,title:String},mixins:[lt],data(){return{}}};const gs=(0,q.Z)(ms,[["render",us]]);var ps=gs,bs=(0,n.aZ)({name:"Profile",mixins:[U],components:{GameHistory:ps},props:{selectedName:String},data(){return{stats:null,text:null,memberSince:null,connectFours:[],tictactoes:[],status:-1,fetchText:""}},computed:{},created(){this.fetchProfile()},methods:{fetchProfile(){this.status=-1,this.fetchText="";const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:null}},t="http://35.217.7.146/portal/api/profile/"+this.selectedName;this.$store.dispatch("setLoadingStatus",!0),fetch(t,e).then((e=>(this.status=e.status,200!==e.status?Promise.reject("error fetching profile"):e.json()))).then((e=>{this.text=e.user.profileText,this.memberSince=new Date(e.user.memberSince).toLocaleDateString(),this.tictactoes=e.user.tictactoes,this.connectFours=e.user.connectFours}),(e=>{console.error("error in profile fetch")})).finally((()=>{this.$store.dispatch("setLoadingStatus",!1)}))}}});const ws=(0,q.Z)(bs,[["render",ss]]);var Ts=ws;const fs={class:"row mt-3"},ys=(0,n._)("span",{class:"fw-bold"}," Hall of fame ",-1),vs=(0,n._)("br",null,null,-1),ks={class:"col-xs-12 col-sm-4 mt-3 mt-md-0 pt-3"},_s=(0,n._)("span",{class:"fw-bold"}," Connect Four ",-1),xs={class:"list-group"},Cs={class:"float-end"},Ss={class:"col-xs-12 col-sm-4 mt-3 mt-md-0 pt-3"},Ds=(0,n._)("span",{class:"fw-bold"}," TicTacToe ",-1),Ns={class:"list-group"},Ls={class:"float-end"};function Is(e,t,s,a,r,i){const o=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",fs,[(0,n._)("p",null,[ys,vs,(0,n.Uk)(" "+(0,J.zw)(e.dateTime),1)]),(0,n._)("div",ks,[_s,(0,n._)("ul",xs,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.connectFours,((e,t)=>((0,n.wg)(),(0,n.iD)("li",{key:e,class:(0,J.C_)(["list-group-item",[t%2==0?"bg-success p-2 text-dark bg-opacity-25":"bg-success p-2 text-dark bg-opacity-10"]])},[(0,n.Wm)(o,{to:{name:"Profile",params:{selectedName:e.nickname}},class:"games-profile-link float-start"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,J.zw)(t+1)+"."+(0,J.zw)(e.nickname),1)])),_:2},1032,["to"]),(0,n._)("span",Cs,(0,J.zw)(e.rankingConnectFour),1)],2)))),128))]),(0,n.Uk)(" Games "+(0,J.zw)(e.totalConnectFours),1)]),(0,n._)("div",Ss,[Ds,(0,n._)("ul",Ns,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.tictactoes,((e,t)=>((0,n.wg)(),(0,n.iD)("li",{key:e,class:(0,J.C_)(["list-group-item",[t%2==0?"bg-success p-2 text-dark bg-opacity-25":"bg-success p-2 text-dark bg-opacity-10"]])},[(0,n.Wm)(o,{to:{name:"Profile",params:{selectedName:e.nickname}},class:"games-profile-link float-start"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,J.zw)(t+1)+"."+(0,J.zw)(e.nickname),1)])),_:2},1032,["to"]),(0,n._)("span",Ls,(0,J.zw)(e.rankingTicTacToe),1)],2)))),128))]),(0,n.Uk)(" Games "+(0,J.zw)(e.totalTictactoes),1)])])}var Bs=(0,n.aZ)({name:"TopLists",data(){return{connectFours:[],tictactoes:[],errorFlag:!1,dateTime:void 0,totalConnectFours:0,totalTictactoes:0}},computed:{},created(){this.fetchLists()},methods:{fetchLists(){console.log("Ui starts fetch"),this.errorFlag=!1;const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:null}},t="http://35.217.7.146/portal/api/toplists";this.$store.dispatch("setLoadingStatus",!0),fetch(t,e).then((e=>200!==e.status?Promise.reject("error fetching lists"):e.json())).then((e=>{this.connectFours=e.connectFours,this.tictactoes=e.tictactoes,this.dateTime=new Date(e.instant).toLocaleString(),this.totalConnectFours=e.totalConnectFours,this.totalTictactoes=e.totalTictactoes}),(e=>{this.errorFlag=!0})).finally((()=>{this.$store.dispatch("setLoadingStatus",!1)}))}}});const As=(0,q.Z)(Bs,[["render",Is]]);var Es=As;const Os=e=>((0,n.dD)("data-v-e635c4c0"),e=e(),(0,n.Cn)(),e),Ms={class:"row"},Gs={class:"col"},zs=["disabled"],Ps={class:"row"},Rs={class:"col-xs-12 col-sm-4"},$s=(0,n.Uk)(" Connect 4 table "),Us=Os((()=>(0,n._)("br",null,null,-1))),Ws=Os((()=>(0,n._)("label",{class:"form-check-label ms-1",for:"highlight"},"Highlight last",-1))),qs=Os((()=>(0,n._)("br",null,null,-1))),Fs=Os((()=>(0,n._)("label",{class:"form-check-label ms-1",for:"soundOn"},"Notification sound",-1))),Vs=Os((()=>(0,n._)("br",null,null,-1))),Hs={class:"text-primary"},Ys=Os((()=>(0,n._)("br",null,null,-1))),Zs=(0,n.Uk)(" vs. "),Js=Os((()=>(0,n._)("br",null,null,-1))),js={class:"text-primary"},Xs={key:2,class:"text-success"},Ks={key:3,class:"text-success"},Qs={key:4,class:"text-danger"},ea={class:"text-danger"},ta={class:"col-xs-12 col-sm-8"};function sa(e,t,s,r,i,o){const l=(0,n.up)("chat");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",Ms,[(0,n._)("div",Gs,[e.resignButtonVisible?((0,n.wg)(),(0,n.iD)("button",{key:0,disabled:e.resignButtonDisabled,onClick:t[0]||(t[0]=(...t)=>e.resign&&e.resign(...t)),type:"button",class:"btn btn-primary w-30 float-xs-start float-sm-end"}," Resign ",8,zs)):(0,n.kq)("",!0),e.rematchButtonEnabled?((0,n.wg)(),(0,n.iD)("button",{key:1,onClick:t[1]||(t[1]=(...t)=>e.rematch&&e.rematch(...t)),type:"button",class:"btn btn-primary w-30 float-xs-start float-sm-end"}," Rematch ")):(0,n.kq)("",!0)])]),(0,n._)("div",Ps,[(0,n._)("div",Rs,[$s,Us,(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"checkbox",id:"highlight",onChange:t[2]||(t[2]=(...t)=>e.highlightLastSquareIfSelected&&e.highlightLastSquareIfSelected(...t)),"onUpdate:modelValue":t[3]||(t[3]=t=>e.showLastVal=t)},null,544),[[a.e8,e.showLastVal]]),Ws,qs,(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"checkbox",id:"soundOn","onUpdate:modelValue":t[4]||(t[4]=t=>e.soundOn=t)},null,512),[[a.e8,e.soundOn]]),Fs,Vs,e.theTable.playerA?((0,n.wg)(),(0,n.iD)("span",{key:0,class:(0,J.C_)(["fw-bold",{"text-success":e.theTable.playerInTurn?.name===e.theTable?.playerA?.name}])},(0,J.zw)(e.theTable?.playerA?.gameToken)+" = "+(0,J.zw)(e.theTable?.playerA?.name),3)):(0,n.kq)("",!0),(0,n._)("span",Hs," [ w:"+(0,J.zw)(e.theTable?.playerA?.wins)+" , d:"+(0,J.zw)(e.theTable?.playerA?.draws)+" ] ",1),Ys,Zs,Js,e.theTable.playerB?((0,n.wg)(),(0,n.iD)("span",{key:1,class:(0,J.C_)(["fw-bold",{"text-success":e.theTable.playerInTurn?.name===e.theTable?.playerB?.name}])},(0,J.zw)(e.theTable?.playerB?.gameToken)+" = "+(0,J.zw)(e.theTable?.playerB?.name),3)):(0,n.kq)("",!0),(0,n._)("span",js," [ w:"+(0,J.zw)(e.theTable?.playerB?.wins)+" , d:"+(0,J.zw)(e.theTable?.playerB?.draws)+" ] ",1),e.theTable.playerInTurn?.name===e.userName?((0,n.wg)(),(0,n.iD)("span",Xs," It's your turn. ")):null===e.theTable?.playerInTurn?((0,n.wg)(),(0,n.iD)("span",Ks," Game ended ")):((0,n.wg)(),(0,n.iD)("div",Qs," In turn: "+(0,J.zw)(e.theTable.playerInTurn?.name),1)),(0,n._)("div",{class:(0,J.C_)({hidden:e.theTable.playerInTurn?.name!==e.userName})},[(0,n._)("span",ea," Time left "+(0,J.zw)(e.timeLeft),1)],2)]),(0,n._)("div",ta,[(0,n._)("canvas",{class:(0,J.C_)({"bg-secondary":null==e.theTable.playerInTurn}),id:"canvas"},null,2)])]),(0,n.Wm)(l,{id:e.theTable.id},null,8,["id"])],64)}var aa=(0,n.aZ)({components:{Chat:Ft},name:"TableConnectFour",mixins:[U],props:["watch"],data(){return{canvas:null,renderingContext:null,showLastVal:!1,soundOn:!1,secondsLeft:120,startingPosX:-1,startingPosY:-1,gameBoardHeight:-1,gameBoardWidth:-1,arcDiameter:-1,selectedColumn:-1}},created(){this.unsubscribe=this.$store.subscribe(((e,t)=>{if("move"===e.type){t.theTable.board;this.removeLastSquareHighLightning(),this.drawToken(this.theTable.board[this.theTable.board.length-1]),this.playMoveNotification(),this.highlightLastSquareIfSelected()}else if("changeTurn"===e.type)t.theTable.playerInTurn.name===this.userName?(this.addMouseListeners(),this.startReducer()):(this.removeMouseListeners(),this.clearCircleIndicatorRow(),this.stopReducer());else if("rematch"===e.type)this.initBoard();else if("updateWinner"===e.type){const e=t.theTable.win;this.stopReducer(),this.removeMouseListeners(),this.drawWinningLine(e)}else"setDraw"===e.type&&(this.stopReducer(),this.removeMouseListeners())}))},computed:{timeLeft(){return this.secondsLeft},theTable(){return this.$store.getters.theTable},watchers(){return this.$store.getters.theTable.watchers},resignButtonDisabled(){this.$store.getters.theTable;return!!this.watch||(!(!this.theTable||this.theTable.playerInTurn)||(this.theTable.playerInTurn.name!==this.userName||!!(this.theTable&&this.theTable.board&&this.theTable.board.length<4)))},rematchButtonEnabled(){const e=this.$store.getters.theTable;return!this.watch&&null===e.playerInTurn},resignButtonVisible(){return this.userName===this.theTable?.playerA?.name||this.userName===this.theTable?.playerB?.name}},mounted(){this.$store.getters.theTable?(this.initBoard(),"1"===this.watch&&this.drawBoard()):this.$router.push("/error")},beforeUnmount(){this.unsubscribe(),this.leaveTable()},methods:{startReducer(){this.redurcerInterval&&this.stopReducer(),this.secondsLeft=120,this.redurcerInterval=setInterval((()=>{this.secondsLeft=this.secondsLeft-1,this.secondsLeft<=0&&(this.stopReducer(),this.resign())}),1e3)},stopReducer(){clearInterval(this.redurcerInterval),this.secondsLeft=null},highlightLastSquareIfSelected(){if(this.showLastVal&&this.theTable.board.length>1){const e=this.theTable.board,t=e[e.length-1];this.drawToken(t,"#FF0000")}},playMoveNotification(){if(this.soundOn){const e=new window.AudioContext,t=e.createOscillator();t.type="sine",t.frequency.setValueAtTime(446,e.currentTime),t.connect(e.destination),t.start(),setTimeout((()=>{t.stop()}),250)}},removeLastSquareHighLightning(){if(this.theTable.board.length>1){const e=this.theTable.board,t=e[e.length-2];this.drawToken(t,"#000000")}},removeMouseListeners(){this.canvas.removeEventListener("click",this.handleClick,!1),this.canvas.removeEventListener("mousemove",this.handleCircleIndicator)},addMouseListeners(){this.canvas.addEventListener("click",this.handleClick,!1),this.canvas.addEventListener("mousemove",this.handleCircleIndicator)},handleCircleIndicator(e){const t=Math.floor((e.offsetX-this.startingPosX)/this.arcDiameter)+1;if(t!=this.column&&t>0&&t<=this.theTable.x){const e=this.column*(this.arcDiameter/2);this.renderingContext.clearRect(e,0,e+this.arcDiameter,this.arcDiameter-3),this.column=t;const s=this.arcDiameter*this.column,a=this.arcDiameter/2;this.renderingContext.fillStyle="red",this.theTable?.playerInTurn?.gameToken===rt.X&&this.userName===this.theTable?.playerInTurn.name&&(this.renderingContext.fillStyle="blue"),this.renderingContext.beginPath(),this.renderingContext.arc(s,a,23,0,2*Math.PI),this.renderingContext.fill()}},clearCircleIndicatorRow(){this.column=-1,this.renderingContext.clearRect(0,0,this.gameBoardWidth,this.arcDiameter-3),console.log("Cleared")},drawWinningLine(e){this.renderingContext.beginPath();const t=(e.fromY+1)*this.arcDiameter,s=(e.fromX+1)*this.arcDiameter+this.arcDiameter/2,a=(e.toY+1)*this.arcDiameter,n=(e.toX+1)*this.arcDiameter+this.arcDiameter/2;this.renderingContext.moveTo(t,s),this.renderingContext.lineTo(a,n),this.renderingContext.strokeStyle="#00FFFF",this.renderingContext.lineWidth=5,this.renderingContext.stroke()},initBoard(){const e=this.theTable;this.canvas=document.getElementById("canvas"),this.renderingContext=this.canvas.getContext("2d"),this.canvas.height=440,this.canvas.width=440,e.x>=10&&e.x<=20?(this.canvas.height=620,this.canvas.width=620):e.x>20&&(this.canvas.height=800,this.canvas.width=800),this.arcDiameter=this.canvas.width/(e.x+1),this.drawBoardFrame(e),this.drawBoardLines(e),this.theTable.playerInTurn?.name===this.userName&&this.addMouseListeners()},drawBoardFrame(e){this.gapBetweenArcs=28,this.gameBoardHeight=e.y*this.arcDiameter,this.gameBoardWidth=e.x*this.arcDiameter,this.startingPosX=this.gapBetweenArcs,this.startingPosY=this.arcDiameter,this.renderingContext.beginPath(),this.renderingContext.rect(this.startingPosX,this.startingPosY,this.gameBoardWidth,this.gameBoardHeight),this.renderingContext.stroke()},drawBoardLines(e){for(let t=0;t<e.x;t++)for(let s=0;s<e.y+1;s++){if(0===s)continue;const e=this.arcDiameter*t+this.arcDiameter,a=this.arcDiameter*s+this.gapBetweenArcs;this.renderingContext.beginPath(),this.renderingContext.arc(e,a,25,0,2*Math.PI),this.renderingContext.stroke()}},drawBoard(){let e=this.theTable.board;e.forEach((e=>{this.drawToken(e)}))},drawToken(e,t){const s=e.token;s==rt.O?this.renderingContext.fillStyle="red":this.renderingContext.fillStyle="blue";const a=this.arcDiameter*(e.x+1)+this.gapBetweenArcs,n=this.arcDiameter*e.y+this.arcDiameter;this.renderingContext.beginPath(),this.renderingContext.arc(n,a,23,0,2*Math.PI),this.renderingContext.stroke(),this.renderingContext.fill()},handleClick(e){const t={title:"MOVE",y:this.column-1};this.user.webSocket.send(JSON.stringify(t))},disableBoard(){return this.renderingContext.font="30px Arial",this.renderingContext.fillText("Game over",10,this.canvas.height/2),!0},rematch(){const e={title:"REMATCH",message:""};this.user.webSocket.send(JSON.stringify(e))},resign(){const e={title:"RESIGN",message:this.tablea};this.user.webSocket.send(JSON.stringify(e))},leaveTable(){const e={title:"LEAVE_TABLE",message:this.theTable.tableId};this?.user?.webSocket?.send(JSON.stringify(e))}}});const na=(0,q.Z)(aa,[["render",sa],["__scopeId","data-v-e635c4c0"]]);var ra=na;const ia={class:"row mb-3 mt-2"},oa=(0,n.uE)('<div class="col"><span class="fw-bold"><h3>Terms and conditions 14.02.2022</h3></span><p class=""><span class="fw-bold">General</span><br> Site is under construction and can change/reset data without informing. At the moment you can play tic-tac-toe and connect4 games. On some occasions IP-address of the client is logged. <br></p><p class=""><span class="fw-bold">Cookies</span><br> This site does not use cookies to store information. Instead it uses browser&#39;s session storage to store login token.<br> With basic browser settings token is removed after closing or after using logging out functionality. <br></p><p class=""><span class="fw-bold">Browsers</span><br> Recommended browsers are latest versions of Firefox, Chrome and Edge. <br></p><p class=""><span class="fw-bold">Bugs</span><br> No bounties are available for bugs. But if you track them and find somethings please use the feedback form or contact using GitHub. <br> Frontend and backend source codes are available from https://github.com/antsa-1/games </p></div>',1),la=[oa];function ca(e,t,s,a,r,i){return(0,n.wg)(),(0,n.iD)("div",ia,la)}var ha=(0,n.aZ)({name:"Info",data(){return{messages:null,message:{text:""}}},computed:{messageExist(){return this.message.text.length>0}},created(){},methods:{sendMessage(){let e=this.message.text.trim();e.length<1||e.length}}});const da=(0,q.Z)(ha,[["render",ca]]);var ua=da;const ma=e=>((0,n.dD)("data-v-a6651bfc"),e=e(),(0,n.Cn)(),e),ga={key:0,class:"row"},pa=ma((()=>(0,n._)("div",{class:"col fw-bold"}," Have some feedback? Are games not working, got some improvement ideas? ",-1))),ba={class:"row mt-4"},wa={class:"col"},Ta=["disabled"],fa={key:0,class:"row d-inline-flex p-2 alert-danger"},ya={key:1,class:"row spinner-border",role:"status"},va=ma((()=>(0,n._)("span",{class:"sr-only"},null,-1))),ka=[va],_a={key:2,class:"row mt-4 alert alert-success"},xa=ma((()=>(0,n._)("div",{class:"col"}," Thanks! ",-1))),Ca=[xa];function Sa(e,t,s,r,i,o){return(0,n.wg)(),(0,n.iD)(n.HY,null,[e.showThanks||e.loadingData?e.loadingData?((0,n.wg)(),(0,n.iD)("div",ya,ka)):(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",ga,[pa,(0,n._)("div",ba,[(0,n._)("div",wa,[(0,n._)("div",null,[(0,n.wy)((0,n._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.message=t),maxlength:"400",class:"form-control",rows:"3"}," ",512),[[a.nr,e.message]]),(0,n._)("button",{disabled:!e.sendButtonEnabled,onClick:t[1]||(t[1]=(...t)=>e.send&&e.send(...t)),class:"btn btn-primary"}," Send feedback ",8,Ta)])])]),e.showError?((0,n.wg)(),(0,n.iD)("div",fa," Error occured! ")):(0,n.kq)("",!0)])),e.showThanks?((0,n.wg)(),(0,n.iD)("div",_a,Ca)):(0,n.kq)("",!0)],64)}var Da=(0,n.aZ)({name:"Feedback",data(){return{message:"",error:!1,success:!1,loading:!1}},computed:{sendButtonEnabled(){const e=this.message.trim();return e.length>4},showError(){return this.error},showThanks(){return this.success},loadingData(){return this.loading}},methods:{send(){console.log("http://35.217.7.146");const e="http://35.217.7.146/portal/api/feedback",t={method:"POST",headers:{"Content-Type":"application/json",Authorization:null},body:JSON.stringify(this.message)};this.loading=!0,fetch(e,t).then((e=>{if(200!==e.status)return Promise.reject("error in feedback")})).then((e=>{this.error=!1,this.success=!0,this.message=""}),(e=>{this.error=!0,this.success=!1})).finally((()=>{this.loading=!1}))}},created(){}});const Na=(0,q.Z)(Da,[["render",Sa],["__scopeId","data-v-a6651bfc"]]);var La=Na;const Ia={key:0,class:"row"},Ba=(0,n._)("div",{class:"col"},[(0,n._)("h3",null," Create nickname")],-1),Aa=(0,n._)("div",{class:"row"},[(0,n._)("div",{class:"col m-2"}," Nickname is optional to play the game. Nickname must be at least 2 chars and must not contain special characters. Password must be at minimum 8 characters. ")],-1),Ea=[Ba,Aa],Oa={key:1,class:"row"},Ma={class:"col m-2"},Ga=(0,n.Uk)(" * Nickname "),za={key:2,class:"row"},Pa={class:"col"},Ra=(0,n.Uk)(" * Password "),$a={key:3,class:"row"},Ua={class:"col"},Wa=["disabled"],qa={key:0,class:"text-danger"},Fa={key:0,class:"d-inline-flex p-2 alert-danger",role:"alert"},Va={key:1,class:"d-inline-flex p-2 alert-danger",role:"alert"},Ha={key:4,class:"row"},Ya={class:"col alert alert-success"},Za=(0,n.Uk)(" login ");function Ja(e,t,s,r,i,o){const l=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)(n.HY,null,[e.registerDone?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",Ia,Ea)),e.registerDone?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",Oa,[(0,n._)("div",Ma,[Ga,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.usrNameTemp=t),class:"p-3",id:"username",type:"text",name:"username",pattern:"\\\\S(.\\\\*\\\\S)\\\\?\\\\*",title:"This field is required",size:"40",maxlength:"15",autocomplete:"off"},null,512),[[a.nr,e.usrNameTemp]])])])),e.registerDone?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",za,[(0,n._)("div",Pa,[Ra,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.usrPwTemp=t),class:"p-3",id:"pw",name:"pw",type:"password",minlength:"8",size:"40",maxlength:"150",autocomplete:"off"},null,512),[[a.nr,e.usrPwTemp]])])])),e.registerDone?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",$a,[(0,n._)("div",Ua,[(0,n._)("button",{onClick:t[2]||(t[2]=(...t)=>e.registrate&&e.registrate(...t)),class:"btn btn-primary",disabled:e.isRegistrateButtonDisabled}," Registrate ",8,Wa),e.registrationDataOk?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("span",qa," Type (better) password"))]),e.errorInRegistration?((0,n.wg)(),(0,n.iD)("div",Fa," Registration error occured! Nickname minimum 2 characters and password minimum 8 characters. Try another nickname. ")):(0,n.kq)("",!0),e.errorInRegistrationDuplicate?((0,n.wg)(),(0,n.iD)("div",Va,"Oops, seems like nickname is already taken, try another.")):(0,n.kq)("",!0)])),e.registerDone?((0,n.wg)(),(0,n.iD)("div",Ha,[(0,n._)("div",Ya,[(0,n.Uk)(" Registration for nickname "+(0,J.zw)(e.usrNameTemp)+" is complete. You can now ",1),(0,n.Wm)(l,{to:{name:"Login"}},{default:(0,n.w5)((()=>[Za])),_:1})])])):(0,n.kq)("",!0)],64)}var ja=(0,n.aZ)({name:"Registration",data(){return{usrNameTemp:null,usrPwTemp:null,registerError:null,registerErrorNickName:null,requestOnTheFly:!1,registerDone:!1}},computed:{isRegistrateButtonDisabled(){return!!this.requestOnTheFly||!this.registrationDataOk},errorInRegistration(){return null!=this.registerError},errorInRegistrationDuplicate(){return null!=this.registerErrorNickName},registrationDataOk(){return!(!this.usrPwTemp||!this.usrNameTemp)&&(this.usrPwTemp!==this.usrNameTemp&&(!this.usrPwTemp.startsWith("1234567")&&(!this.usrPwTemp.startsWith("qwerty")&&(!this.usrPwTemp.startsWith(" ")&&!this.usrPwTemp.endsWith(" ")&&(!(this.usrPwTemp.length<8)&&!(this.usrNameTemp.length<1))))))}},created(){},methods:{showLogin(){},registrate(){this.registerError=null,this.registerErrorNickName=null,this.requestOnTheFly=!0;const e={method:"POST",headers:{"Content-Type":"application/json",Authorization:null},body:JSON.stringify({userName:this.usrNameTemp?.trim(),password:this.usrPwTemp.trim()})},t="http://35.217.7.146/portal/api/user/register";this.$store.dispatch("setLoadingStatus",!0),fetch(t,e).then((e=>(this.resetRegistrationData(),406===e.status?Promise.reject(406):200!==e.status?Promise.reject("error in login"):e.json()))).then((e=>{this.usrNameTemp=e.name,this.registerDone=!0}),(e=>{406===e?this.registerErrorNickName=!0:this.registerError=!0})).finally((()=>{this.requestOnTheFly=!1,this.$store.dispatch("setLoadingStatus",!1)}))},resetRegistrationData(){this.usrNameTemp=null,this.usrPwTemp=null}}});const Xa=(0,q.Z)(ja,[["render",Ja]]);var Ka=Xa;const Qa={class:"row"},en={class:"col text-danger"},tn=(0,n.Uk)(" An error occured. Try navigating to "),sn=(0,n.Uk)("main page");function an(e,t,s,a,r,i){const o=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",Qa,[(0,n._)("div",en,[tn,(0,n.Wm)(o,{to:{name:"Home"}},{default:(0,n.w5)((()=>[sn])),_:1})])])}var nn=(0,n.aZ)({name:"Error",methods:{toMainPage(){this.$router.push("/")}},created(){}});const rn=(0,q.Z)(nn,[["render",an]]);var on=rn,ln=s(637);const cn=(0,ln.MT)({state:{user:null,gameModes:[],tables:[],users:[],theTable:null,commonChat:{messages:[],message:null},loadingStatus:!1},getters:{user(e){if(e.user)return e.user;const t=sessionStorage.getItem("userName"),s=sessionStorage.getItem("token");if(t&&s){const a={name:t,token:s};return cn.dispatch("setUser",a),e.user}return null},loading(e){return e.loadingStatus},userName(e){return e.user?e.user.name:null},users(e){return e.users},tables(e){return e.tables},gameModes(e){return e.gameModes},theTable(e){return e.theTable},chatMessages(e){return e.theTable&&e.theTable.chat?e.theTable.chat.messages:[]},commonChatMessages(e){return e.commonChat.messages},gameBoard(e){return e.theTable.board},loadingStatus(e){return e.loadingStatus}},mutations:{setUser(e,t){t?(sessionStorage.setItem("userName",t.name),sessionStorage.setItem("token",t.token),e.user=t):(sessionStorage.removeItem("userName"),sessionStorage.removeItem("token"),e.user=t)},setGameModes(e,t){e.gameModes=t},setTables(e,t){e.tables=t},setUsers(e,t){e.users=t},addTable(e,t){t.playerA.name===e.user.name?e.tables.unshift(t):e.tables.push(t)},removeFromPlayerList(e,t){e.users=e.users.filter((e=>e.name!==t.name))},removeTable(e,t){e.tables=e.tables.filter((e=>e.tableId!==t.tableId))},addPlayer(e,t){e.users.push(t)},startGame(e,t){const s=e.tables.findIndex((e=>e.tableId===t.tableId));e.tables.splice(s,1,t)},selectTable(e,t){let s={messages:[],message:{text:""}};t.chat=s;const a=t.board;t.board=a,e.theTable=t},addWatcher(e,t){if(e.theTable){let s=t.name.concat(" joined to watch");const a={from:"System",text:s};e.theTable.chat.messages.unshift(a)}},move(e,t){e.theTable.board.push(t)},changeTurn(e,t){e.theTable={...e.theTable,playerInTurn:t}},chat(e,t){e.theTable&&e.theTable.chat.messages.unshift(t)},updateCommonChat(e,t){e.commonChat.messages.unshift(t)},updateScore(e,t){e.theTable&&(e.theTable.playerA.wins=t.winsA,e.theTable.playerB.wins=t.winsB,e.theTable.playerInTurn=null)},leaveTable(e,t){if(e.theTable){(e.theTable.playerA.name===t||e.theTable.playerB.name===t)&&(e.theTable.playerInTurn=null);let s=t.concat(" left table");const a={from:"System",text:s};e.theTable.chat.messages.unshift(a)}},rematch(e,t){let s={messages:[],message:{text:""}};e.theTable&&e.theTable.chat&&(s=e.theTable.chat);const a=[];t.board=a;const n={text:"Rematch started",from:"System"};s.messages.unshift(n),t.playerA.wins=t.playerA.wins,t.playerB.wins=t.playerB.wins,t.chat=s,e.theTable=t},updateWinner(e,t){if(this.state.theTable){e.theTable.playerInTurn=null;const s={text:t.winner.name.concat(" won"),from:"System"};e.theTable.chat.messages.unshift(s),e.theTable.win=t}},setDraw(e,t){if(this.state.theTable){e.theTable.playerA&&(e.theTable.playerA.draws=t.table.playerA.draws),e.theTable.playerB&&(e.theTable.playerB.draws=t.table.playerB.draws),e.theTable.playerInTurn&&(e.theTable.playerInTurn=null);const s={text:"Game ended in draw",from:"System"};e.theTable.chat.messages.unshift(s)}},setLoadingStatus(e,t){e.loadingStatus=t}},actions:{setUser(e,t){e.commit("setUser",t)},setGameModes(e,t){e.commit("setGameModes",t)},setTables(e,t){e.commit("setTables",t)},setUsers(e,t){e.commit("setUsers",t)},addTable(e,t){e.commit("addTable",t)},removePlayer(e,t){e.commit("removeFromPlayerList",t)},removeTable(e,t){e.commit("removeTable",t)},addPlayer(e,t){e.commit("addPlayer",t)},startGame(e,t){e.commit("startGame",t)},selectTable(e,t){e.commit("selectTable",t)},addWatcher(e,t){e.commit("addWatcher",t)},move(e,t){e.commit("move",t)},changeTurn(e,t){e.commit("changeTurn",t)},chat(e,t){e.commit("chat",t)},updateCommonChat(e,t){e.commit("updateCommonChat",t)},updateScore(e,t){e.commit("updateScore",t)},rematch(e,t){e.commit("rematch",t)},leaveTable(e,t){e.commit("leaveTable",t)},updateWinner(e,t){e.commit("updateWinner",t)},setDraw(e,t){e.commit("setDraw",t)},logout(e,t){e.commit("setTables",[]),e.commit("setUsers",[]),t&&t.webSocket&&(t.webSocket.close(),t.webSocket=null);const s={method:"POST",headers:{"Content-Type":"application/json",Authorization:null},body:JSON.stringify({token:t?.token})},a="http://35.217.7.146/portal/api/user/logout";e.commit("setUser",null),fetch(a,s).then((e=>{}))},setLoadingStatus(e,t){e.commit("setLoadingStatus",t)}}});var hn=s(119);const dn=[{path:"/portal/index.html",redirect:{name:"Home"}},{path:"/index.html",redirect:{name:"Home"}},{path:"/",redirect:{name:"Home"}},{path:"/portal",redirect:{name:"Home"}},{path:"/portal/home",component:bt,name:"Home"},{path:"/portal/login",component:me,name:"Login",props:!0},{path:"/portal/registration",component:Ka,name:"Registration",props:!0},{path:"/portal/toplists",component:Es,name:"TopLists",props:!0},{path:"/portal/lobby",component:dt,name:"Lobby",props:!0,beforeEnter:(e,t,s)=>{if(cn.state.user)s();else{const e=sessionStorage.getItem("userName"),t=sessionStorage.getItem("token");let a={name:e,token:t,webSocket:null};cn.dispatch("setUser",a).then((()=>{s()}))}}},{path:"/portal/table/:watch?",component:Yt,name:"TableTicTacToe",props:!0,beforeEnter:(e,t,s)=>{cn.state.user&&cn.state.theTable?s():s("/")}},{path:"/portal/connectfour/:watch?",component:ra,name:"TableConnectFour",props:!0,beforeEnter:(e,t,s)=>{cn.state.user&&cn.state.theTable?s():s("/")}},{path:"/portal/user/:selectedName/profile",component:Ts,name:"Profile",props:!0},{path:"/portal/terms",component:ua,name:"Info"},{path:"/portal/feedback",component:La,name:"Feedback"},{path:"/portal/:catchAll(.*)",component:on,name:"Error",props:!0}],un=(0,hn.p7)({history:(0,hn.PO)(),routes:dn}),mn=(0,a.ri)(Z);mn.use(un).use(cn).mount("#app")}},t={};function s(a){var n=t[a];if(void 0!==n)return n.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,s),r.exports}s.m=e,function(){var e=[];s.O=function(t,a,n,r){if(!a){var i=1/0;for(h=0;h<e.length;h++){a=e[h][0],n=e[h][1],r=e[h][2];for(var o=!0,l=0;l<a.length;l++)(!1&r||i>=r)&&Object.keys(s.O).every((function(e){return s.O[e](a[l])}))?a.splice(l--,1):(o=!1,r<i&&(i=r));if(o){e.splice(h--,1);var c=n();void 0!==c&&(t=c)}}return t}r=r||0;for(var h=e.length;h>0&&e[h-1][2]>r;h--)e[h]=e[h-1];e[h]=[a,n,r]}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,r,i=a[0],o=a[1],l=a[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(l)var h=l(s)}for(t&&t(a);c<i.length;c++)r=i[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(h)},a=self["webpackChunktauhka_games"]=self["webpackChunktauhka_games"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(574)}));a=s.O(a)})();