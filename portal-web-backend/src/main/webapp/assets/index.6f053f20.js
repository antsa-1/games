const ju=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}};ju();function jo(e,t){const s=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)s[n[i]]=!0;return t?i=>!!s[i.toLowerCase()]:i=>!!s[i]}const Uu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",zu=jo(Uu);function Tl(e){return!!e||e===""}function Uo(e){if(te(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],i=Ve(n)?Yu(n):Uo(n);if(i)for(const o in i)t[o]=i[o]}return t}else{if(Ve(e))return e;if($e(e))return e}}const Gu=/;(?![^(]*\))/g,Wu=/:(.+)/;function Yu(e){const t={};return e.split(Gu).forEach(s=>{if(s){const n=s.split(Wu);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Pe(e){let t="";if(Ve(e))t=e;else if(te(e))for(let s=0;s<e.length;s++){const n=Pe(e[s]);n&&(t+=n+" ")}else if($e(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}function qu(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=jn(e[n],t[n]);return s}function jn(e,t){if(e===t)return!0;let s=Nr(e),n=Nr(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=Ln(e),n=Ln(t),s||n)return e===t;if(s=te(e),n=te(t),s||n)return s&&n?qu(e,t):!1;if(s=$e(e),n=$e(t),s||n){if(!s||!n)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const r in e){const a=e.hasOwnProperty(r),l=t.hasOwnProperty(r);if(a&&!l||!a&&l||!jn(e[r],t[r]))return!1}}return String(e)===String(t)}function zo(e,t){return e.findIndex(s=>jn(s,t))}const j=e=>Ve(e)?e:e==null?"":te(e)||$e(e)&&(e.toString===Cl||!ue(e.toString))?JSON.stringify(e,wl,2):String(e),wl=(e,t)=>t&&t.__v_isRef?wl(e,t.value):Gs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,i])=>(s[`${n} =>`]=i,s),{})}:rn(t)?{[`Set(${t.size})`]:[...t.values()]}:$e(t)&&!te(t)&&!xl(t)?String(t):t,Se={},zs=[],_t=()=>{},Ku=()=>!1,Qu=/^on[^a-z]/,Li=e=>Qu.test(e),Go=e=>e.startsWith("onUpdate:"),et=Object.assign,Wo=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},Xu=Object.prototype.hasOwnProperty,me=(e,t)=>Xu.call(e,t),te=Array.isArray,Gs=e=>Un(e)==="[object Map]",rn=e=>Un(e)==="[object Set]",Nr=e=>Un(e)==="[object Date]",ue=e=>typeof e=="function",Ve=e=>typeof e=="string",Ln=e=>typeof e=="symbol",$e=e=>e!==null&&typeof e=="object",El=e=>$e(e)&&ue(e.then)&&ue(e.catch),Cl=Object.prototype.toString,Un=e=>Cl.call(e),Ju=e=>Un(e).slice(8,-1),xl=e=>Un(e)==="[object Object]",Yo=e=>Ve(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,li=jo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),$i=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},Zu=/-(\w)/g,Nt=$i(e=>e.replace(Zu,(t,s)=>s?s.toUpperCase():"")),eh=/\B([A-Z])/g,an=$i(e=>e.replace(eh,"-$1").toLowerCase()),Ni=$i(e=>e.charAt(0).toUpperCase()+e.slice(1)),so=$i(e=>e?`on${Ni(e)}`:""),$n=(e,t)=>!Object.is(e,t),ci=(e,t)=>{for(let s=0;s<e.length;s++)e[s](t)},gi=(e,t,s)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:s})},bi=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Rr;const th=()=>Rr||(Rr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Pt;class sh{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Pt&&(this.parent=Pt,this.index=(Pt.scopes||(Pt.scopes=[])).push(this)-1)}run(t){if(this.active){const s=Pt;try{return Pt=this,t()}finally{Pt=s}}}on(){Pt=this}off(){Pt=this.parent}stop(t){if(this.active){let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.scopes)for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);if(this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function nh(e,t=Pt){t&&t.active&&t.effects.push(e)}const qo=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Sl=e=>(e.w&os)>0,kl=e=>(e.n&os)>0,ih=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=os},oh=e=>{const{deps:t}=e;if(t.length){let s=0;for(let n=0;n<t.length;n++){const i=t[n];Sl(i)&&!kl(i)?i.delete(e):t[s++]=i,i.w&=~os,i.n&=~os}t.length=s}},go=new WeakMap;let vn=0,os=1;const bo=30;let bt;const _s=Symbol(""),yo=Symbol("");class Ko{constructor(t,s=null,n){this.fn=t,this.scheduler=s,this.active=!0,this.deps=[],this.parent=void 0,nh(this,n)}run(){if(!this.active)return this.fn();let t=bt,s=ns;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=bt,bt=this,ns=!0,os=1<<++vn,vn<=bo?ih(this):Mr(this),this.fn()}finally{vn<=bo&&oh(this),os=1<<--vn,bt=this.parent,ns=s,this.parent=void 0,this.deferStop&&this.stop()}}stop(){bt===this?this.deferStop=!0:this.active&&(Mr(this),this.onStop&&this.onStop(),this.active=!1)}}function Mr(e){const{deps:t}=e;if(t.length){for(let s=0;s<t.length;s++)t[s].delete(e);t.length=0}}let ns=!0;const Al=[];function ln(){Al.push(ns),ns=!1}function cn(){const e=Al.pop();ns=e===void 0?!0:e}function lt(e,t,s){if(ns&&bt){let n=go.get(e);n||go.set(e,n=new Map);let i=n.get(s);i||n.set(s,i=qo()),Il(i)}}function Il(e,t){let s=!1;vn<=bo?kl(e)||(e.n|=os,s=!Sl(e)):s=!e.has(bt),s&&(e.add(bt),bt.deps.push(e))}function jt(e,t,s,n,i,o){const r=go.get(e);if(!r)return;let a=[];if(t==="clear")a=[...r.values()];else if(s==="length"&&te(e))r.forEach((l,h)=>{(h==="length"||h>=n)&&a.push(l)});else switch(s!==void 0&&a.push(r.get(s)),t){case"add":te(e)?Yo(s)&&a.push(r.get("length")):(a.push(r.get(_s)),Gs(e)&&a.push(r.get(yo)));break;case"delete":te(e)||(a.push(r.get(_s)),Gs(e)&&a.push(r.get(yo)));break;case"set":Gs(e)&&a.push(r.get(_s));break}if(a.length===1)a[0]&&vo(a[0]);else{const l=[];for(const h of a)h&&l.push(...h);vo(qo(l))}}function vo(e,t){const s=te(e)?e:[...e];for(const n of s)n.computed&&Dr(n);for(const n of s)n.computed||Dr(n)}function Dr(e,t){(e!==bt||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const rh=jo("__proto__,__v_isRef,__isVue"),Pl=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ln)),ah=Qo(),lh=Qo(!1,!0),ch=Qo(!0),Br=uh();function uh(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...s){const n=_e(this);for(let o=0,r=this.length;o<r;o++)lt(n,"get",o+"");const i=n[t](...s);return i===-1||i===!1?n[t](...s.map(_e)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...s){ln();const n=_e(this)[t].apply(this,s);return cn(),n}}),e}function Qo(e=!1,t=!1){return function(n,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(e?t?Sh:Rl:t?Nl:$l).get(n))return n;const r=te(n);if(!e&&r&&me(Br,i))return Reflect.get(Br,i,o);const a=Reflect.get(n,i,o);return(Ln(i)?Pl.has(i):rh(i))||(e||lt(n,"get",i),t)?a:We(a)?r&&Yo(i)?a:a.value:$e(a)?e?Ml(a):un(a):a}}const hh=Ol(),dh=Ol(!0);function Ol(e=!1){return function(s,n,i,o){let r=s[n];if(Nn(r)&&We(r)&&!We(i))return!1;if(!e&&!Nn(i)&&(_o(i)||(i=_e(i),r=_e(r)),!te(s)&&We(r)&&!We(i)))return r.value=i,!0;const a=te(s)&&Yo(n)?Number(n)<s.length:me(s,n),l=Reflect.set(s,n,i,o);return s===_e(o)&&(a?$n(i,r)&&jt(s,"set",n,i):jt(s,"add",n,i)),l}}function fh(e,t){const s=me(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&s&&jt(e,"delete",t,void 0),n}function ph(e,t){const s=Reflect.has(e,t);return(!Ln(t)||!Pl.has(t))&&lt(e,"has",t),s}function mh(e){return lt(e,"iterate",te(e)?"length":_s),Reflect.ownKeys(e)}const Ll={get:ah,set:hh,deleteProperty:fh,has:ph,ownKeys:mh},gh={get:ch,set(e,t){return!0},deleteProperty(e,t){return!0}},bh=et({},Ll,{get:lh,set:dh}),Xo=e=>e,Ri=e=>Reflect.getPrototypeOf(e);function Jn(e,t,s=!1,n=!1){e=e.__v_raw;const i=_e(e),o=_e(t);s||(t!==o&&lt(i,"get",t),lt(i,"get",o));const{has:r}=Ri(i),a=n?Xo:s?er:Rn;if(r.call(i,t))return a(e.get(t));if(r.call(i,o))return a(e.get(o));e!==i&&e.get(t)}function Zn(e,t=!1){const s=this.__v_raw,n=_e(s),i=_e(e);return t||(e!==i&&lt(n,"has",e),lt(n,"has",i)),e===i?s.has(e):s.has(e)||s.has(i)}function ei(e,t=!1){return e=e.__v_raw,!t&&lt(_e(e),"iterate",_s),Reflect.get(e,"size",e)}function Hr(e){e=_e(e);const t=_e(this);return Ri(t).has.call(t,e)||(t.add(e),jt(t,"add",e,e)),this}function Vr(e,t){t=_e(t);const s=_e(this),{has:n,get:i}=Ri(s);let o=n.call(s,e);o||(e=_e(e),o=n.call(s,e));const r=i.call(s,e);return s.set(e,t),o?$n(t,r)&&jt(s,"set",e,t):jt(s,"add",e,t),this}function Fr(e){const t=_e(this),{has:s,get:n}=Ri(t);let i=s.call(t,e);i||(e=_e(e),i=s.call(t,e)),n&&n.call(t,e);const o=t.delete(e);return i&&jt(t,"delete",e,void 0),o}function jr(){const e=_e(this),t=e.size!==0,s=e.clear();return t&&jt(e,"clear",void 0,void 0),s}function ti(e,t){return function(n,i){const o=this,r=o.__v_raw,a=_e(r),l=t?Xo:e?er:Rn;return!e&&lt(a,"iterate",_s),r.forEach((h,u)=>n.call(i,l(h),l(u),o))}}function si(e,t,s){return function(...n){const i=this.__v_raw,o=_e(i),r=Gs(o),a=e==="entries"||e===Symbol.iterator&&r,l=e==="keys"&&r,h=i[e](...n),u=s?Xo:t?er:Rn;return!t&&lt(o,"iterate",l?yo:_s),{next(){const{value:c,done:p}=h.next();return p?{value:c,done:p}:{value:a?[u(c[0]),u(c[1])]:u(c),done:p}},[Symbol.iterator](){return this}}}}function Yt(e){return function(...t){return e==="delete"?!1:this}}function yh(){const e={get(o){return Jn(this,o)},get size(){return ei(this)},has:Zn,add:Hr,set:Vr,delete:Fr,clear:jr,forEach:ti(!1,!1)},t={get(o){return Jn(this,o,!1,!0)},get size(){return ei(this)},has:Zn,add:Hr,set:Vr,delete:Fr,clear:jr,forEach:ti(!1,!0)},s={get(o){return Jn(this,o,!0)},get size(){return ei(this,!0)},has(o){return Zn.call(this,o,!0)},add:Yt("add"),set:Yt("set"),delete:Yt("delete"),clear:Yt("clear"),forEach:ti(!0,!1)},n={get(o){return Jn(this,o,!0,!0)},get size(){return ei(this,!0)},has(o){return Zn.call(this,o,!0)},add:Yt("add"),set:Yt("set"),delete:Yt("delete"),clear:Yt("clear"),forEach:ti(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=si(o,!1,!1),s[o]=si(o,!0,!1),t[o]=si(o,!1,!0),n[o]=si(o,!0,!0)}),[e,s,t,n]}const[vh,_h,Th,wh]=yh();function Jo(e,t){const s=t?e?wh:Th:e?_h:vh;return(n,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(me(s,i)&&i in n?s:n,i,o)}const Eh={get:Jo(!1,!1)},Ch={get:Jo(!1,!0)},xh={get:Jo(!0,!1)},$l=new WeakMap,Nl=new WeakMap,Rl=new WeakMap,Sh=new WeakMap;function kh(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ah(e){return e.__v_skip||!Object.isExtensible(e)?0:kh(Ju(e))}function un(e){return Nn(e)?e:Zo(e,!1,Ll,Eh,$l)}function Ih(e){return Zo(e,!1,bh,Ch,Nl)}function Ml(e){return Zo(e,!0,gh,xh,Rl)}function Zo(e,t,s,n,i){if(!$e(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const r=Ah(e);if(r===0)return e;const a=new Proxy(e,r===2?n:s);return i.set(e,a),a}function Ws(e){return Nn(e)?Ws(e.__v_raw):!!(e&&e.__v_isReactive)}function Nn(e){return!!(e&&e.__v_isReadonly)}function _o(e){return!!(e&&e.__v_isShallow)}function Dl(e){return Ws(e)||Nn(e)}function _e(e){const t=e&&e.__v_raw;return t?_e(t):e}function Bl(e){return gi(e,"__v_skip",!0),e}const Rn=e=>$e(e)?un(e):e,er=e=>$e(e)?Ml(e):e;function Hl(e){ns&&bt&&(e=_e(e),Il(e.dep||(e.dep=qo())))}function Vl(e,t){e=_e(e),e.dep&&vo(e.dep)}function We(e){return!!(e&&e.__v_isRef===!0)}function Ds(e){return Fl(e,!1)}function Ph(e){return Fl(e,!0)}function Fl(e,t){return We(e)?e:new Oh(e,t)}class Oh{constructor(t,s){this.__v_isShallow=s,this.dep=void 0,this.__v_isRef=!0,this._rawValue=s?t:_e(t),this._value=s?t:Rn(t)}get value(){return Hl(this),this._value}set value(t){t=this.__v_isShallow?t:_e(t),$n(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Rn(t),Vl(this))}}function Re(e){return We(e)?e.value:e}const Lh={get:(e,t,s)=>Re(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const i=e[t];return We(i)&&!We(s)?(i.value=s,!0):Reflect.set(e,t,s,n)}};function jl(e){return Ws(e)?e:new Proxy(e,Lh)}class $h{constructor(t,s,n,i){this._setter=s,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Ko(t,()=>{this._dirty||(this._dirty=!0,Vl(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=_e(this);return Hl(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Nh(e,t,s=!1){let n,i;const o=ue(e);return o?(n=e,i=_t):(n=e.get,i=e.set),new $h(n,i,o||!i,s)}function is(e,t,s,n){let i;try{i=n?e(...n):e()}catch(o){Mi(o,t,s)}return i}function Tt(e,t,s,n){if(ue(e)){const o=is(e,t,s,n);return o&&El(o)&&o.catch(r=>{Mi(r,t,s)}),o}const i=[];for(let o=0;o<e.length;o++)i.push(Tt(e[o],t,s,n));return i}function Mi(e,t,s,n=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const r=t.proxy,a=s;for(;o;){const h=o.ec;if(h){for(let u=0;u<h.length;u++)if(h[u](e,r,a)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){is(l,null,10,[e,r,a]);return}}Rh(e,s,i,n)}function Rh(e,t,s,n=!0){console.error(e)}let yi=!1,To=!1;const at=[];let Vt=0;const En=[];let _n=null,Bs=0;const Cn=[];let Zt=null,Hs=0;const Ul=Promise.resolve();let tr=null,wo=null;function zl(e){const t=tr||Ul;return e?t.then(this?e.bind(this):e):t}function Mh(e){let t=Vt+1,s=at.length;for(;t<s;){const n=t+s>>>1;Mn(at[n])<e?t=n+1:s=n}return t}function Gl(e){(!at.length||!at.includes(e,yi&&e.allowRecurse?Vt+1:Vt))&&e!==wo&&(e.id==null?at.push(e):at.splice(Mh(e.id),0,e),Wl())}function Wl(){!yi&&!To&&(To=!0,tr=Ul.then(Kl))}function Dh(e){const t=at.indexOf(e);t>Vt&&at.splice(t,1)}function Yl(e,t,s,n){te(e)?s.push(...e):(!t||!t.includes(e,e.allowRecurse?n+1:n))&&s.push(e),Wl()}function Bh(e){Yl(e,_n,En,Bs)}function Hh(e){Yl(e,Zt,Cn,Hs)}function Di(e,t=null){if(En.length){for(wo=t,_n=[...new Set(En)],En.length=0,Bs=0;Bs<_n.length;Bs++)_n[Bs]();_n=null,Bs=0,wo=null,Di(e,t)}}function ql(e){if(Di(),Cn.length){const t=[...new Set(Cn)];if(Cn.length=0,Zt){Zt.push(...t);return}for(Zt=t,Zt.sort((s,n)=>Mn(s)-Mn(n)),Hs=0;Hs<Zt.length;Hs++)Zt[Hs]();Zt=null,Hs=0}}const Mn=e=>e.id==null?1/0:e.id;function Kl(e){To=!1,yi=!0,Di(e),at.sort((s,n)=>Mn(s)-Mn(n));const t=_t;try{for(Vt=0;Vt<at.length;Vt++){const s=at[Vt];s&&s.active!==!1&&is(s,null,14)}}finally{Vt=0,at.length=0,ql(),yi=!1,tr=null,(at.length||En.length||Cn.length)&&Kl(e)}}function Vh(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||Se;let i=s;const o=t.startsWith("update:"),r=o&&t.slice(7);if(r&&r in n){const u=`${r==="modelValue"?"model":r}Modifiers`,{number:c,trim:p}=n[u]||Se;p&&(i=s.map(b=>b.trim())),c&&(i=s.map(bi))}let a,l=n[a=so(t)]||n[a=so(Nt(t))];!l&&o&&(l=n[a=so(an(t))]),l&&Tt(l,e,6,i);const h=n[a+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Tt(h,e,6,i)}}function Ql(e,t,s=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const o=e.emits;let r={},a=!1;if(!ue(e)){const l=h=>{const u=Ql(h,t,!0);u&&(a=!0,et(r,u))};!s&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!a?(n.set(e,null),null):(te(o)?o.forEach(l=>r[l]=null):et(r,o),n.set(e,r),r)}function Bi(e,t){return!e||!Li(t)?!1:(t=t.slice(2).replace(/Once$/,""),me(e,t[0].toLowerCase()+t.slice(1))||me(e,an(t))||me(e,t))}let yt=null,Hi=null;function vi(e){const t=yt;return yt=e,Hi=e&&e.type.__scopeId||null,t}function hn(e){Hi=e}function dn(){Hi=null}function rt(e,t=yt,s){if(!t||e._n)return e;const n=(...i)=>{n._d&&Jr(-1);const o=vi(t),r=e(...i);return vi(o),n._d&&Jr(1),r};return n._n=!0,n._c=!0,n._d=!0,n}function no(e){const{type:t,vnode:s,proxy:n,withProxy:i,props:o,propsOptions:[r],slots:a,attrs:l,emit:h,render:u,renderCache:c,data:p,setupState:b,ctx:x,inheritAttrs:L}=e;let I,w;const H=vi(e);try{if(s.shapeFlag&4){const R=i||n;I=Ot(u.call(R,R,c,o,b,p,x)),w=l}else{const R=t;I=Ot(R.length>1?R(o,{attrs:l,slots:a,emit:h}):R(o,null)),w=t.props?l:Fh(l)}}catch(R){xn.length=0,Mi(R,e,1),I=re(xs)}let Y=I;if(w&&L!==!1){const R=Object.keys(w),{shapeFlag:X}=Y;R.length&&X&7&&(r&&R.some(Go)&&(w=jh(w,r)),Y=qs(Y,w))}return s.dirs&&(Y=qs(Y),Y.dirs=Y.dirs?Y.dirs.concat(s.dirs):s.dirs),s.transition&&(Y.transition=s.transition),I=Y,vi(H),I}const Fh=e=>{let t;for(const s in e)(s==="class"||s==="style"||Li(s))&&((t||(t={}))[s]=e[s]);return t},jh=(e,t)=>{const s={};for(const n in e)(!Go(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function Uh(e,t,s){const{props:n,children:i,component:o}=e,{props:r,children:a,patchFlag:l}=t,h=o.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?Ur(n,r,h):!!r;if(l&8){const u=t.dynamicProps;for(let c=0;c<u.length;c++){const p=u[c];if(r[p]!==n[p]&&!Bi(h,p))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===r?!1:n?r?Ur(n,r,h):!0:!!r;return!1}function Ur(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==e[o]&&!Bi(s,o))return!0}return!1}function zh({vnode:e,parent:t},s){for(;t&&t.subTree===e;)(e=t.vnode).el=s,t=t.parent}const Gh=e=>e.__isSuspense;function Wh(e,t){t&&t.pendingBranch?te(e)?t.effects.push(...e):t.effects.push(e):Hh(e)}function ui(e,t){if(Ue){let s=Ue.provides;const n=Ue.parent&&Ue.parent.provides;n===s&&(s=Ue.provides=Object.create(n)),s[e]=t}}function Lt(e,t,s=!1){const n=Ue||yt;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return s&&ue(t)?t.call(n.proxy):t}}const zr={};function Ts(e,t,s){return Xl(e,t,s)}function Xl(e,t,{immediate:s,deep:n,flush:i,onTrack:o,onTrigger:r}=Se){const a=Ue;let l,h=!1,u=!1;if(We(e)?(l=()=>e.value,h=_o(e)):Ws(e)?(l=()=>e,n=!0):te(e)?(u=!0,h=e.some(w=>Ws(w)||_o(w)),l=()=>e.map(w=>{if(We(w))return w.value;if(Ws(w))return vs(w);if(ue(w))return is(w,a,2)})):ue(e)?t?l=()=>is(e,a,2):l=()=>{if(!(a&&a.isUnmounted))return c&&c(),Tt(e,a,3,[p])}:l=_t,t&&n){const w=l;l=()=>vs(w())}let c,p=w=>{c=I.onStop=()=>{is(w,a,4)}};if(Bn)return p=_t,t?s&&Tt(t,a,3,[l(),u?[]:void 0,p]):l(),_t;let b=u?[]:zr;const x=()=>{if(!!I.active)if(t){const w=I.run();(n||h||(u?w.some((H,Y)=>$n(H,b[Y])):$n(w,b)))&&(c&&c(),Tt(t,a,3,[w,b===zr?void 0:b,p]),b=w)}else I.run()};x.allowRecurse=!!t;let L;i==="sync"?L=x:i==="post"?L=()=>tt(x,a&&a.suspense):L=()=>Bh(x);const I=new Ko(l,L);return t?s?x():b=I.run():i==="post"?tt(I.run.bind(I),a&&a.suspense):I.run(),()=>{I.stop(),a&&a.scope&&Wo(a.scope.effects,I)}}function Yh(e,t,s){const n=this.proxy,i=Ve(e)?e.includes(".")?Jl(n,e):()=>n[e]:e.bind(n,n);let o;ue(t)?o=t:(o=t.handler,s=t);const r=Ue;Ks(this);const a=Xl(i,o.bind(n),s);return r?Ks(r):ws(),a}function Jl(e,t){const s=t.split(".");return()=>{let n=e;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}function vs(e,t){if(!$e(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),We(e))vs(e.value,t);else if(te(e))for(let s=0;s<e.length;s++)vs(e[s],t);else if(rn(e)||Gs(e))e.forEach(s=>{vs(s,t)});else if(xl(e))for(const s in e)vs(e[s],t);return e}function De(e){return ue(e)?{setup:e,name:e.name}:e}const hi=e=>!!e.type.__asyncLoader,Zl=e=>e.type.__isKeepAlive;function qh(e,t){ec(e,"a",t)}function Kh(e,t){ec(e,"da",t)}function ec(e,t,s=Ue){const n=e.__wdc||(e.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Vi(t,n,s),s){let i=s.parent;for(;i&&i.parent;)Zl(i.parent.vnode)&&Qh(n,t,s,i),i=i.parent}}function Qh(e,t,s,n){const i=Vi(t,e,n,!0);nr(()=>{Wo(n[t],i)},s)}function Vi(e,t,s=Ue,n=!1){if(s){const i=s[e]||(s[e]=[]),o=t.__weh||(t.__weh=(...r)=>{if(s.isUnmounted)return;ln(),Ks(s);const a=Tt(t,s,e,r);return ws(),cn(),a});return n?i.unshift(o):i.push(o),o}}const zt=e=>(t,s=Ue)=>(!Bn||e==="sp")&&Vi(e,t,s),Xh=zt("bm"),sr=zt("m"),Jh=zt("bu"),Zh=zt("u"),ed=zt("bum"),nr=zt("um"),td=zt("sp"),sd=zt("rtg"),nd=zt("rtc");function id(e,t=Ue){Vi("ec",e,t)}function Me(e,t){const s=yt;if(s===null)return e;const n=ji(s)||s.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[r,a,l,h=Se]=t[o];ue(r)&&(r={mounted:r,updated:r}),r.deep&&vs(a),i.push({dir:r,instance:n,value:a,oldValue:void 0,arg:l,modifiers:h})}return e}function us(e,t,s,n){const i=e.dirs,o=t&&t.dirs;for(let r=0;r<i.length;r++){const a=i[r];o&&(a.oldValue=o[r].value);let l=a.dir[n];l&&(ln(),Tt(l,s,8,[e.el,a,e,t]),cn())}}const tc="components";function Rt(e,t){return rd(tc,e,!0,t)||e}const od=Symbol();function rd(e,t,s=!0,n=!1){const i=yt||Ue;if(i){const o=i.type;if(e===tc){const a=Rd(o,!1);if(a&&(a===t||a===Nt(t)||a===Ni(Nt(t))))return o}const r=Gr(i[e]||o[e],t)||Gr(i.appContext[e],t);return!r&&n?o:r}}function Gr(e,t){return e&&(e[t]||e[Nt(t)]||e[Ni(Nt(t))])}function gt(e,t,s,n){let i;const o=s&&s[n];if(te(e)||Ve(e)){i=new Array(e.length);for(let r=0,a=e.length;r<a;r++)i[r]=t(e[r],r,void 0,o&&o[r])}else if(typeof e=="number"){i=new Array(e);for(let r=0;r<e;r++)i[r]=t(r+1,r,void 0,o&&o[r])}else if($e(e))if(e[Symbol.iterator])i=Array.from(e,(r,a)=>t(r,a,void 0,o&&o[a]));else{const r=Object.keys(e);i=new Array(r.length);for(let a=0,l=r.length;a<l;a++){const h=r[a];i[a]=t(e[h],h,a,o&&o[a])}}else i=[];return s&&(s[n]=i),i}const Eo=e=>e?pc(e)?ji(e)||e.proxy:Eo(e.parent):null,_i=et(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Eo(e.parent),$root:e=>Eo(e.root),$emit:e=>e.emit,$options:e=>nc(e),$forceUpdate:e=>e.f||(e.f=()=>Gl(e.update)),$nextTick:e=>e.n||(e.n=zl.bind(e.proxy)),$watch:e=>Yh.bind(e)}),ad={get({_:e},t){const{ctx:s,setupState:n,data:i,props:o,accessCache:r,type:a,appContext:l}=e;let h;if(t[0]!=="$"){const b=r[t];if(b!==void 0)switch(b){case 1:return n[t];case 2:return i[t];case 4:return s[t];case 3:return o[t]}else{if(n!==Se&&me(n,t))return r[t]=1,n[t];if(i!==Se&&me(i,t))return r[t]=2,i[t];if((h=e.propsOptions[0])&&me(h,t))return r[t]=3,o[t];if(s!==Se&&me(s,t))return r[t]=4,s[t];Co&&(r[t]=0)}}const u=_i[t];let c,p;if(u)return t==="$attrs"&&lt(e,"get",t),u(e);if((c=a.__cssModules)&&(c=c[t]))return c;if(s!==Se&&me(s,t))return r[t]=4,s[t];if(p=l.config.globalProperties,me(p,t))return p[t]},set({_:e},t,s){const{data:n,setupState:i,ctx:o}=e;return i!==Se&&me(i,t)?(i[t]=s,!0):n!==Se&&me(n,t)?(n[t]=s,!0):me(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:i,propsOptions:o}},r){let a;return!!s[r]||e!==Se&&me(e,r)||t!==Se&&me(t,r)||(a=o[0])&&me(a,r)||me(n,r)||me(_i,r)||me(i.config.globalProperties,r)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:me(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};let Co=!0;function ld(e){const t=nc(e),s=e.proxy,n=e.ctx;Co=!1,t.beforeCreate&&Wr(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:r,watch:a,provide:l,inject:h,created:u,beforeMount:c,mounted:p,beforeUpdate:b,updated:x,activated:L,deactivated:I,beforeDestroy:w,beforeUnmount:H,destroyed:Y,unmounted:R,render:X,renderTracked:J,renderTriggered:ne,errorCaptured:se,serverPrefetch:Q,expose:we,inheritAttrs:Te,components:Ae,directives:Oe,filters:Ye}=t;if(h&&cd(h,n,null,e.appContext.config.unwrapInjectedRef),r)for(const le in r){const pe=r[le];ue(pe)&&(n[le]=pe.bind(s))}if(i){const le=i.call(s,s);$e(le)&&(e.data=un(le))}if(Co=!0,o)for(const le in o){const pe=o[le],ke=ue(pe)?pe.bind(s,s):ue(pe.get)?pe.get.bind(s,s):_t,it=!ue(pe)&&ue(pe.set)?pe.set.bind(s):_t,Le=Ie({get:ke,set:it});Object.defineProperty(n,le,{enumerable:!0,configurable:!0,get:()=>Le.value,set:Be=>Le.value=Be})}if(a)for(const le in a)sc(a[le],n,s,le);if(l){const le=ue(l)?l.call(s):l;Reflect.ownKeys(le).forEach(pe=>{ui(pe,le[pe])})}u&&Wr(u,e,"c");function de(le,pe){te(pe)?pe.forEach(ke=>le(ke.bind(s))):pe&&le(pe.bind(s))}if(de(Xh,c),de(sr,p),de(Jh,b),de(Zh,x),de(qh,L),de(Kh,I),de(id,se),de(nd,J),de(sd,ne),de(ed,H),de(nr,R),de(td,Q),te(we))if(we.length){const le=e.exposed||(e.exposed={});we.forEach(pe=>{Object.defineProperty(le,pe,{get:()=>s[pe],set:ke=>s[pe]=ke})})}else e.exposed||(e.exposed={});X&&e.render===_t&&(e.render=X),Te!=null&&(e.inheritAttrs=Te),Ae&&(e.components=Ae),Oe&&(e.directives=Oe)}function cd(e,t,s=_t,n=!1){te(e)&&(e=xo(e));for(const i in e){const o=e[i];let r;$e(o)?"default"in o?r=Lt(o.from||i,o.default,!0):r=Lt(o.from||i):r=Lt(o),We(r)&&n?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):t[i]=r}}function Wr(e,t,s){Tt(te(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function sc(e,t,s,n){const i=n.includes(".")?Jl(s,n):()=>s[n];if(Ve(e)){const o=t[e];ue(o)&&Ts(i,o)}else if(ue(e))Ts(i,e.bind(s));else if($e(e))if(te(e))e.forEach(o=>sc(o,t,s,n));else{const o=ue(e.handler)?e.handler.bind(s):t[e.handler];ue(o)&&Ts(i,o,e)}}function nc(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:r}}=e.appContext,a=o.get(t);let l;return a?l=a:!i.length&&!s&&!n?l=t:(l={},i.length&&i.forEach(h=>Ti(l,h,r,!0)),Ti(l,t,r)),o.set(t,l),l}function Ti(e,t,s,n=!1){const{mixins:i,extends:o}=t;o&&Ti(e,o,s,!0),i&&i.forEach(r=>Ti(e,r,s,!0));for(const r in t)if(!(n&&r==="expose")){const a=ud[r]||s&&s[r];e[r]=a?a(e[r],t[r]):t[r]}return e}const ud={data:Yr,props:ps,emits:ps,methods:ps,computed:ps,beforeCreate:Xe,created:Xe,beforeMount:Xe,mounted:Xe,beforeUpdate:Xe,updated:Xe,beforeDestroy:Xe,beforeUnmount:Xe,destroyed:Xe,unmounted:Xe,activated:Xe,deactivated:Xe,errorCaptured:Xe,serverPrefetch:Xe,components:ps,directives:ps,watch:dd,provide:Yr,inject:hd};function Yr(e,t){return t?e?function(){return et(ue(e)?e.call(this,this):e,ue(t)?t.call(this,this):t)}:t:e}function hd(e,t){return ps(xo(e),xo(t))}function xo(e){if(te(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function Xe(e,t){return e?[...new Set([].concat(e,t))]:t}function ps(e,t){return e?et(et(Object.create(null),e),t):t}function dd(e,t){if(!e)return t;if(!t)return e;const s=et(Object.create(null),e);for(const n in t)s[n]=Xe(e[n],t[n]);return s}function fd(e,t,s,n=!1){const i={},o={};gi(o,Fi,1),e.propsDefaults=Object.create(null),ic(e,t,i,o);for(const r in e.propsOptions[0])r in i||(i[r]=void 0);s?e.props=n?i:Ih(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function pd(e,t,s,n){const{props:i,attrs:o,vnode:{patchFlag:r}}=e,a=_e(i),[l]=e.propsOptions;let h=!1;if((n||r>0)&&!(r&16)){if(r&8){const u=e.vnode.dynamicProps;for(let c=0;c<u.length;c++){let p=u[c];if(Bi(e.emitsOptions,p))continue;const b=t[p];if(l)if(me(o,p))b!==o[p]&&(o[p]=b,h=!0);else{const x=Nt(p);i[x]=So(l,a,x,b,e,!1)}else b!==o[p]&&(o[p]=b,h=!0)}}}else{ic(e,t,i,o)&&(h=!0);let u;for(const c in a)(!t||!me(t,c)&&((u=an(c))===c||!me(t,u)))&&(l?s&&(s[c]!==void 0||s[u]!==void 0)&&(i[c]=So(l,a,c,void 0,e,!0)):delete i[c]);if(o!==a)for(const c in o)(!t||!me(t,c)&&!0)&&(delete o[c],h=!0)}h&&jt(e,"set","$attrs")}function ic(e,t,s,n){const[i,o]=e.propsOptions;let r=!1,a;if(t)for(let l in t){if(li(l))continue;const h=t[l];let u;i&&me(i,u=Nt(l))?!o||!o.includes(u)?s[u]=h:(a||(a={}))[u]=h:Bi(e.emitsOptions,l)||(!(l in n)||h!==n[l])&&(n[l]=h,r=!0)}if(o){const l=_e(s),h=a||Se;for(let u=0;u<o.length;u++){const c=o[u];s[c]=So(i,l,c,h[c],e,!me(h,c))}}return r}function So(e,t,s,n,i,o){const r=e[s];if(r!=null){const a=me(r,"default");if(a&&n===void 0){const l=r.default;if(r.type!==Function&&ue(l)){const{propsDefaults:h}=i;s in h?n=h[s]:(Ks(i),n=h[s]=l.call(null,t),ws())}else n=l}r[0]&&(o&&!a?n=!1:r[1]&&(n===""||n===an(s))&&(n=!0))}return n}function oc(e,t,s=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const o=e.props,r={},a=[];let l=!1;if(!ue(e)){const u=c=>{l=!0;const[p,b]=oc(c,t,!0);et(r,p),b&&a.push(...b)};!s&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!o&&!l)return n.set(e,zs),zs;if(te(o))for(let u=0;u<o.length;u++){const c=Nt(o[u]);qr(c)&&(r[c]=Se)}else if(o)for(const u in o){const c=Nt(u);if(qr(c)){const p=o[u],b=r[c]=te(p)||ue(p)?{type:p}:p;if(b){const x=Xr(Boolean,b.type),L=Xr(String,b.type);b[0]=x>-1,b[1]=L<0||x<L,(x>-1||me(b,"default"))&&a.push(c)}}}const h=[r,a];return n.set(e,h),h}function qr(e){return e[0]!=="$"}function Kr(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function Qr(e,t){return Kr(e)===Kr(t)}function Xr(e,t){return te(t)?t.findIndex(s=>Qr(s,e)):ue(t)&&Qr(t,e)?0:-1}const rc=e=>e[0]==="_"||e==="$stable",ir=e=>te(e)?e.map(Ot):[Ot(e)],md=(e,t,s)=>{if(t._n)return t;const n=rt((...i)=>ir(t(...i)),s);return n._c=!1,n},ac=(e,t,s)=>{const n=e._ctx;for(const i in e){if(rc(i))continue;const o=e[i];if(ue(o))t[i]=md(i,o,n);else if(o!=null){const r=ir(o);t[i]=()=>r}}},lc=(e,t)=>{const s=ir(t);e.slots.default=()=>s},gd=(e,t)=>{if(e.vnode.shapeFlag&32){const s=t._;s?(e.slots=_e(t),gi(t,"_",s)):ac(t,e.slots={})}else e.slots={},t&&lc(e,t);gi(e.slots,Fi,1)},bd=(e,t,s)=>{const{vnode:n,slots:i}=e;let o=!0,r=Se;if(n.shapeFlag&32){const a=t._;a?s&&a===1?o=!1:(et(i,t),!s&&a===1&&delete i._):(o=!t.$stable,ac(t,i)),r=t}else t&&(lc(e,t),r={default:1});if(o)for(const a in i)!rc(a)&&!(a in r)&&delete i[a]};function cc(){return{app:null,config:{isNativeTag:Ku,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let yd=0;function vd(e,t){return function(n,i=null){ue(n)||(n=Object.assign({},n)),i!=null&&!$e(i)&&(i=null);const o=cc(),r=new Set;let a=!1;const l=o.app={_uid:yd++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:Dd,get config(){return o.config},set config(h){},use(h,...u){return r.has(h)||(h&&ue(h.install)?(r.add(h),h.install(l,...u)):ue(h)&&(r.add(h),h(l,...u))),l},mixin(h){return o.mixins.includes(h)||o.mixins.push(h),l},component(h,u){return u?(o.components[h]=u,l):o.components[h]},directive(h,u){return u?(o.directives[h]=u,l):o.directives[h]},mount(h,u,c){if(!a){const p=re(n,i);return p.appContext=o,u&&t?t(p,h):e(p,h,c),a=!0,l._container=h,h.__vue_app__=l,ji(p.component)||p.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(h,u){return o.provides[h]=u,l}};return l}}function ko(e,t,s,n,i=!1){if(te(e)){e.forEach((p,b)=>ko(p,t&&(te(t)?t[b]:t),s,n,i));return}if(hi(n)&&!i)return;const o=n.shapeFlag&4?ji(n.component)||n.component.proxy:n.el,r=i?null:o,{i:a,r:l}=e,h=t&&t.r,u=a.refs===Se?a.refs={}:a.refs,c=a.setupState;if(h!=null&&h!==l&&(Ve(h)?(u[h]=null,me(c,h)&&(c[h]=null)):We(h)&&(h.value=null)),ue(l))is(l,a,12,[r,u]);else{const p=Ve(l),b=We(l);if(p||b){const x=()=>{if(e.f){const L=p?u[l]:l.value;i?te(L)&&Wo(L,o):te(L)?L.includes(o)||L.push(o):p?(u[l]=[o],me(c,l)&&(c[l]=u[l])):(l.value=[o],e.k&&(u[e.k]=l.value))}else p?(u[l]=r,me(c,l)&&(c[l]=r)):b&&(l.value=r,e.k&&(u[e.k]=r))};r?(x.id=-1,tt(x,s)):x()}}}const tt=Wh;function _d(e){return Td(e)}function Td(e,t){const s=th();s.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:r,createText:a,createComment:l,setText:h,setElementText:u,parentNode:c,nextSibling:p,setScopeId:b=_t,cloneNode:x,insertStaticContent:L}=e,I=(f,g,v,k=null,S=null,N=null,B=!1,$=null,M=!!g.dynamicChildren)=>{if(f===g)return;f&&!gn(f,g)&&(k=U(f),Ne(f,S,N,!0),f=null),g.patchFlag===-2&&(M=!1,g.dynamicChildren=null);const{type:P,ref:K,shapeFlag:z}=g;switch(P){case or:w(f,g,v,k);break;case xs:H(f,g,v,k);break;case di:f==null&&Y(g,v,k,B);break;case ce:Oe(f,g,v,k,S,N,B,$,M);break;default:z&1?J(f,g,v,k,S,N,B,$,M):z&6?Ye(f,g,v,k,S,N,B,$,M):(z&64||z&128)&&P.process(f,g,v,k,S,N,B,$,M,ye)}K!=null&&S&&ko(K,f&&f.ref,N,g||f,!g)},w=(f,g,v,k)=>{if(f==null)n(g.el=a(g.children),v,k);else{const S=g.el=f.el;g.children!==f.children&&h(S,g.children)}},H=(f,g,v,k)=>{f==null?n(g.el=l(g.children||""),v,k):g.el=f.el},Y=(f,g,v,k)=>{[f.el,f.anchor]=L(f.children,g,v,k,f.el,f.anchor)},R=({el:f,anchor:g},v,k)=>{let S;for(;f&&f!==g;)S=p(f),n(f,v,k),f=S;n(g,v,k)},X=({el:f,anchor:g})=>{let v;for(;f&&f!==g;)v=p(f),i(f),f=v;i(g)},J=(f,g,v,k,S,N,B,$,M)=>{B=B||g.type==="svg",f==null?ne(g,v,k,S,N,B,$,M):we(f,g,S,N,B,$,M)},ne=(f,g,v,k,S,N,B,$)=>{let M,P;const{type:K,props:z,shapeFlag:q,transition:Z,patchFlag:he,dirs:be}=f;if(f.el&&x!==void 0&&he===-1)M=f.el=x(f.el);else{if(M=f.el=r(f.type,N,z&&z.is,z),q&8?u(M,f.children):q&16&&Q(f.children,M,null,k,S,N&&K!=="foreignObject",B,$),be&&us(f,null,k,"created"),z){for(const Ee in z)Ee!=="value"&&!li(Ee)&&o(M,Ee,null,z[Ee],N,f.children,k,S,D);"value"in z&&o(M,"value",null,z.value),(P=z.onVnodeBeforeMount)&&It(P,k,f)}se(M,f,f.scopeId,B,k)}be&&us(f,null,k,"beforeMount");const ve=(!S||S&&!S.pendingBranch)&&Z&&!Z.persisted;ve&&Z.beforeEnter(M),n(M,g,v),((P=z&&z.onVnodeMounted)||ve||be)&&tt(()=>{P&&It(P,k,f),ve&&Z.enter(M),be&&us(f,null,k,"mounted")},S)},se=(f,g,v,k,S)=>{if(v&&b(f,v),k)for(let N=0;N<k.length;N++)b(f,k[N]);if(S){let N=S.subTree;if(g===N){const B=S.vnode;se(f,B,B.scopeId,B.slotScopeIds,S.parent)}}},Q=(f,g,v,k,S,N,B,$,M=0)=>{for(let P=M;P<f.length;P++){const K=f[P]=$?es(f[P]):Ot(f[P]);I(null,K,g,v,k,S,N,B,$)}},we=(f,g,v,k,S,N,B)=>{const $=g.el=f.el;let{patchFlag:M,dynamicChildren:P,dirs:K}=g;M|=f.patchFlag&16;const z=f.props||Se,q=g.props||Se;let Z;v&&hs(v,!1),(Z=q.onVnodeBeforeUpdate)&&It(Z,v,g,f),K&&us(g,f,v,"beforeUpdate"),v&&hs(v,!0);const he=S&&g.type!=="foreignObject";if(P?Te(f.dynamicChildren,P,$,v,k,he,N):B||ke(f,g,$,null,v,k,he,N,!1),M>0){if(M&16)Ae($,g,z,q,v,k,S);else if(M&2&&z.class!==q.class&&o($,"class",null,q.class,S),M&4&&o($,"style",z.style,q.style,S),M&8){const be=g.dynamicProps;for(let ve=0;ve<be.length;ve++){const Ee=be[ve],ot=z[Ee],Gt=q[Ee];(Gt!==ot||Ee==="value")&&o($,Ee,ot,Gt,S,f.children,v,k,D)}}M&1&&f.children!==g.children&&u($,g.children)}else!B&&P==null&&Ae($,g,z,q,v,k,S);((Z=q.onVnodeUpdated)||K)&&tt(()=>{Z&&It(Z,v,g,f),K&&us(g,f,v,"updated")},k)},Te=(f,g,v,k,S,N,B)=>{for(let $=0;$<g.length;$++){const M=f[$],P=g[$],K=M.el&&(M.type===ce||!gn(M,P)||M.shapeFlag&70)?c(M.el):v;I(M,P,K,null,k,S,N,B,!0)}},Ae=(f,g,v,k,S,N,B)=>{if(v!==k){for(const $ in k){if(li($))continue;const M=k[$],P=v[$];M!==P&&$!=="value"&&o(f,$,P,M,B,g.children,S,N,D)}if(v!==Se)for(const $ in v)!li($)&&!($ in k)&&o(f,$,v[$],null,B,g.children,S,N,D);"value"in k&&o(f,"value",v.value,k.value)}},Oe=(f,g,v,k,S,N,B,$,M)=>{const P=g.el=f?f.el:a(""),K=g.anchor=f?f.anchor:a("");let{patchFlag:z,dynamicChildren:q,slotScopeIds:Z}=g;Z&&($=$?$.concat(Z):Z),f==null?(n(P,v,k),n(K,v,k),Q(g.children,v,K,S,N,B,$,M)):z>0&&z&64&&q&&f.dynamicChildren?(Te(f.dynamicChildren,q,v,S,N,B,$),(g.key!=null||S&&g===S.subTree)&&uc(f,g,!0)):ke(f,g,v,K,S,N,B,$,M)},Ye=(f,g,v,k,S,N,B,$,M)=>{g.slotScopeIds=$,f==null?g.shapeFlag&512?S.ctx.activate(g,v,k,B,M):qe(g,v,k,S,N,B,M):de(f,g,M)},qe=(f,g,v,k,S,N,B)=>{const $=f.component=Pd(f,k,S);if(Zl(f)&&($.ctx.renderer=ye),Od($),$.asyncDep){if(S&&S.registerDep($,le),!f.el){const M=$.subTree=re(xs);H(null,M,g,v)}return}le($,f,g,v,S,N,B)},de=(f,g,v)=>{const k=g.component=f.component;if(Uh(f,g,v))if(k.asyncDep&&!k.asyncResolved){pe(k,g,v);return}else k.next=g,Dh(k.update),k.update();else g.el=f.el,k.vnode=g},le=(f,g,v,k,S,N,B)=>{const $=()=>{if(f.isMounted){let{next:K,bu:z,u:q,parent:Z,vnode:he}=f,be=K,ve;hs(f,!1),K?(K.el=he.el,pe(f,K,B)):K=he,z&&ci(z),(ve=K.props&&K.props.onVnodeBeforeUpdate)&&It(ve,Z,K,he),hs(f,!0);const Ee=no(f),ot=f.subTree;f.subTree=Ee,I(ot,Ee,c(ot.el),U(ot),f,S,N),K.el=Ee.el,be===null&&zh(f,Ee.el),q&&tt(q,S),(ve=K.props&&K.props.onVnodeUpdated)&&tt(()=>It(ve,Z,K,he),S)}else{let K;const{el:z,props:q}=g,{bm:Z,m:he,parent:be}=f,ve=hi(g);if(hs(f,!1),Z&&ci(Z),!ve&&(K=q&&q.onVnodeBeforeMount)&&It(K,be,g),hs(f,!0),z&&oe){const Ee=()=>{f.subTree=no(f),oe(z,f.subTree,f,S,null)};ve?g.type.__asyncLoader().then(()=>!f.isUnmounted&&Ee()):Ee()}else{const Ee=f.subTree=no(f);I(null,Ee,v,k,f,S,N),g.el=Ee.el}if(he&&tt(he,S),!ve&&(K=q&&q.onVnodeMounted)){const Ee=g;tt(()=>It(K,be,Ee),S)}(g.shapeFlag&256||be&&hi(be.vnode)&&be.vnode.shapeFlag&256)&&f.a&&tt(f.a,S),f.isMounted=!0,g=v=k=null}},M=f.effect=new Ko($,()=>Gl(P),f.scope),P=f.update=()=>M.run();P.id=f.uid,hs(f,!0),P()},pe=(f,g,v)=>{g.component=f;const k=f.vnode.props;f.vnode=g,f.next=null,pd(f,g.props,k,v),bd(f,g.children,v),ln(),Di(void 0,f.update),cn()},ke=(f,g,v,k,S,N,B,$,M=!1)=>{const P=f&&f.children,K=f?f.shapeFlag:0,z=g.children,{patchFlag:q,shapeFlag:Z}=g;if(q>0){if(q&128){Le(P,z,v,k,S,N,B,$,M);return}else if(q&256){it(P,z,v,k,S,N,B,$,M);return}}Z&8?(K&16&&D(P,S,N),z!==P&&u(v,z)):K&16?Z&16?Le(P,z,v,k,S,N,B,$,M):D(P,S,N,!0):(K&8&&u(v,""),Z&16&&Q(z,v,k,S,N,B,$,M))},it=(f,g,v,k,S,N,B,$,M)=>{f=f||zs,g=g||zs;const P=f.length,K=g.length,z=Math.min(P,K);let q;for(q=0;q<z;q++){const Z=g[q]=M?es(g[q]):Ot(g[q]);I(f[q],Z,v,null,S,N,B,$,M)}P>K?D(f,S,N,!0,!1,z):Q(g,v,k,S,N,B,$,M,z)},Le=(f,g,v,k,S,N,B,$,M)=>{let P=0;const K=g.length;let z=f.length-1,q=K-1;for(;P<=z&&P<=q;){const Z=f[P],he=g[P]=M?es(g[P]):Ot(g[P]);if(gn(Z,he))I(Z,he,v,null,S,N,B,$,M);else break;P++}for(;P<=z&&P<=q;){const Z=f[z],he=g[q]=M?es(g[q]):Ot(g[q]);if(gn(Z,he))I(Z,he,v,null,S,N,B,$,M);else break;z--,q--}if(P>z){if(P<=q){const Z=q+1,he=Z<K?g[Z].el:k;for(;P<=q;)I(null,g[P]=M?es(g[P]):Ot(g[P]),v,he,S,N,B,$,M),P++}}else if(P>q)for(;P<=z;)Ne(f[P],S,N,!0),P++;else{const Z=P,he=P,be=new Map;for(P=he;P<=q;P++){const Qe=g[P]=M?es(g[P]):Ot(g[P]);Qe.key!=null&&be.set(Qe.key,P)}let ve,Ee=0;const ot=q-he+1;let Gt=!1,Wn=0;const cs=new Array(ot);for(P=0;P<ot;P++)cs[P]=0;for(P=Z;P<=z;P++){const Qe=f[P];if(Ee>=ot){Ne(Qe,S,N,!0);continue}let Ge;if(Qe.key!=null)Ge=be.get(Qe.key);else for(ve=he;ve<=q;ve++)if(cs[ve-he]===0&&gn(Qe,g[ve])){Ge=ve;break}Ge===void 0?Ne(Qe,S,N,!0):(cs[Ge-he]=P+1,Ge>=Wn?Wn=Ge:Gt=!0,I(Qe,g[Ge],v,null,S,N,B,$,M),Ee++)}const Yn=Gt?wd(cs):zs;for(ve=Yn.length-1,P=ot-1;P>=0;P--){const Qe=he+P,Ge=g[Qe],qn=Qe+1<K?g[Qe+1].el:k;cs[P]===0?I(null,Ge,v,qn,S,N,B,$,M):Gt&&(ve<0||P!==Yn[ve]?Be(Ge,v,qn,2):ve--)}}},Be=(f,g,v,k,S=null)=>{const{el:N,type:B,transition:$,children:M,shapeFlag:P}=f;if(P&6){Be(f.component.subTree,g,v,k);return}if(P&128){f.suspense.move(g,v,k);return}if(P&64){B.move(f,g,v,ye);return}if(B===ce){n(N,g,v);for(let z=0;z<M.length;z++)Be(M[z],g,v,k);n(f.anchor,g,v);return}if(B===di){R(f,g,v);return}if(k!==2&&P&1&&$)if(k===0)$.beforeEnter(N),n(N,g,v),tt(()=>$.enter(N),S);else{const{leave:z,delayLeave:q,afterLeave:Z}=$,he=()=>n(N,g,v),be=()=>{z(N,()=>{he(),Z&&Z()})};q?q(N,he,be):be()}else n(N,g,v)},Ne=(f,g,v,k=!1,S=!1)=>{const{type:N,props:B,ref:$,children:M,dynamicChildren:P,shapeFlag:K,patchFlag:z,dirs:q}=f;if($!=null&&ko($,null,v,f,!0),K&256){g.ctx.deactivate(f);return}const Z=K&1&&q,he=!hi(f);let be;if(he&&(be=B&&B.onVnodeBeforeUnmount)&&It(be,g,f),K&6)V(f.component,v,k);else{if(K&128){f.suspense.unmount(v,k);return}Z&&us(f,null,g,"beforeUnmount"),K&64?f.type.remove(f,g,v,S,ye,k):P&&(N!==ce||z>0&&z&64)?D(P,g,v,!1,!0):(N===ce&&z&384||!S&&K&16)&&D(M,g,v),k&&Ke(f)}(he&&(be=B&&B.onVnodeUnmounted)||Z)&&tt(()=>{be&&It(be,g,f),Z&&us(f,null,g,"unmounted")},v)},Ke=f=>{const{type:g,el:v,anchor:k,transition:S}=f;if(g===ce){E(v,k);return}if(g===di){X(f);return}const N=()=>{i(v),S&&!S.persisted&&S.afterLeave&&S.afterLeave()};if(f.shapeFlag&1&&S&&!S.persisted){const{leave:B,delayLeave:$}=S,M=()=>B(v,N);$?$(f.el,N,M):M()}else N()},E=(f,g)=>{let v;for(;f!==g;)v=p(f),i(f),f=v;i(g)},V=(f,g,v)=>{const{bum:k,scope:S,update:N,subTree:B,um:$}=f;k&&ci(k),S.stop(),N&&(N.active=!1,Ne(B,f,g,v)),$&&tt($,g),tt(()=>{f.isUnmounted=!0},g),g&&g.pendingBranch&&!g.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===g.pendingId&&(g.deps--,g.deps===0&&g.resolve())},D=(f,g,v,k=!1,S=!1,N=0)=>{for(let B=N;B<f.length;B++)Ne(f[B],g,v,k,S)},U=f=>f.shapeFlag&6?U(f.component.subTree):f.shapeFlag&128?f.suspense.next():p(f.anchor||f.el),ge=(f,g,v)=>{f==null?g._vnode&&Ne(g._vnode,null,null,!0):I(g._vnode||null,f,g,null,null,null,v),ql(),g._vnode=f},ye={p:I,um:Ne,m:Be,r:Ke,mt:qe,mc:Q,pc:ke,pbc:Te,n:U,o:e};let ae,oe;return t&&([ae,oe]=t(ye)),{render:ge,hydrate:ae,createApp:vd(ge,ae)}}function hs({effect:e,update:t},s){e.allowRecurse=t.allowRecurse=s}function uc(e,t,s=!1){const n=e.children,i=t.children;if(te(n)&&te(i))for(let o=0;o<n.length;o++){const r=n[o];let a=i[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[o]=es(i[o]),a.el=r.el),s||uc(r,a))}}function wd(e){const t=e.slice(),s=[0];let n,i,o,r,a;const l=e.length;for(n=0;n<l;n++){const h=e[n];if(h!==0){if(i=s[s.length-1],e[i]<h){t[n]=i,s.push(n);continue}for(o=0,r=s.length-1;o<r;)a=o+r>>1,e[s[a]]<h?o=a+1:r=a;h<e[s[o]]&&(o>0&&(t[n]=s[o-1]),s[o]=n)}}for(o=s.length,r=s[o-1];o-- >0;)s[o]=r,r=t[r];return s}const Ed=e=>e.__isTeleport,ce=Symbol(void 0),or=Symbol(void 0),xs=Symbol(void 0),di=Symbol(void 0),xn=[];let vt=null;function _(e=!1){xn.push(vt=e?null:[])}function Cd(){xn.pop(),vt=xn[xn.length-1]||null}let Dn=1;function Jr(e){Dn+=e}function hc(e){return e.dynamicChildren=Dn>0?vt||zs:null,Cd(),Dn>0&&vt&&vt.push(e),e}function T(e,t,s,n,i,o){return hc(m(e,t,s,n,i,o,!0))}function dc(e,t,s,n,i){return hc(re(e,t,s,n,i,!0))}function Ao(e){return e?e.__v_isVNode===!0:!1}function gn(e,t){return e.type===t.type&&e.key===t.key}const Fi="__vInternal",fc=({key:e})=>e!=null?e:null,fi=({ref:e,ref_key:t,ref_for:s})=>e!=null?Ve(e)||We(e)||ue(e)?{i:yt,r:e,k:t,f:!!s}:e:null;function m(e,t=null,s=null,n=0,i=null,o=e===ce?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&fc(t),ref:t&&fi(t),scopeId:Hi,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null};return a?(ar(l,s),o&128&&e.normalize(l)):s&&(l.shapeFlag|=Ve(s)?8:16),Dn>0&&!r&&vt&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&vt.push(l),l}const re=xd;function xd(e,t=null,s=null,n=0,i=null,o=!1){if((!e||e===od)&&(e=xs),Ao(e)){const a=qs(e,t,!0);return s&&ar(a,s),Dn>0&&!o&&vt&&(a.shapeFlag&6?vt[vt.indexOf(e)]=a:vt.push(a)),a.patchFlag|=-2,a}if(Md(e)&&(e=e.__vccOpts),t){t=Sd(t);let{class:a,style:l}=t;a&&!Ve(a)&&(t.class=Pe(a)),$e(l)&&(Dl(l)&&!te(l)&&(l=et({},l)),t.style=Uo(l))}const r=Ve(e)?1:Gh(e)?128:Ed(e)?64:$e(e)?4:ue(e)?2:0;return m(e,t,s,n,i,r,o,!0)}function Sd(e){return e?Dl(e)||Fi in e?et({},e):e:null}function qs(e,t,s=!1){const{props:n,ref:i,patchFlag:o,children:r}=e,a=t?kd(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&fc(a),ref:t&&t.ref?s&&i?te(i)?i.concat(fi(t)):[i,fi(t)]:fi(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:r,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ce?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&qs(e.ssContent),ssFallback:e.ssFallback&&qs(e.ssFallback),el:e.el,anchor:e.anchor}}function ee(e=" ",t=0){return re(or,null,e,t)}function rr(e,t){const s=re(di,null,e);return s.staticCount=t,s}function F(e="",t=!1){return t?(_(),dc(xs,null,e)):re(xs,null,e)}function Ot(e){return e==null||typeof e=="boolean"?re(xs):te(e)?re(ce,null,e.slice()):typeof e=="object"?es(e):re(or,null,String(e))}function es(e){return e.el===null||e.memo?e:qs(e)}function ar(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(te(t))s=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),ar(e,i()),i._c&&(i._d=!0));return}else{s=32;const i=t._;!i&&!(Fi in t)?t._ctx=yt:i===3&&yt&&(yt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ue(t)?(t={default:t,_ctx:yt},s=32):(t=String(t),n&64?(s=16,t=[ee(t)]):s=8);e.children=t,e.shapeFlag|=s}function kd(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=Pe([t.class,n.class]));else if(i==="style")t.style=Uo([t.style,n.style]);else if(Li(i)){const o=t[i],r=n[i];r&&o!==r&&!(te(o)&&o.includes(r))&&(t[i]=o?[].concat(o,r):r)}else i!==""&&(t[i]=n[i])}return t}function It(e,t,s,n=null){Tt(e,t,7,[s,n])}const Ad=cc();let Id=0;function Pd(e,t,s){const n=e.type,i=(t?t.appContext:e.appContext)||Ad,o={uid:Id++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new sh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:oc(n,i),emitsOptions:Ql(n,i),emit:null,emitted:null,propsDefaults:Se,inheritAttrs:n.inheritAttrs,ctx:Se,data:Se,props:Se,attrs:Se,slots:Se,refs:Se,setupState:Se,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Vh.bind(null,o),e.ce&&e.ce(o),o}let Ue=null;const Ks=e=>{Ue=e,e.scope.on()},ws=()=>{Ue&&Ue.scope.off(),Ue=null};function pc(e){return e.vnode.shapeFlag&4}let Bn=!1;function Od(e,t=!1){Bn=t;const{props:s,children:n}=e.vnode,i=pc(e);fd(e,s,i,t),gd(e,n);const o=i?Ld(e,t):void 0;return Bn=!1,o}function Ld(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=Bl(new Proxy(e.ctx,ad));const{setup:n}=s;if(n){const i=e.setupContext=n.length>1?Nd(e):null;Ks(e),ln();const o=is(n,e,0,[e.props,i]);if(cn(),ws(),El(o)){if(o.then(ws,ws),t)return o.then(r=>{Zr(e,r,t)}).catch(r=>{Mi(r,e,0)});e.asyncDep=o}else Zr(e,o,t)}else mc(e,t)}function Zr(e,t,s){ue(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:$e(t)&&(e.setupState=jl(t)),mc(e,s)}let ea;function mc(e,t,s){const n=e.type;if(!e.render){if(!t&&ea&&!n.render){const i=n.template;if(i){const{isCustomElement:o,compilerOptions:r}=e.appContext.config,{delimiters:a,compilerOptions:l}=n,h=et(et({isCustomElement:o,delimiters:a},r),l);n.render=ea(i,h)}}e.render=n.render||_t}Ks(e),ln(),ld(e),cn(),ws()}function $d(e){return new Proxy(e.attrs,{get(t,s){return lt(e,"get","$attrs"),t[s]}})}function Nd(e){const t=n=>{e.exposed=n||{}};let s;return{get attrs(){return s||(s=$d(e))},slots:e.slots,emit:e.emit,expose:t}}function ji(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(jl(Bl(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in _i)return _i[s](e)}}))}function Rd(e,t=!0){return ue(e)?e.displayName||e.name:e.name||t&&e.__name}function Md(e){return ue(e)&&"__vccOpts"in e}const Ie=(e,t)=>Nh(e,t,Bn);function gc(e,t,s){const n=arguments.length;return n===2?$e(t)&&!te(t)?Ao(t)?re(e,null,[t]):re(e,t):re(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Ao(s)&&(s=[s]),re(e,t,s))}const Dd="3.2.37",Bd="http://www.w3.org/2000/svg",gs=typeof document<"u"?document:null,ta=gs&&gs.createElement("template"),Hd={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const i=t?gs.createElementNS(Bd,e):gs.createElement(e,s?{is:s}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>gs.createTextNode(e),createComment:e=>gs.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>gs.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,s,n,i,o){const r=s?s.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),s),!(i===o||!(i=i.nextSibling)););else{ta.innerHTML=n?`<svg>${e}</svg>`:e;const a=ta.content;if(n){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,s)}return[r?r.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}};function Vd(e,t,s){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}function Fd(e,t,s){const n=e.style,i=Ve(s);if(s&&!i){for(const o in s)Io(n,o,s[o]);if(t&&!Ve(t))for(const o in t)s[o]==null&&Io(n,o,"")}else{const o=n.display;i?t!==s&&(n.cssText=s):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=o)}}const sa=/\s*!important$/;function Io(e,t,s){if(te(s))s.forEach(n=>Io(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=jd(e,t);sa.test(s)?e.setProperty(an(n),s.replace(sa,""),"important"):e[n]=s}}const na=["Webkit","Moz","ms"],io={};function jd(e,t){const s=io[t];if(s)return s;let n=Nt(t);if(n!=="filter"&&n in e)return io[t]=n;n=Ni(n);for(let i=0;i<na.length;i++){const o=na[i]+n;if(o in e)return io[t]=o}return t}const ia="http://www.w3.org/1999/xlink";function Ud(e,t,s,n,i){if(n&&t.startsWith("xlink:"))s==null?e.removeAttributeNS(ia,t.slice(6,t.length)):e.setAttributeNS(ia,t,s);else{const o=zu(t);s==null||o&&!Tl(s)?e.removeAttribute(t):e.setAttribute(t,o?"":s)}}function zd(e,t,s,n,i,o,r){if(t==="innerHTML"||t==="textContent"){n&&r(n,i,o),e[t]=s==null?"":s;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=s;const l=s==null?"":s;(e.value!==l||e.tagName==="OPTION")&&(e.value=l),s==null&&e.removeAttribute(t);return}let a=!1;if(s===""||s==null){const l=typeof e[t];l==="boolean"?s=Tl(s):s==null&&l==="string"?(s="",a=!0):l==="number"&&(s=0,a=!0)}try{e[t]=s}catch{}a&&e.removeAttribute(t)}const[bc,Gd]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const s=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(s&&Number(s[1])<=53)}return[e,t]})();let Po=0;const Wd=Promise.resolve(),Yd=()=>{Po=0},qd=()=>Po||(Wd.then(Yd),Po=bc());function ss(e,t,s,n){e.addEventListener(t,s,n)}function Kd(e,t,s,n){e.removeEventListener(t,s,n)}function Qd(e,t,s,n,i=null){const o=e._vei||(e._vei={}),r=o[t];if(n&&r)r.value=n;else{const[a,l]=Xd(t);if(n){const h=o[t]=Jd(n,i);ss(e,a,h,l)}else r&&(Kd(e,a,r,l),o[t]=void 0)}}const oa=/(?:Once|Passive|Capture)$/;function Xd(e){let t;if(oa.test(e)){t={};let s;for(;s=e.match(oa);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[an(e.slice(2)),t]}function Jd(e,t){const s=n=>{const i=n.timeStamp||bc();(Gd||i>=s.attached-1)&&Tt(Zd(n,s.value),t,5,[n])};return s.value=e,s.attached=qd(),s}function Zd(e,t){if(te(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const ra=/^on[a-z]/,ef=(e,t,s,n,i=!1,o,r,a,l)=>{t==="class"?Vd(e,n,i):t==="style"?Fd(e,s,n):Li(t)?Go(t)||Qd(e,t,s,n,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):tf(e,t,n,i))?zd(e,t,n,o,r,a,l):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Ud(e,t,n,i))};function tf(e,t,s,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&ra.test(t)&&ue(s)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||ra.test(t)&&Ve(s)?!1:t in e}const Qs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return te(t)?s=>ci(t,s):t};function sf(e){e.target.composing=!0}function aa(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Hn={created(e,{modifiers:{lazy:t,trim:s,number:n}},i){e._assign=Qs(i);const o=n||i.props&&i.props.type==="number";ss(e,t?"change":"input",r=>{if(r.target.composing)return;let a=e.value;s&&(a=a.trim()),o&&(a=bi(a)),e._assign(a)}),s&&ss(e,"change",()=>{e.value=e.value.trim()}),t||(ss(e,"compositionstart",sf),ss(e,"compositionend",aa),ss(e,"change",aa))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:s,trim:n,number:i}},o){if(e._assign=Qs(o),e.composing||document.activeElement===e&&e.type!=="range"&&(s||n&&e.value.trim()===t||(i||e.type==="number")&&bi(e.value)===t))return;const r=t==null?"":t;e.value!==r&&(e.value=r)}},wt={deep:!0,created(e,t,s){e._assign=Qs(s),ss(e,"change",()=>{const n=e._modelValue,i=Vn(e),o=e.checked,r=e._assign;if(te(n)){const a=zo(n,i),l=a!==-1;if(o&&!l)r(n.concat(i));else if(!o&&l){const h=[...n];h.splice(a,1),r(h)}}else if(rn(n)){const a=new Set(n);o?a.add(i):a.delete(i),r(a)}else r(yc(e,o))})},mounted:la,beforeUpdate(e,t,s){e._assign=Qs(s),la(e,t,s)}};function la(e,{value:t,oldValue:s},n){e._modelValue=t,te(t)?e.checked=zo(t,n.props.value)>-1:rn(t)?e.checked=t.has(n.props.value):t!==s&&(e.checked=jn(t,yc(e,!0)))}const ni={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const i=rn(t);ss(e,"change",()=>{const o=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>s?bi(Vn(r)):Vn(r));e._assign(e.multiple?i?new Set(o):o:o[0])}),e._assign=Qs(n)},mounted(e,{value:t}){ca(e,t)},beforeUpdate(e,t,s){e._assign=Qs(s)},updated(e,{value:t}){ca(e,t)}};function ca(e,t){const s=e.multiple;if(!(s&&!te(t)&&!rn(t))){for(let n=0,i=e.options.length;n<i;n++){const o=e.options[n],r=Vn(o);if(s)te(t)?o.selected=zo(t,r)>-1:o.selected=t.has(r);else if(jn(Vn(o),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Vn(e){return"_value"in e?e._value:e.value}function yc(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const nf=et({patchProp:ef},Hd);let ua;function of(){return ua||(ua=_d(nf))}const rf=(...e)=>{const t=of().createApp(...e),{mount:s}=t;return t.mount=n=>{const i=af(n);if(!i)return;const o=t._component;!ue(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const r=s(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),r},t};function af(e){return Ve(e)?document.querySelector(e):e}const ha="Guest_",Ct={data(){return{token:null}},computed:{authenticated(){let e=this.$store.getters.user;return!!(e&&e.token&&!e.token.startsWith("null")&&!e.token.startsWith("Guest:"))},userName(){var e;return(e=this.$store.getters.user)==null?void 0:e.name},user(){return this.$store.getters.user}},created(){},methods:{getToken(){const e=this.$store.getters.user;return e?e.token:null},logout(){return this.$store.dispatch("logout",this.$store.getters.user)}}},lf=De({name:"NavbarTop",mixins:[Ct],props:{msg:String},data(){return{toggle:!1}},created(){},computed:{loading(){return this.$store.getters.loadingStatus}},methods:{}}),Fe=(e,t)=>{const s=e.__vccOpts||e;for(const[n,i]of t)s[n]=i;return s},cf={class:"navbar navbar-expand-lg navbar-light rounded",style:{"background-color":"#BC8F8F"}},uf={key:0,class:"container-fluid"},hf=m("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[m("span",{class:"navbar-toggler-icon"})],-1),df={id:"navbarSupportedContent",class:"collapse navbar-collapse"},ff={class:"navbar-nav me-auto mb-2 mb-lg-0"},pf={class:"nav-item"},mf=ee("Home"),gf={class:"nav-item"},bf=ee("Games"),yf={key:0,class:"nav-item"},vf=ee("Registration"),_f={class:"nav-item"},Tf=ee(" Terms and conditions "),wf={class:"nav-item"},Ef=m("i",{class:"bi bi-megaphone"},null,-1),Cf=ee(" Top lists "),xf={class:"nav-item"},Sf=ee(" Feedback "),kf={class:"nav-item"},Af=ee(" Game instructions "),If={class:"navbar-nav ms-auto"},Pf={class:"nav-item dropdown"},Of=m("i",{class:"bi bi-person-fill"},null,-1),Lf=ee(" User "),$f=[Of,Lf],Nf={key:0},Rf=ee("Show profile"),Mf={key:1},Df=ee("Logout"),Bf={key:2},Hf=ee(" Login "),Vf={key:1,class:"container-fluid"},Ff=m("div",{class:"spinner-border",role:"status"},[m("span",{class:"sr-only"})],-1),jf=[Ff];function Uf(e,t,s,n,i,o){const r=Rt("router-link");return _(),T("nav",cf,[e.loading?F("",!0):(_(),T("div",uf,[hf,m("div",df,[m("ul",ff,[m("li",pf,[re(r,{class:"nav-link",to:{name:"Home"}},{default:rt(()=>[mf]),_:1})]),m("li",gf,[re(r,{class:"nav-link",to:{name:"Lobby"}},{default:rt(()=>[bf]),_:1})]),e.authenticated?F("",!0):(_(),T("li",yf,[re(r,{class:"nav-link",to:{name:"Registration"}},{default:rt(()=>[vf]),_:1})])),m("li",_f,[re(r,{class:"nav-link",to:{name:"Info"}},{default:rt(()=>[Tf]),_:1})]),m("li",wf,[re(r,{class:"nav-link",to:{name:"TopLists"}},{default:rt(()=>[Ef,Cf]),_:1})]),m("li",xf,[re(r,{class:"nav-link",to:{name:"Feedback"}},{default:rt(()=>[Sf]),_:1})]),m("li",kf,[re(r,{class:"nav-link",to:{name:"Instructions"}},{default:rt(()=>[Af]),_:1})])]),m("ul",If,[m("li",Pf,[m("a",{class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button",onClick:t[0]||(t[0]=a=>e.toggle=!e.toggle),"data-bs-toggle":"dropdown","aria-expanded":"false"},$f),m("ul",{class:Pe(["dropdown-menu ms-auto",{show:e.toggle}]),"aria-labelledby":"navbarDropdown",onClick:t[1]||(t[1]=a=>e.toggle=!e.toggle)},[e.authenticated?(_(),T("li",Nf,[re(r,{class:"dropdown-item",to:{name:"Profile",params:{selectedName:e.userName}}},{default:rt(()=>[Rf]),_:1},8,["to"])])):F("",!0),e.authenticated?(_(),T("li",Mf,[re(r,{onClick:e.logout,class:"dropdown-item",to:{name:"Login"}},{default:rt(()=>[Df]),_:1},8,["onClick"])])):F("",!0),e.authenticated?F("",!0):(_(),T("li",Bf,[re(r,{class:"dropdown-item",to:{name:"Login"}},{default:rt(()=>[Hf]),_:1})]))],2)])])])])),e.loading?(_(),T("div",Vf,jf)):F("",!0)])}const zf=Fe(lf,[["render",Uf]]),Gf=De({name:"Games",components:{NavbarTop:zf},mixins:[Ct],data(){return{title:""}},async created(){if(!this.user){const e=sessionStorage.getItem("userName"),t=sessionStorage.getItem("token");let s={name:e,token:t,webSocket:null};e&&e.startsWith("Anon"),await this.$store.dispatch("setUser",s)}},methods:{}});const Wf={class:"container"},Yf=m("header",null,[m("h2",null,"Welcomes you!")],-1),qf=m("footer",null,null,-1);function Kf(e,t,s,n,i,o){const r=Rt("NavbarTop"),a=Rt("router-view");return _(),T("div",Wf,[Yf,re(r),re(a),qf])}const Qf=Fe(Gf,[["render",Kf]]),Xf=De({name:"Login",mixins:[Ct],props:{token:String},data(){return{loginToken:null,usrNameTemp:null,usrPwTemp:null,loginError:null,loginRequestOnTheFly:!1}},computed:{isLoginButtonDisabled(){return this.loginRequestOnTheFly?!0:this.usrNameTemp&&this.usrPwTemp?this.usrNameTemp.length<1||this.usrPwTemp.length<1:!0},errorFromLogin(){return this.loginError!=null}},created(){},methods:{login(){this.logout().then(()=>{this.loginError=null,this.loginRequestOnTheFly=!0;const e={method:"POST",headers:{"Content-Type":"application/json",Authorization:null},body:JSON.stringify({userName:this.usrNameTemp,password:this.usrPwTemp})},t="http://35.217.7.146/portal/api/user/login";this.$store.dispatch("setLoadingStatus",!0),fetch(t,e).then(s=>(this.resetLoginData(),s.status!==200?Promise.reject("error in login"):s.json())).then(s=>{let n={name:s.name,token:s.activeLoginId};this.$store.dispatch("setUser",n)},()=>{this.loginError=!0}).finally(()=>{this.loginRequestOnTheFly=!1,this.$store.dispatch("setLoadingStatus",!1)})})},resetLoginData(){this.usrName=null,this.pw=null}}}),Jf={key:0,class:"row"},Zf={class:"row"},ep={class:"col-md-6 offset-md-3 alert alert-info"},tp=m("br",null,null,-1),sp={key:1,class:"row"},np={class:"col m-2"},ip=m("h3",null,"Login ",-1),op=ee(" UserName: "),rp=m("br",null,null,-1),ap={key:2,class:"row"},lp={class:"col m-2"},cp=ee(" Password: "),up=["disabled"],hp={key:3,class:"row d-inline-flex p-2 alert-danger",role:"alert"};function dp(e,t,s,n,i,o){return _(),T(ce,null,[e.authenticated?(_(),T("div",Jf,[m("div",Zf,[m("div",ep,[ee(" Welcome "+j(e.userName)+" ",1),tp])])])):F("",!0),e.authenticated?F("",!0):(_(),T("div",sp,[m("div",np,[ip,m("div",null,[op,Me(m("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>e.usrNameTemp=r),class:"p-3",type:"text"},null,512),[[Hn,e.usrNameTemp]]),rp])])])),e.authenticated?F("",!0):(_(),T("div",ap,[m("div",lp,[cp,Me(m("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>e.usrPwTemp=r),class:"p-3",type:"password"},null,512),[[Hn,e.usrPwTemp]]),m("div",null,[m("button",{onClick:t[2]||(t[2]=(...r)=>e.login&&e.login(...r)),disabled:e.isLoginButtonDisabled},"Login",8,up)])])])),e.errorFromLogin?(_(),T("div",hp," Login error occured! ")):F("",!0)],64)}const fp=Fe(Xf,[["render",dp]]);var wi=(e=>(e.O="O",e.X="X",e))(wi||{}),Tn=(e=>(e.GAME="G",e.RESIGNITION="R",e))(Tn||{}),vc=(e=>(e[e.WIN_BY_PLAY=1]="WIN_BY_PLAY",e[e.WIN_BY_TIME=2]="WIN_BY_TIME",e[e.WIN_BY_RESIGNATION=3]="WIN_BY_RESIGNATION",e[e.WIN_BY_DISCONNECT=4]="WIN_BY_DISCONNECT",e[e.DRAW=5]="DRAW",e[e.LEFT_TABLE=6]="LEFT_TABLE",e))(vc||{});function pp(e){return new Date(e).toLocaleDateString()}function oo(e){if(e.initialRanking>=0&&e.finalRanking>=0){const t=e.finalRanking>=e.initialRanking?"+":"-",s=Math.abs(e.initialRanking-e.finalRanking),n=t.concat(s.toFixed());return"("+n+")"}}function pi(e){return e==null?void 0:e.toFixed()}const Ui={data(){return{token:null}},computed:{resignButtonDisabled(){var e;return(e=this.$store.getters)==null||e.theTable,this.watch||this.theTable&&!this.theTable.playerInTurn?!0:this.theTable.playerInTurn.name!==this.userName},rematchButtonEnabled(){const e=this.$store.getters.theTable;return e?!this.watch&&e.playerInTurn===null:!1},resignButtonVisible(){var t,s;const e=this.$store.getters.theTable;return e?this.userName===((t=e.playerA)==null?void 0:t.name)||this.userName===((s=e.playerB)==null?void 0:s.name):!1},theTable(){return this.$store.getters.theTable}},timeLeft(){return this.secondsLeft},theTable(){return this.$store.getters.theTable},watchers(){return this.$store.getters.theTable.watchers},created(){var e,t;((t=(e=this.theTable)==null?void 0:e.playerInTurn)==null?void 0:t.name)===this.userName&&(this.startTime=120)},methods:{stopReducer(){clearInterval(this.redurcerInterval),this.secondsLeft=null},playMoveNotification(){if(this.soundOn){const e=new window.AudioContext,t=e.createOscillator();t.type="sine",t.frequency.setValueAtTime(446,e.currentTime),t.connect(e.destination),t.start(),setTimeout(()=>{t.stop()},250)}},removeMouseListeners(){this.canvas.removeEventListener("click",this.handleClick,!1)},disableBoard(){console.log("disable")},rematch(){const e={title:"REMATCH",message:""};this.user.webSocket.send(JSON.stringify(e))},resign(){const e={title:"RESIGN",message:this.tablea};this.user.webSocket.send(JSON.stringify(e))},leaveTable(){var t,s;const e={title:"LEAVE_TABLE",message:this.theTable.tableId};(s=(t=this==null?void 0:this.user)==null?void 0:t.webSocket)==null||s.send(JSON.stringify(e)),this.$store.dispatch("clearTable")},openTable(e){this.$router.push({name:this.getTableName(e.gameMode.gameNumber),id:e.tableId})},openWatcherTable(e){this.$router.push({name:this.getTableName(e.gameMode.gameNumber),id:e.tableId,params:{watch:"1"}})},getTableName(e){if(e===1)return"TableTicTacToe";if(e===2)return"TableConnectFour";if(e===3)return"PoolTable";if(e===4)return"YatzyTable"},getAllTimeControls(){return[{id:0,seconds:10},{id:1,seconds:15},{id:2,seconds:20},{id:3,seconds:30},{id:4,seconds:45},{id:5,seconds:60},{id:6,seconds:90},{id:7,seconds:120},{id:8,seconds:240},{id:9,seconds:300}]},getTableTimeControl(e){return this.getAllTimeControls()[e.timeControlIndex].seconds},isPlayerInTurn(e){return this.theTable.playerInTurn.name===e},isTurnChange(e){return this.$store.getters.playerInTurn.name!==e},isTurnChangeToMe(e){return e.playerInTurn.name===this.userName&&this.$store.getters.playerInTurn.name!==this.userName},isTurnChangeFromMe(e){return e.playerInTurn.name!==this.userName&&this.$store.getters.playerInTurn.name===this.userName},isTurnChangeToMe2(e){return console.log("isTurnChangeToMe2 nextPlayer:"+e+"  storePlayerinInTurn "+this.$store.getters.playerInTurn.name+"  myName:"+this.userName),e===this.userName&&this.$store.getters.playerInTurn.name!==this.userName},shouldChangeTurn(e){return!(!this.$store.getters.playerInTurn||this.$store.getters.playerInTurn.name===e.name)},async changeTurnIfRequired(e){this.shouldChangeTurn(e)&&await this.$store.dispatch("changeTurn",e)},isMe(e){return this.userName===e},isMyTurnInStore(){var e,t;return((t=(e=this.theTable)==null?void 0:e.playerInTurn)==null?void 0:t.name)===this.userName},isOnTable(e){return e.gameMode.gameNumber<4?e.playerA.name===this.userName||e.playerB.name===this.userName:e.players.filter(s=>s.name===this.userName).length>0},playNotificationSound(){const e=new window.AudioContext,t=e.createOscillator();t.type="sine",t.frequency.setValueAtTime(446,e.currentTime),t.connect(e.destination),t.start(),setTimeout(()=>{t.stop()},500)}}},_c={mixins:[Ct,Ui],data(){return{p:0}},computed:{},created(){},methods:{sendPocketSelection(e){e=e===null?0:e;const t={title:"POOL_SELECT_POCKET",message:this.theTable.tableId,pool:{selectedPocket:e}};console.log("*** Sending pocket selection to server"+JSON.stringify(t)),this.user.webSocket.send(JSON.stringify(t))},hb(e,t,s){let i={position:{x:e,y:t}};const o={title:"POOL_HANDBALL",message:this.theTable.tableId,pool:{cueBall:i,canvas:{x:s.width,y:s.height}}};console.log("*** Sending handball to server"+JSON.stringify(o)),this.user.webSocket.send(JSON.stringify(o))},sendTurn(e,t,s){const n={title:"POOL_PLAY_TURN",message:this.theTable.tableId,pool:{cue:this.prepareTransfer(e),cueBall:this.prepareTransfer(t),canvas:{x:s.width,y:s.height}}};console.log("*** Sending turn to server"+JSON.stringify(n)),this.user.webSocket.send(JSON.stringify(n))},sp(e,t,s){const n={title:"POOL_UPDATE",message:this.theTable.tableId,pool:{cue:this.prepareTransfer(e),cueBall:this.prepareTransfer(t),canvas:{x:s.width,y:s.height}}};this.user.webSocket.send(JSON.stringify(n))},prepareHandBall(e){const{image:t,color:s,...n}=e;return n},prepareTransfer(e){const{image:t,color:s,...n}=e;return n},t(e,t,s,n,i,o=!1){this.p||(this.p=0<=0,setTimeout(()=>{e(s,n,i),this.p=atob("dHJ1ZQ==")<"m"?"YmFzZTY0IGlzIG5vIGVuY3J5cHRpb24gCg==":.1+.2==.3},t))},isHandBall(e){return e.pool.turnResult==="HANDBALL"},isOngoingGame(){return this.theTable?!!this.theTable.playerInTurn:!1},getClosestPocket(e){return e.offsetY<this.canvas.height/2?e.offsetX<this.canvas.width/3?0:e.offsetX<this.canvas.width*.66?1:2:e.offsetX<this.canvas.width/3?5:e.offsetX<this.canvas.width*.66?4:3}}};function mp(){return Tc().__VUE_DEVTOOLS_GLOBAL_HOOK__}function Tc(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const gp=typeof Proxy=="function",bp="devtools-plugin:setup",yp="plugin:settings:set";class vp{constructor(t,s){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=s;const n={};if(t.settings)for(const r in t.settings){const a=t.settings[r];n[r]=a.defaultValue}const i=`__vue-devtools-plugin-settings__${t.id}`;let o=Object.assign({},n);try{const r=localStorage.getItem(i),a=JSON.parse(r);Object.assign(o,a)}catch{}this.fallbacks={getSettings(){return o},setSettings(r){try{localStorage.setItem(i,JSON.stringify(r))}catch{}o=r}},s&&s.on(yp,(r,a)=>{r===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(r,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(r,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(h=>{this.targetQueue.push({method:a,args:l,resolve:h})})})}async setRealTarget(t){this.target=t;for(const s of this.onQueue)this.target.on[s.method](...s.args);for(const s of this.targetQueue)s.resolve(await this.target[s.method](...s.args))}}function _p(e,t){const s=Tc(),n=mp(),i=gp&&e.enableEarlyProxy;if(n&&(s.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!i))n.emit(bp,e,t);else{const o=i?new vp(e,n):null;(s.__VUE_DEVTOOLS_PLUGINS__=s.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:e,setupFn:t,proxy:o}),o&&t(o.proxiedTarget)}}/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var wc="store";function Ec(e){return e===void 0&&(e=null),Lt(e!==null?e:wc)}function fn(e,t){Object.keys(e).forEach(function(s){return t(e[s],s)})}function Tp(e){return e!==null&&typeof e=="object"}function wp(e){return e&&typeof e.then=="function"}function Ep(e,t){return function(){return e(t)}}function Cc(e,t,s){return t.indexOf(e)<0&&(s&&s.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function xc(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var s=e.state;zi(e,s,[],e._modules.root,!0),lr(e,s,t)}function lr(e,t,s){var n=e._state;e.getters={},e._makeLocalGettersCache=Object.create(null);var i=e._wrappedGetters,o={};fn(i,function(r,a){o[a]=Ep(r,e),Object.defineProperty(e.getters,a,{get:function(){return o[a]()},enumerable:!0})}),e._state=un({data:t}),e.strict&&Ap(e),n&&s&&e._withCommit(function(){n.data=null})}function zi(e,t,s,n,i){var o=!s.length,r=e._modules.getNamespace(s);if(n.namespaced&&(e._modulesNamespaceMap[r],e._modulesNamespaceMap[r]=n),!o&&!i){var a=cr(t,s.slice(0,-1)),l=s[s.length-1];e._withCommit(function(){a[l]=n.state})}var h=n.context=Cp(e,r,s);n.forEachMutation(function(u,c){var p=r+c;xp(e,p,u,h)}),n.forEachAction(function(u,c){var p=u.root?c:r+c,b=u.handler||u;Sp(e,p,b,h)}),n.forEachGetter(function(u,c){var p=r+c;kp(e,p,u,h)}),n.forEachChild(function(u,c){zi(e,t,s.concat(c),u,i)})}function Cp(e,t,s){var n=t==="",i={dispatch:n?e.dispatch:function(o,r,a){var l=Ei(o,r,a),h=l.payload,u=l.options,c=l.type;return(!u||!u.root)&&(c=t+c),e.dispatch(c,h)},commit:n?e.commit:function(o,r,a){var l=Ei(o,r,a),h=l.payload,u=l.options,c=l.type;(!u||!u.root)&&(c=t+c),e.commit(c,h,u)}};return Object.defineProperties(i,{getters:{get:n?function(){return e.getters}:function(){return Sc(e,t)}},state:{get:function(){return cr(e.state,s)}}}),i}function Sc(e,t){if(!e._makeLocalGettersCache[t]){var s={},n=t.length;Object.keys(e.getters).forEach(function(i){if(i.slice(0,n)===t){var o=i.slice(n);Object.defineProperty(s,o,{get:function(){return e.getters[i]},enumerable:!0})}}),e._makeLocalGettersCache[t]=s}return e._makeLocalGettersCache[t]}function xp(e,t,s,n){var i=e._mutations[t]||(e._mutations[t]=[]);i.push(function(r){s.call(e,n.state,r)})}function Sp(e,t,s,n){var i=e._actions[t]||(e._actions[t]=[]);i.push(function(r){var a=s.call(e,{dispatch:n.dispatch,commit:n.commit,getters:n.getters,state:n.state,rootGetters:e.getters,rootState:e.state},r);return wp(a)||(a=Promise.resolve(a)),e._devtoolHook?a.catch(function(l){throw e._devtoolHook.emit("vuex:error",l),l}):a})}function kp(e,t,s,n){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(o){return s(n.state,n.getters,o.state,o.getters)})}function Ap(e){Ts(function(){return e._state.data},function(){},{deep:!0,flush:"sync"})}function cr(e,t){return t.reduce(function(s,n){return s[n]},e)}function Ei(e,t,s){return Tp(e)&&e.type&&(s=t,t=e,e=e.type),{type:e,payload:t,options:s}}var Ip="vuex bindings",da="vuex:mutations",ro="vuex:actions",Rs="vuex",Pp=0;function Op(e,t){_p({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[Ip]},function(s){s.addTimelineLayer({id:da,label:"Vuex Mutations",color:fa}),s.addTimelineLayer({id:ro,label:"Vuex Actions",color:fa}),s.addInspector({id:Rs,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),s.on.getInspectorTree(function(n){if(n.app===e&&n.inspectorId===Rs)if(n.filter){var i=[];Pc(i,t._modules.root,n.filter,""),n.rootNodes=i}else n.rootNodes=[Ic(t._modules.root,"")]}),s.on.getInspectorState(function(n){if(n.app===e&&n.inspectorId===Rs){var i=n.nodeId;Sc(t,i),n.state=Np(Mp(t._modules,i),i==="root"?t.getters:t._makeLocalGettersCache,i)}}),s.on.editInspectorState(function(n){if(n.app===e&&n.inspectorId===Rs){var i=n.nodeId,o=n.path;i!=="root"&&(o=i.split("/").filter(Boolean).concat(o)),t._withCommit(function(){n.set(t._state.data,o,n.state.value)})}}),t.subscribe(function(n,i){var o={};n.payload&&(o.payload=n.payload),o.state=i,s.notifyComponentUpdate(),s.sendInspectorTree(Rs),s.sendInspectorState(Rs),s.addTimelineEvent({layerId:da,event:{time:Date.now(),title:n.type,data:o}})}),t.subscribeAction({before:function(n,i){var o={};n.payload&&(o.payload=n.payload),n._id=Pp++,n._time=Date.now(),o.state=i,s.addTimelineEvent({layerId:ro,event:{time:n._time,title:n.type,groupId:n._id,subtitle:"start",data:o}})},after:function(n,i){var o={},r=Date.now()-n._time;o.duration={_custom:{type:"duration",display:r+"ms",tooltip:"Action duration",value:r}},n.payload&&(o.payload=n.payload),o.state=i,s.addTimelineEvent({layerId:ro,event:{time:Date.now(),title:n.type,groupId:n._id,subtitle:"end",data:o}})}})})}var fa=8702998,Lp=6710886,$p=16777215,kc={label:"namespaced",textColor:$p,backgroundColor:Lp};function Ac(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function Ic(e,t){return{id:t||"root",label:Ac(t),tags:e.namespaced?[kc]:[],children:Object.keys(e._children).map(function(s){return Ic(e._children[s],t+s+"/")})}}function Pc(e,t,s,n){n.includes(s)&&e.push({id:n||"root",label:n.endsWith("/")?n.slice(0,n.length-1):n||"Root",tags:t.namespaced?[kc]:[]}),Object.keys(t._children).forEach(function(i){Pc(e,t._children[i],s,n+i+"/")})}function Np(e,t,s){t=s==="root"?t:t[s];var n=Object.keys(t),i={state:Object.keys(e.state).map(function(r){return{key:r,editable:!0,value:e.state[r]}})};if(n.length){var o=Rp(t);i.getters=Object.keys(o).map(function(r){return{key:r.endsWith("/")?Ac(r):r,editable:!1,value:Oo(function(){return o[r]})}})}return i}function Rp(e){var t={};return Object.keys(e).forEach(function(s){var n=s.split("/");if(n.length>1){var i=t,o=n.pop();n.forEach(function(r){i[r]||(i[r]={_custom:{value:{},display:r,tooltip:"Module",abstract:!0}}),i=i[r]._custom.value}),i[o]=Oo(function(){return e[s]})}else t[s]=Oo(function(){return e[s]})}),t}function Mp(e,t){var s=t.split("/").filter(function(n){return n});return s.reduce(function(n,i,o){var r=n[i];if(!r)throw new Error('Missing module "'+i+'" for path "'+t+'".');return o===s.length-1?r:r._children},t==="root"?e:e.root._children)}function Oo(e){try{return e()}catch(t){return t}}var xt=function(t,s){this.runtime=s,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=(typeof n=="function"?n():n)||{}},Oc={namespaced:{configurable:!0}};Oc.namespaced.get=function(){return!!this._rawModule.namespaced};xt.prototype.addChild=function(t,s){this._children[t]=s};xt.prototype.removeChild=function(t){delete this._children[t]};xt.prototype.getChild=function(t){return this._children[t]};xt.prototype.hasChild=function(t){return t in this._children};xt.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};xt.prototype.forEachChild=function(t){fn(this._children,t)};xt.prototype.forEachGetter=function(t){this._rawModule.getters&&fn(this._rawModule.getters,t)};xt.prototype.forEachAction=function(t){this._rawModule.actions&&fn(this._rawModule.actions,t)};xt.prototype.forEachMutation=function(t){this._rawModule.mutations&&fn(this._rawModule.mutations,t)};Object.defineProperties(xt.prototype,Oc);var As=function(t){this.register([],t,!1)};As.prototype.get=function(t){return t.reduce(function(s,n){return s.getChild(n)},this.root)};As.prototype.getNamespace=function(t){var s=this.root;return t.reduce(function(n,i){return s=s.getChild(i),n+(s.namespaced?i+"/":"")},"")};As.prototype.update=function(t){Lc([],this.root,t)};As.prototype.register=function(t,s,n){var i=this;n===void 0&&(n=!0);var o=new xt(s,n);if(t.length===0)this.root=o;else{var r=this.get(t.slice(0,-1));r.addChild(t[t.length-1],o)}s.modules&&fn(s.modules,function(a,l){i.register(t.concat(l),a,n)})};As.prototype.unregister=function(t){var s=this.get(t.slice(0,-1)),n=t[t.length-1],i=s.getChild(n);!i||!i.runtime||s.removeChild(n)};As.prototype.isRegistered=function(t){var s=this.get(t.slice(0,-1)),n=t[t.length-1];return s?s.hasChild(n):!1};function Lc(e,t,s){if(t.update(s),s.modules)for(var n in s.modules){if(!t.getChild(n))return;Lc(e.concat(n),t.getChild(n),s.modules[n])}}function Dp(e){return new nt(e)}var nt=function(t){var s=this;t===void 0&&(t={});var n=t.plugins;n===void 0&&(n=[]);var i=t.strict;i===void 0&&(i=!1);var o=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new As(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=o;var r=this,a=this,l=a.dispatch,h=a.commit;this.dispatch=function(p,b){return l.call(r,p,b)},this.commit=function(p,b,x){return h.call(r,p,b,x)},this.strict=i;var u=this._modules.root.state;zi(this,u,[],this._modules.root),lr(this,u),n.forEach(function(c){return c(s)})},ur={state:{configurable:!0}};nt.prototype.install=function(t,s){t.provide(s||wc,this),t.config.globalProperties.$store=this;var n=this._devtools!==void 0?this._devtools:!1;n&&Op(t,this)};ur.state.get=function(){return this._state.data};ur.state.set=function(e){};nt.prototype.commit=function(t,s,n){var i=this,o=Ei(t,s,n),r=o.type,a=o.payload,l={type:r,payload:a},h=this._mutations[r];!h||(this._withCommit(function(){h.forEach(function(c){c(a)})}),this._subscribers.slice().forEach(function(u){return u(l,i.state)}))};nt.prototype.dispatch=function(t,s){var n=this,i=Ei(t,s),o=i.type,r=i.payload,a={type:o,payload:r},l=this._actions[o];if(!!l){try{this._actionSubscribers.slice().filter(function(u){return u.before}).forEach(function(u){return u.before(a,n.state)})}catch{}var h=l.length>1?Promise.all(l.map(function(u){return u(r)})):l[0](r);return new Promise(function(u,c){h.then(function(p){try{n._actionSubscribers.filter(function(b){return b.after}).forEach(function(b){return b.after(a,n.state)})}catch{}u(p)},function(p){try{n._actionSubscribers.filter(function(b){return b.error}).forEach(function(b){return b.error(a,n.state,p)})}catch{}c(p)})})}};nt.prototype.subscribe=function(t,s){return Cc(t,this._subscribers,s)};nt.prototype.subscribeAction=function(t,s){var n=typeof t=="function"?{before:t}:t;return Cc(n,this._actionSubscribers,s)};nt.prototype.watch=function(t,s,n){var i=this;return Ts(function(){return t(i.state,i.getters)},s,Object.assign({},n))};nt.prototype.replaceState=function(t){var s=this;this._withCommit(function(){s._state.data=t})};nt.prototype.registerModule=function(t,s,n){n===void 0&&(n={}),typeof t=="string"&&(t=[t]),this._modules.register(t,s),zi(this,this.state,t,this._modules.get(t),n.preserveState),lr(this,this.state)};nt.prototype.unregisterModule=function(t){var s=this;typeof t=="string"&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var n=cr(s.state,t.slice(0,-1));delete n[t[t.length-1]]}),xc(this)};nt.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),this._modules.isRegistered(t)};nt.prototype.hotUpdate=function(t){this._modules.update(t),xc(this,!0)};nt.prototype._withCommit=function(t){var s=this._committing;this._committing=!0,t(),this._committing=s};Object.defineProperties(nt.prototype,ur);const je=Dp({state:{user:null,games:[],tables:[],users:[],theTable:null,commonChat:{messages:[],message:null},loadingStatus:!1},getters:{user(e){if(e.user)return e.user;const t=sessionStorage.getItem("userName"),s=sessionStorage.getItem("token");if(t&&s){const n={name:t,token:s};return je.dispatch("setUser",n),e.user}return null},loading(e){return e.loadingStatus},userName(e){return e.user?e.user.name:null},users(e){return e.users},tables(e){return e.tables},games(e){return e.games},theTable(e){return e.theTable},yatzyTable(e){return e.theTable},chatMessages(e){return e.theTable&&e.theTable.chat?e.theTable.chat.messages:[]},commonChatMessages(e){return e.commonChat.messages},loadingStatus(e){return e.loadingStatus},playerInTurn(e){return e.theTable.playerInTurn}},mutations:{setUser(e,t){t?(sessionStorage.setItem("userName",t.name),sessionStorage.setItem("token",t.token),e.user=t):(sessionStorage.removeItem("userName"),sessionStorage.removeItem("token"),e.user=t)},updateRollCount(e,t){let s=e.theTable.playerInTurn;s.rollsLeft=t},updateUserTableId(e,t){e.user.tableId=t},setGames(e,t){e.games=t},joinMultiplayerTable(e,t){let s=e.tables.find(n=>n.tableId===t.tableId);s.players=t.players},setTables(e,t){e.tables=t},clearTable(e){e.theTable=null},setUsers(e,t){e.users=t},updateScore(e,t){e.theTable&&(e.theTable.playerA.wins=t.winsA,e.theTable.playerB.wins=t.winsB,e.theTable.playerInTurn=null)},addTable(e,t){t.playerA.name===e.user.name?e.tables.unshift(t):e.tables.push(t)},removeFromPlayerList(e,t){e.users=e.users.filter(s=>s.name!==t.name)},removeTable(e,t){e.tables=e.tables.filter(s=>s.tableId!==t)},addPlayer(e,t){e.users.push(t)},startGame(e,t){const s=e.tables.findIndex(n=>n.tableId===t.tableId);e.tables.splice(s,1,t)},selectTable(e,t){let s={messages:[],message:{text:""}};t.chat=s;const n=t.board;t.board=n,e.theTable=t,e.user.tableId=t.tableId},addWatcher(e,t){if(e.theTable){let s=t.name.concat(" joined to watch");const n={from:"System",text:s};e.theTable.chat.messages.unshift(n)}},move(e,t){e.theTable.board.push(t)},changeTurn(e,t){e.theTable={...e.theTable,playerInTurn:t}},chat(e,t){e.theTable&&e.theTable.chat.messages.unshift(t)},updateCommonChat(e,t){e.commonChat.messages.unshift(t)},resign(e,t){e.theTable&&(e.theTable.playerA.wins=t.winsA,e.theTable.playerB.wins=t.winsB,e.theTable.playerInTurn=null)},leaveStartedTable(e,t){if(e.theTable){let s=t.concat(" left table");const n={from:"System",text:s};if(e.theTable.chat.messages.unshift(n),e.theTable.gameMode.gameNumber===4)return;(e.theTable.playerA.name===t||e.theTable.playerB.name===t)&&(e.theTable.playerInTurn=null)}},leaveStartingTable(e,t){let s=t.table,n=t.who.name,i=e.tables.find(o=>o.tableId==(s==null?void 0:s.tableId));if(i&&i.players){let o=i.players.findIndex(r=>r.name===n);i.players.splice(o,1)}},rematch(e,t){let s={messages:[],message:{text:""}};e.theTable&&e.theTable.chat&&(s=e.theTable.chat);const n={text:"Rematch started",from:"System"};s.messages.unshift(n),t.table.chat=s,e.theTable=t.table},updateWinner(e,t){if(this.state.theTable){e.theTable.playerInTurn=null;const s={text:t.winner.name.concat(" won"),from:"System"};e.theTable.chat.messages.unshift(s);let n=e.theTable;n.win=t}},setDraw(e,t){if(this.state.theTable){e.theTable.playerA&&(e.theTable.playerA.draws=t.table.playerA.draws),e.theTable.playerB&&(e.theTable.playerB.draws=t.table.playerB.draws),e.theTable.playerInTurn&&(e.theTable.playerInTurn=null);const s={text:"Game ended in draw",from:"System"};e.theTable.chat.messages.unshift(s)}},setLoadingStatus(e,t){e.loadingStatus=t}},actions:{poolUpdate(e,t){},poolPlayTurn(e,t){},poolSetHandBall(e,t){},poolSelectPocket(e,t){},poolSetHandBallFail(e,t){},poolGameEnded(e,t){},yatzyRollDices(e,t){},yatzySelectHand(e,t){},timeout(e,t){},multiplayerTableResign(e,t){},currentTableIsClosed(e,t){},setUser(e,t){e.commit("setUser",t)},setGames(e,t){e.commit("setGames",t)},setTables(e,t){e.commit("setTables",t)},setUsers(e,t){e.commit("setUsers",t)},addTable(e,t){e.commit("addTable",t)},removePlayer(e,t){e.commit("removeFromPlayerList",t)},removeTable(e,t){e.commit("removeTable",t)},addPlayer(e,t){e.commit("addPlayer",t)},startGame(e,t){e.commit("startGame",t)},selectTable(e,t){e.commit("selectTable",t)},addWatcher(e,t){e.commit("addWatcher",t)},move(e,t){e.commit("move",t)},changeTurn(e,t){e.commit("changeTurn",t)},chat(e,t){e.commit("chat",t)},updateCommonChat(e,t){e.commit("updateCommonChat",t)},resign(e,t){e.commit("resign",t)},updateScore(e,t){e.commit("updateScore",t)},rematch(e,t){e.commit("rematch",t)},clearTable(e){e.commit("clearTable")},leaveTable(e,t){var s;if(!((s=t==null?void 0:t.table)!=null&&s.started))e.commit("leaveStartingTable",t);else if(e.state.theTable)e.state.theTable.tableId===t.table.tableId&&e.commit("leaveStartedTable",t.who.name);else return},updateWinner(e,t){e.commit("updateWinner",t)},setDraw(e,t){e.commit("setDraw",t)},joinMultiplayerTable(e,t){e.commit("joinMultiplayerTable",t)},updateUserTableId(e,t){e.commit("updateUserTableId",t)},logout(e,t){e.commit("setTables",[]),e.commit("setUsers",[]),e.commit("updateUserTableId",null),t&&t.webSocket&&(t.webSocket.close(),t.webSocket=null);const s={method:"POST",headers:{"Content-Type":"application/json",Authorization:null},body:JSON.stringify({token:t==null?void 0:t.token})},n="http://35.217.7.146/portal/api/user/logout";e.commit("setUser",null),fetch(n,s).then(i=>{})},setLoadingStatus(e,t){e.commit("setLoadingStatus",t)}}}),Bp=De({name:"Lobby",mixins:[Ct,Ui,_c],data(){return{selectedGame:0,selectedGameMode:"0",selectedTimeControl:0,selectedPlayerAmount:2,playAgainstComputerChecked:!1,randomStarterChecked:!1,onlyRegistered:!1,computerLevel:"0",GUEST:ha,fixVal:pi}},computed:{users(){return this.$store.getters.users},tables(){return this.$store.getters.tables},games(){return this.$store.getters.games},gameModes(){if(this.selectedGame===1)return this.$store.getters.games.filter(e=>e.gameId===1)[0].gameModes;if(this.selectedGame===2)return this.$store.getters.games.filter(e=>e.gameId===2)[0].gameModes;if(this.selectedGame===3)return this.$store.getters.games.filter(e=>e.gameId===3)[0].gameModes;if(this.selectedGame===4)return this.$store.getters.games.filter(e=>e.gameId===4)[0].gameModes},isMainCreateTableButtonVisible(){return!this.hasCreatedUnStartedTable&&!this.user.tableId},hasVariants(){return this.selectedGame!==0},isCreateTableButtonInModalDisabled(){return this.selectedGameMode==="0"&&this.selectedGame!==4},tablesExist(){return this.$store.getters.tables.length>0},hasCreatedUnStartedTable(){const e=this.$store.getters.tables[0];return e&&e.playerA&&!e.started?e.playerA.name===this.userName:!1},canRandomizeStarter(){return this.selectedGame===3||this.selectedGame===4},isTimeControlledGame(){return this.selectedGame===3||this.selectedGame===4&&this.selectedGameMode===40},canSelectPlayerAmount(){return this.selectedGame===4},isRemoveTableButtonVisible(){const e=this.$store.getters.tables[0];return e&&e.playerA?e.playerA.name===this.userName&&!e.started:!1}},created(){this.user&&!this.user.webSocket&&this.connect(this.user.token)},methods:{connect(e){let t=new WebSocket("ws://35.217.7.146:80/games/ws");t.onopen=s=>{const i={title:"LOGIN",message:this.user.token};JSON.stringify(i);const o=JSON.stringify(i);t.send(o)},t.onmessage=s=>{var i,o,r,a,l;let n=JSON.parse(s.data);switch(n.title){case"LOGIN":let h={name:n.to,token:n.token,webSocket:t};this.$store.dispatch("setUser",h).then(()=>{this.$store.dispatch("setUsers",n.players),this.$store.dispatch("setGames",n.games),this.$store.dispatch("setTables",n.tables)});break;case"CREATE_TABLE":this.$store.dispatch("addTable",n.table);break;case"REMOVE_PLAYER":((o=(i=je.getters)==null?void 0:i.theTable)==null?void 0:o.tableId)==((r=n==null?void 0:n.table)==null?void 0:r.tableId)?(console.log("lobby remove player "+((l=(a=je.getters)==null?void 0:a.theTable)==null?void 0:l.tableId)),this.$store.dispatch("leaveTable",n).then(()=>{this.$store.dispatch("removePlayer",n.who)})):this.$store.dispatch("removePlayer",n.who);break;case"REMOVE_TABLE":this.$store.dispatch("removeTable",n.message),this.user.tableId===n.message&&(this.$store.dispatch("currentTableIsClosed",n),this.$store.dispatch("updateUserTableId",null));break;case"NEW_PLAYER":this.$store.dispatch("addPlayer",n.who);break;case"START_GAME":this.$store.dispatch("startGame",n.table).then(()=>{n.table,this.isOnTable(n.table)&&this.$store.dispatch("selectTable",n.table).then(()=>{this.openTable(n.table)})});break;case"MOVE":const u={x:n.x,y:n.y,coordinates:n.x.toString().concat(n.y.toString()),token:n.token};this.$store.dispatch("move",u),this.$store.dispatch("changeTurn",n.table.playerInTurn);break;case"WATCH":this.$store.dispatch("selectTable",n.table).then(()=>{this.openWatcherTable(n.table)});break;case"ADD_WATCHER":this.$store.dispatch("addWatcher",n.who).then(()=>{});break;case"CHAT":const c={text:n.message,from:n.from};if(n.to==="COMMON"){this.$store.dispatch("updateCommonChat",c);return}this.$store.dispatch("chat",c);break;case"REMATCH":this.$store.dispatch("rematch",n).then(()=>{});break;case"JOIN_TABLE":this.$store.dispatch("joinMultiplayerTable",n.table),n.who.name===this.userName&&this.$store.dispatch("updateUserTableId",n.table.tableId);break;case"POOL_UPDATE":this.$store.dispatch("poolUpdate",n);break;case"POOL_SELECT_POCKET":this.$store.dispatch("poolSelectPocket",n);break;case"POOL_HANDBALL":if(n.pool.turnResult==="HANDBALL_FAIL")this.$store.dispatch("poolSetHandBallFail",n);else{this.$store.dispatch("poolSetHandBall",n);const w={from:n.from,text:"Handball set by "+n.table.playerInTurn.name};this.$store.dispatch("chat",w)}break;case"POOL_PLAY_TURN":this.$store.dispatch("poolPlayTurn",n).then(()=>{});break;case"YATZY_ROLL_DICES":this.$store.dispatch("yatzyRollDices",n);break;case"YATZY_SELECT_HAND":this.$store.dispatch("yatzySelectHand",n);break;case"TIMEOUT":this.$store.dispatch("timeout",n);break;case"LEAVE_TABLE":this.$store.dispatch("leaveTable",n),n.who.name===this.userName&&this.$store.dispatch("updateUserTableId",null);break;case"GAME_END":const p={x:n.x,y:n.y,coordinates:n.x.toString().concat(n.y.toString()),token:n.token};if(n.table.gameMode.gameNumber!==3){if(this.$store.dispatch("move",p),n.gameResult.resultType==="DRAW"){const w={table:n.table,win:n.win};this.$store.dispatch("setDraw",w)}else{const w={winner:n.gameResult.winner.name,reason:Tn.GAME,winsA:n.table.playerA.wins,winsB:n.table.playerB.wins,from:"System"};this.$store.dispatch("updateScore",w);const H={fromX:n.gameResult.fromX,fromY:n.gameResult.fromY,toX:n.gameResult.toX,toY:n.gameResult.toY,resultType:n.gameResult.resultType,winner:{name:n.gameResult.winner.name}};this.$store.dispatch("updateWinner",H)}return}n.table.gameMode.gameNumber===3&&(this.$store.dispatch("poolPlayTurn",n),this.$store.dispatch("poolGameEnded",n));break;case"RESIGN":if(n.table.multiplayerTable){this.$store.dispatch("multiplayerTableResign",n);return}const b={winner:n.who.name,reason:n.reason,winsA:n.table.playerA.wins,winsB:n.table.playerB.wins,from:n.from};this.$store.dispatch("resign",b);const x=n.message==="R"?Tn.RESIGNITION:Tn.GAME;let L=n.who.name.concat(x===Tn.RESIGNITION?" won by resignation":" won");const I={from:n.from,text:L};this.$store.dispatch("chat",I);break}},t.onerror=s=>{},t.onclose=s=>{this.user&&(this.user.webSocket=null),this.$router.push({path:"/portal/error"})}},createTable(){let e=null;if(e={title:"CREATE_TABLE",message:this.selectedGameMode,computer:this.playAgainstComputerChecked,randomStarter:this.randomStarterChecked,onlyRegistered:this.onlyRegistered},this.isTimeControlledGame){let t=this.selectedTimeControl;t||(t=this.getAllTimeControls[this.getAllTimeControls.length]),e.timeControlIndex=t}this.canSelectPlayerAmount&&(e.playerAmount=this.selectedPlayerAmount),this.user.webSocket.send(JSON.stringify(e)),this.computerLevel=null,this.playAgainstComputerChecked=!1,this.randomStarterChecked=!1,this.selectedTimeControl=null},getTableShortDesc(e){return e<20?"x.o":e<30?"4x":e<40?"Pool":e===40?"Classic Yatzy":e===41?"Fast Yatzy":e===42?"Super Yatzy":e===43?"Hyper Yatzy":"err"},getBoardDesc(e){return e.gameMode.gameNumber<3?e.x+" x "+e.y:e.gameMode.gameNumber===3?"8-ball":e.gameMode.gameNumber===4?e.playerAmount+"p":"err"},onComputerSelectionChange(){this.playAgainstComputerChecked||(this.computerLevel="0")},getAvailableTimeControls(){return this.selectedGameMode===40?this.getAllTimeControls().filter(e=>e.id>2):this.selectedGameMode===30?this.getAllTimeControls().filter(e=>e.id>2):this.getAllTimeControls()},onSelectedGameChange(e){if(e.target.selectedIndex===3){this.selectedGameMode=30;return}else if(e.target.selectedIndex===4){this.selectedGameMode=40,this.selectedTimeControl=7;return}this.selectedGameMode="0"},removeTable(){const e={title:"REMOVE_TABLE",message:""};this.user.webSocket.send(JSON.stringify(e))},play(e){const t={title:"JOIN_TABLE",message:e.tableId};this.user.webSocket.send(JSON.stringify(t))},leave(e){const t={title:"LEAVE_TABLE",message:e.tableId};this.user.webSocket.send(JSON.stringify(t))},playButtonVisible(e){return!(e.registeredOnly&&!this.authenticated||this.user.tableId||e.started)},leaveButtonVisible(e){return this.user.tableId===e.tableId},watchButtonVisible(e){return!!e.started},isLoginRequiredTextVisible(e){return!this.authenticated&&!this.user.tableId&&e.registeredOnly},isOwnTable(e){var t;return((t=e==null?void 0:e.playerA)==null?void 0:t.name)===this.userName},watchTable(e){const t={title:"WATCH",message:e.tableId};this.user.webSocket.send(JSON.stringify(t))},openProfile(e){e.startsWith(ha)||this.$router.push({name:"Profile",params:{selectedName:e}})},getAllowedPlayerAmounts(){return[2,3,4]}}});const Hp={class:"row mt-3"},Vp={class:"col-xs-12 col-sm-4 mt-3 mt-md-0 pt-3"},Fp=m("span",{class:"fw-bold"}," Players ",-1),jp={class:"list-group"},Up=["onClick"],zp={class:"float-start"},Gp={key:0,xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",fill:"currentColor",class:"bi bi-arrow-left",viewBox:"0 0 16 16"},Wp=m("path",{"fill-rule":"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"},null,-1),Yp=[Wp],qp={key:0,class:"bi bi-star float-end tooltipselector",title:"ConnectFour ranking"},Kp={key:1,class:"bi bi-suit-diamond float-end tooltipselector",title:"TicTacToe ranking"},Qp={class:"col-xs-12 col-sm-4 mt-3 mt-md-0"},Xp={class:"row"},Jp={class:"col-xs-6"},Zp=m("span",{class:"fw-bold"}," Tables ",-1),em={class:"float-end"},tm={key:0,type:"button",class:"btn btn-primary w-30 float-start","data-bs-toggle":"modal","data-bs-target":"#createTableModal"},sm={class:"row"},nm={key:0,class:"table"},im=m("thead",null,[m("tr",null,[m("th",{scope:"col"},"Table"),m("th",{scope:"col"},"Board"),m("th",{scope:"col"},"Playing"),m("th",{scope:"col"},"Starter"),m("th",{scope:"col"},"Time"),m("th",{scope:"col"},"Action")])],-1),om={scope:"row"},rm={key:0},am={key:1},lm={key:0},cm=["onClick"],um=["onClick"],hm=["onClick"],dm={key:3},fm={key:1,class:"col fw-bold"},pm=m("span",{class:"float-start"}," No tables at the moment. ",-1),mm=[pm],gm={class:"modal fade",id:"createTableModal",tabindex:"-1","aria-labelledby":"createTableModalLabel","aria-hidden":"true"},bm={class:"modal-dialog"},ym={class:"modal-content"},vm=m("div",{class:"modal-header"},[m("h5",{class:"modal-title",id:"createTableModalLabel"},"Create table"),m("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),_m={class:"modal-body col-xs-12"},Tm={class:"",role:"group","aria-label":"Select game",id:"select-game"},wm={value:0,key:0},Em=["value"],Cm={class:""},xm={key:0,class:"",id:"v-model-select-dynamic"},Sm={value:"0",key:0},km=["value"],Am={class:"form-check",id:"computer_selection"},Im=m("label",{class:"",for:"computerSelection"},"Play against computer",-1),Pm={class:"form-check",id:"only_registered"},Om=m("label",{class:"",for:"onlyRegistered"},"Play only against registered",-1),Lm={key:0,class:"form-check",id:"random_starter"},$m=m("label",{class:"",for:"randomStarter"},"Random starter",-1),Nm={key:1},Rm=ee(" Time control "),Mm=["value"],Dm={key:2},Bm=ee(" Players "),Hm=["value"],Vm={class:"modal-footer justify-content-between"},Fm=m("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),jm=["disabled"];function Um(e,t,s,n,i,o){return _(),T(ce,null,[m("div",Hp,[m("div",Vp,[Fp,m("ul",jp,[(_(!0),T(ce,null,gt(e.users,(r,a)=>(_(),T("li",{key:r.name,onClick:l=>e.openProfile(r.name),class:Pe(["list-group-item bg-success p-2 text-dark",[a%2==0?"bg-opacity-25":" bg-opacity-10",r.name.startsWith(e.GUEST)?"":"games-profile-link"]])},[m("div",zp,[ee(j(r.name)+" ",1),r.name===e.userName?(_(),T("svg",Gp,Yp)):F("",!0)]),r.rankingConnectFour>0?(_(),T("i",qp," \xA0"+j(e.fixVal(r.rankingConnectFour))+"\xA0 ",1)):F("",!0),r.rankingTictactoe>0?(_(),T("i",Kp," \xA0"+j(e.fixVal(r.rankingTictactoe))+"\xA0 ",1)):F("",!0)],10,Up))),128))])]),m("div",Qp,[m("div",Xp,[m("div",Jp,[Zp,m("span",em,[e.isMainCreateTableButtonVisible?(_(),T("button",tm," Create table ")):F("",!0),e.isRemoveTableButtonVisible?(_(),T("button",{key:1,onClick:t[0]||(t[0]=r=>e.removeTable()),type:"button",class:"btn btn-primary bg-danger w-30 float-start"}," Remove table ")):F("",!0)])])]),m("div",sm,[e.tablesExist?(_(),T("table",nm,[im,m("tbody",null,[(_(!0),T(ce,null,gt(e.tables,r=>{var a,l;return _(),T("tr",{key:r.tableId},[m("td",om,j(e.getTableShortDesc(r.gameMode.id)),1),m("td",null,j(e.getBoardDesc(r)),1),r.gameMode.gameNumber!==4?(_(),T("td",rm,j((a=r.playerA)==null?void 0:a.name)+" - "+j((l=r.playerB)==null?void 0:l.name),1)):F("",!0),r.gameMode.gameNumber===4?(_(),T("td",am,[m("ul",null,[(_(!0),T(ce,null,gt(r.players,h=>(_(),T("li",{key:r.id},j(h.name),1))),128))])])):F("",!0),m("td",null,j(r.randomizeStarter?"?":"fixed"),1),m("td",null,j(e.getTableTimeControl(r))+"s ",1),m("td",null,[e.hasCreatedUnStartedTable?F("",!0):(_(),T("section",lm,[e.playButtonVisible(r)?(_(),T("button",{key:0,onClick:h=>e.play(r),type:"button",class:"btn btn-primary w-30 float-start"}," Play ",8,cm)):e.leaveButtonVisible(r)?(_(),T("button",{key:1,onClick:h=>e.leave(r),type:"button",class:"btn btn-primary w-30 float-start"}," Leave ",8,um)):e.watchButtonVisible(r)?(_(),T("button",{key:2,onClick:h=>e.watchTable(r),type:"button",class:"btn btn-primary w-30 float-end"}," Watch ",8,hm)):e.isLoginRequiredTextVisible(r)?(_(),T("span",dm,"Requires login")):F("",!0)]))])])}),128))])])):(_(),T("div",fm,mm))])])]),m("div",gm,[m("div",bm,[m("div",ym,[vm,m("div",_m,[m("div",Tm,[Me(m("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>e.selectedGame=r),onChange:t[2]||(t[2]=(...r)=>e.onSelectedGameChange&&e.onSelectedGameChange(...r))},[(_(),T("option",wm," Select game ")),(_(!0),T(ce,null,gt(e.games,r=>(_(),T("option",{value:r.gameId,key:r.id},j(r.name),9,Em))),128))],544),[[ni,e.selectedGame]])]),m("div",Cm,[e.hasVariants?(_(),T("div",xm,[Me(m("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>e.selectedGameMode=r)},[(_(),T("option",Sm," Select variant ")),(_(!0),T(ce,null,gt(e.gameModes,r=>(_(),T("option",{value:r.id,key:r.id},j(r.name),9,km))),128))],512),[[ni,e.selectedGameMode]])])):F("",!0)]),m("div",Am,[Me(m("input",{class:"",type:"checkbox",id:"computerSelection",onChange:t[4]||(t[4]=(...r)=>e.onComputerSelectionChange&&e.onComputerSelectionChange(...r)),"onUpdate:modelValue":t[5]||(t[5]=r=>e.playAgainstComputerChecked=r)},null,544),[[wt,e.playAgainstComputerChecked]]),Im]),m("div",Pm,[Me(m("input",{class:"",type:"checkbox",id:"onlyRegistered","onUpdate:modelValue":t[6]||(t[6]=r=>e.onlyRegistered=r)},null,512),[[wt,e.onlyRegistered]]),Om]),e.canRandomizeStarter?(_(),T("div",Lm,[Me(m("input",{class:"",type:"checkbox",id:"randomStarter","onUpdate:modelValue":t[7]||(t[7]=r=>e.randomStarterChecked=r)},null,512),[[wt,e.randomStarterChecked]]),$m])):F("",!0),e.isTimeControlledGame?(_(),T("div",Nm,[Rm,m("div",null,[Me(m("select",{"onUpdate:modelValue":t[8]||(t[8]=r=>e.selectedTimeControl=r)},[(_(!0),T(ce,null,gt(e.getAvailableTimeControls(),r=>(_(),T("option",{value:r.id,key:r.id},j(r.seconds)+" seconds ",9,Mm))),128))],512),[[ni,e.selectedTimeControl]])])])):F("",!0),e.canSelectPlayerAmount?(_(),T("div",Dm,[Bm,m("div",null,[Me(m("select",{"onUpdate:modelValue":t[9]||(t[9]=r=>e.selectedPlayerAmount=r)},[(_(!0),T(ce,null,gt(e.getAllowedPlayerAmounts(),r=>(_(),T("option",{value:r,key:r},j(r)+" players ",9,Hm))),128))],512),[[ni,e.selectedPlayerAmount]])])])):F("",!0)]),m("div",Vm,[Fm,m("button",{disabled:e.isCreateTableButtonInModalDisabled,onClick:t[10]||(t[10]=(...r)=>e.createTable&&e.createTable(...r)),type:"button","data-bs-dismiss":"modal",class:"btn btn-primary"}," Create table ",8,jm)])])])])],64)}const zm=Fe(Bp,[["render",Um]]),Gm=De({name:"Home",methods:{toMainPage(){this.$router.push("/")}},created(){}});const Wm=rr('<div class="row" data-v-cc97b8ca><div class="col fw-bold" data-v-cc97b8ca> Hi! </div></div><div class="row mt-4" data-v-cc97b8ca><div class="col question" data-v-cc97b8ca> Play as a guest <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 25 25" data-v-cc97b8ca><path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z" data-v-cc97b8ca></path></svg></div><div class="col" data-v-cc97b8ca><p class="text-start" data-v-cc97b8ca> 1. Click Games on the top navigation bar <br data-v-cc97b8ca> 2. Join table <br data-v-cc97b8ca> 3. Or create your own table with selected options <br data-v-cc97b8ca> 4. Invite your friend to play or wait for random player </p></div></div><div class="row" data-v-cc97b8ca><div class="col question" data-v-cc97b8ca> Play with nickname and statistics <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 25 25" data-v-cc97b8ca><path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z" data-v-cc97b8ca></path></svg></div><div class="col" data-v-cc97b8ca><p class="text-start" data-v-cc97b8ca> 1. Click Registration <br data-v-cc97b8ca> 2. Type nickname and password <br data-v-cc97b8ca> 3. After registration, login and click play <br data-v-cc97b8ca></p></div></div>',3);function Ym(e,t,s,n,i,o){return Wm}const pa=Fe(Gm,[["render",Ym],["__scopeId","data-v-cc97b8ca"]]),qm=De({name:"Chat",mixins:[Ct],props:["id","common"],data(){return{messages:null,message:{text:""}}},computed:{messageExist(){return this.message.text.length>0},messagesd(){return this.common?this.$store.getters.commonChatMessages:this.$store.getters.chatMessages}},created(){},methods:{sendMessage(){let e=this.message.text.trim();if(e.length<1||e.length>75){this.message.text="";return}const t=this.common?"COMMON":this.id,s={title:"CHAT",message:e,to:t};this.user.webSocket.send(JSON.stringify(s)),this.message.text=""}}}),Km={class:"row"},Qm={class:"col overflow-auto",style:{"max-height":"500px !important"}};function Xm(e,t,s,n,i,o){return _(),T("div",Km,[m("div",Qm,[m("ul",null,[(_(!0),T(ce,null,gt(e.messagesd,(r,a)=>(_(),T("li",{key:a,class:Pe(["list-group-item rounded-pill text-start w-75 text-break mb-1",[a%2==0?"bg-success p-2 text-dark bg-opacity-25":"bg-success p-2 text-dark bg-opacity-10"]])}," \xA0"+j(r.from)+":\xA0 "+j(r.text),3))),128))])])])}const Gi=Fe(qm,[["render",Xm]]),Jm=De({components:{Chat:Gi},name:"TableTicTacToe",mixins:[Ct],props:["watch"],data(){return{horizontalGap:null,verticalGap:null,canvas:null,renderingContext:null,showLastVal:!1,soundOn:!1,secondsLeft:120}},created(){var e;this.unsubscribeAction=this.$store.subscribeAction((t,s)=>{t.type==="currentTableIsClosed"&&(this.stopReducer(),this.theTable.playerInTurn=null)}),this.unsubscribe=this.$store.subscribe((t,s)=>{if(t.type==="move")s.theTable.board,this.removeLastSquareHighLightning(),this.drawToken(this.theTable.board[this.theTable.board.length-1]),this.playMoveNotification(),this.highlightLastSquareIfSelected();else if(t.type==="changeTurn")s.theTable.playerInTurn.name===this.userName?(this.addMouseListener(),this.startReducer()):(this.removeMouseListener(),this.stopReducer());else if(t.type==="rematch")this.initBoard();else if(t.type==="updateWinner"){const n=s.theTable.win;this.removeMouseListener(),this.stopReducer(),this.drawWinningLine(n)}else(t.type==="setDraw"||t.type==="resign")&&(this.stopReducer(),this.removeMouseListener())}),((e=this.theTable.playerInTurn)==null?void 0:e.name)===this.userName&&(this.startTime=120,this.startReducer())},computed:{timeLeft(){return this.secondsLeft},theTable(){return this.$store.getters.theTable},iconColor(){const e=this.$store.getters.theTable.watchers;return e&&e.length>1?"green":"#000000"},watchers(){return this.$store.getters.theTable.watchers},resignButtonDisabled(){return this.$store.getters.theTable,this.watch||this.theTable&&!this.theTable.playerInTurn||this.theTable.playerInTurn.name!==this.userName?!0:!!(this.theTable&&this.theTable.board&&this.theTable.board.length<4)},rematchButtonEnabled(){const e=this.$store.getters.theTable;return!this.watch&&e.playerInTurn===null},resignButtonVisible(){var e,t,s,n;return this.userName===((t=(e=this.theTable)==null?void 0:e.playerA)==null?void 0:t.name)||this.userName===((n=(s=this.theTable)==null?void 0:s.playerB)==null?void 0:n.name)}},mounted(){if(!this.$store.getters.theTable){this.$router.push("/error");return}this.initBoard(),this.watch==="1"&&this.drawBoard()},beforeUnmount(){this.unsubscribe(),this.stopReducer(),this.leaveTable()},methods:{startReducer(){this.redurcerInterval&&this.stopReducer(),this.secondsLeft=120,this.redurcerInterval=setInterval(()=>{this.secondsLeft=this.secondsLeft-1,this.secondsLeft<=0&&(this.stopReducer(),this.resign())},1e3)},stopReducer(){clearInterval(this.redurcerInterval),this.secondsLeft=null},highlightLastSquareIfSelected(){if(this.showLastVal&&this.theTable.board.length>1){const e=this.theTable.board,t=e[e.length-1];this.drawToken(t,"#FF0000")}},playMoveNotification(){if(this.soundOn){const e=new window.AudioContext,t=e.createOscillator();t.type="sine",t.frequency.setValueAtTime(446,e.currentTime),t.connect(e.destination),t.start(),setTimeout(()=>{t.stop()},250)}},removeLastSquareHighLightning(){if(this.theTable.board.length>1){const e=this.theTable.board,t=e[e.length-2];this.drawToken(t,"#000000")}},removeMouseListener(){this.canvas.removeEventListener("click",this.handleClick,!1)},addMouseListener(){this.canvas.addEventListener("click",this.handleClick,!1)},drawWinningLine(e){this.renderingContext.beginPath(),this.renderingContext.moveTo(e.fromX*this.horizontalGap+this.horizontalGap/2-10,e.fromY*this.verticalGap+this.verticalGap/2),this.renderingContext.lineTo(e.toX*this.horizontalGap+this.horizontalGap/2+10,e.toY*this.verticalGap+this.verticalGap/2),this.renderingContext.strokeStyle="#00FFFF",this.renderingContext.lineWidth=5,this.renderingContext.stroke()},initBoard(){let e=this.theTable;this.canvas=document.getElementById("canvas"),this.renderingContext=this.canvas.getContext("2d"),this.canvas.height=400,this.canvas.width=400,e.x>=10&&e.x<=20?(this.canvas.height=600,this.canvas.width=600):e.x>20&&(this.canvas.height=800,this.canvas.width=800);let t=e.x-1,s=e.y-1;this.verticalGap=this.canvas.height/e.x,this.horizontalGap=this.canvas.width/e.y;let n=0,i=0;for(let o=0;o<t;o++)n+=this.horizontalGap,this.renderingContext.beginPath(),this.renderingContext.moveTo(n,i),this.renderingContext.lineTo(n,this.canvas.height),this.renderingContext.stroke();n=0,i=0;for(let o=0;o<s;o++)i+=this.verticalGap,this.renderingContext.beginPath(),this.renderingContext.moveTo(n,i),this.renderingContext.lineTo(this.canvas.width,i),this.renderingContext.stroke();this.theTable.playerInTurn.name===this.userName&&this.canvas.addEventListener("click",this.handleClick,!1)},drawBoard(){this.theTable.board.forEach(t=>{this.drawToken(t)})},drawToken(e,t){const s=e.token,n=e.x,i=e.y;if(s==wi.X){const o=Math.floor(n*this.horizontalGap+this.horizontalGap*.1),r=Math.floor(i*this.verticalGap+this.verticalGap*.1);t&&(this.renderingContext.strokeStyle=t),this.renderingContext.beginPath(),this.renderingContext.moveTo(o,r),this.renderingContext.lineTo(o+this.horizontalGap-this.horizontalGap*.2,r+this.verticalGap-this.verticalGap*.2),this.renderingContext.stroke(),this.renderingContext.beginPath(),this.renderingContext.moveTo(o,r+this.verticalGap-this.verticalGap*.2),this.renderingContext.lineTo(o+this.horizontalGap-this.horizontalGap*.2,r),this.renderingContext.stroke()}else{t&&(this.renderingContext.strokeStyle=t);const o=this.horizontalGap/2+n*this.horizontalGap,r=this.verticalGap/2+i*this.verticalGap,a=this.verticalGap/2*.85;this.renderingContext.beginPath(),this.renderingContext.arc(o,r,a,0,2*Math.PI),this.renderingContext.stroke()}},handleClick(e){const t=Math.floor(e.offsetX/this.verticalGap),s=Math.floor(e.offsetY/this.horizontalGap);let n={x:t,y:s,coordinates:t.toString().concat(s.toString())};if(!this.theTable.board.find(o=>o.coordinates===n.coordinates)){this.removeMouseListener();const o={title:"MOVE",message:this.theTable.tableId,x:n.x,y:n.y};this.user.webSocket.send(JSON.stringify(o)),this.removeMouseListener()}},disableBoard(){return this.renderingContext.font="30px Arial",this.renderingContext.fillText("Game over",10,this.canvas.height/2),!0},rematch(){const e={title:"REMATCH",message:""};this.user.webSocket.send(JSON.stringify(e))},resign(){const e={title:"RESIGN",message:this.tablea};this.user.webSocket.send(JSON.stringify(e))},leaveTable(){var t,s;const e={title:"LEAVE_TABLE",message:this.theTable.tableId};(s=(t=this==null?void 0:this.user)==null?void 0:t.webSocket)==null||s.send(JSON.stringify(e))}}});const Is=e=>(hn("data-v-8faa2019"),e=e(),dn(),e),Zm={class:"row"},eg={class:"col"},tg=["disabled"],sg={class:"row"},ng={class:"col-xs-12 col-sm-4"},ig=Is(()=>m("br",null,null,-1)),og=Is(()=>m("label",{class:"form-check-label ms-1",for:"highlight"},"Highlight last",-1)),rg=Is(()=>m("br",null,null,-1)),ag=Is(()=>m("label",{class:"form-check-label ms-1",for:"soundOn"},"Notification sound",-1)),lg=Is(()=>m("br",null,null,-1)),cg=Is(()=>m("br",null,null,-1)),ug=ee(" vs. "),hg=Is(()=>m("br",null,null,-1)),dg={key:2,class:"text-success"},fg={key:3,class:"text-success"},pg={key:4,class:"text-danger"},mg={class:"text-danger"},gg={class:"col-xs-12 col-sm-8"};function bg(e,t,s,n,i,o){var a,l,h,u,c,p,b,x,L,I,w,H,Y,R,X,J,ne,se;const r=Rt("chat");return _(),T(ce,null,[m("div",Zm,[m("div",eg,[e.resignButtonVisible?(_(),T("button",{key:0,disabled:e.resignButtonDisabled,onClick:t[0]||(t[0]=(...Q)=>e.resign&&e.resign(...Q)),type:"button",class:"btn btn-primary w-30 float-xs-start float-sm-end"}," Resign ",8,tg)):F("",!0),e.rematchButtonEnabled?(_(),T("button",{key:1,onClick:t[1]||(t[1]=(...Q)=>e.rematch&&e.rematch(...Q)),type:"button",class:"btn btn-primary w-30 float-xs-start float-sm-end"}," Rematch ")):F("",!0)])]),m("div",sg,[m("div",ng,[ee(" Connect "+j(e.theTable.gameMode.requiredConnections)+" to win ",1),ig,Me(m("input",{class:"form-check-input",type:"checkbox",id:"highlight",onChange:t[2]||(t[2]=(...Q)=>e.highlightLastSquareIfSelected&&e.highlightLastSquareIfSelected(...Q)),"onUpdate:modelValue":t[3]||(t[3]=Q=>e.showLastVal=Q)},null,544),[[wt,e.showLastVal]]),og,rg,Me(m("input",{class:"form-check-input",type:"checkbox",id:"soundOn","onUpdate:modelValue":t[4]||(t[4]=Q=>e.soundOn=Q)},null,512),[[wt,e.soundOn]]),ag,lg,e.theTable.playerA?(_(),T("span",{key:0,class:Pe(["fw-bold",{"text-success":((a=e.theTable.playerInTurn)==null?void 0:a.name)===((h=(l=e.theTable)==null?void 0:l.playerA)==null?void 0:h.name)}])},j((c=(u=e.theTable)==null?void 0:u.playerA)==null?void 0:c.gameToken)+" = "+j((b=(p=e.theTable)==null?void 0:p.playerA)==null?void 0:b.name),3)):F("",!0),cg,ug,hg,e.theTable.playerB?(_(),T("span",{key:1,class:Pe(["fw-bold",{"text-success":((x=e.theTable.playerInTurn)==null?void 0:x.name)===((I=(L=e.theTable)==null?void 0:L.playerB)==null?void 0:I.name)}])},j((H=(w=e.theTable)==null?void 0:w.playerB)==null?void 0:H.gameToken)+" = "+j((R=(Y=e.theTable)==null?void 0:Y.playerB)==null?void 0:R.name),3)):F("",!0),((X=e.theTable.playerInTurn)==null?void 0:X.name)===e.userName?(_(),T("span",dg," It's your turn. ")):((J=e.theTable)==null?void 0:J.playerInTurn)===null?(_(),T("span",fg," Game ended ")):(_(),T("div",pg," In turn: "+j((ne=e.theTable.playerInTurn)==null?void 0:ne.name),1)),m("div",{class:Pe({hidden:((se=e.theTable.playerInTurn)==null?void 0:se.name)!==e.userName})},[m("span",mg," Time left "+j(e.timeLeft),1)],2)]),m("div",gg,[m("canvas",{class:Pe({"bg-secondary":e.theTable.playerInTurn==null}),id:"canvas"},null,2)])]),re(r,{id:e.theTable.tableId},null,8,["id"])],64)}const yg=Fe(Jm,[["render",bg],["__scopeId","data-v-8faa2019"]]),pt=e=>(hn("data-v-ce153fca"),e=e(),dn(),e),vg={class:"fw-bold"},_g={class:"list-group"},Tg={class:""},wg=pt(()=>m("br",null,null,-1)),Eg={key:0},Cg=pt(()=>m("br",null,null,-1)),xg=pt(()=>m("br",null,null,-1)),Sg=pt(()=>m("br",null,null,-1)),kg=pt(()=>m("br",null,null,-1)),Ag=pt(()=>m("br",null,null,-1)),Ig=pt(()=>m("br",null,null,-1)),Pg={key:1,class:"multiplayer-list text-start"},Og={class:"text-bold"},Lg=pt(()=>m("br",null,null,-1)),$g=pt(()=>m("br",null,null,-1)),Ng=pt(()=>m("br",null,null,-1)),Rg=pt(()=>m("br",null,null,-1)),Mg=pt(()=>m("br",null,null,-1)),Dg=De({__name:"GameHistory",props:{title:String,games:Array},setup(e){const t=n=>vc[n].toLowerCase(),s=n=>n.toLowerCase();return(n,i)=>(_(),T(ce,null,[m("span",vg,j(e.title),1),m("ul",_g,[(_(!0),T(ce,null,gt(e.games,(o,r)=>(_(),T("li",{key:o.gameId,class:Pe(["list-group-item",[r%2==0?"bg-success p-2 text-dark bg-opacity-25":"bg-success p-2 text-dark bg-opacity-10"]])},[m("div",Tg,[ee(j(Re(pp)(o.startInstant))+" ",1),wg,o.players.length==2?(_(),T("p",Eg,[ee(j(o.players[0].name)+" ",1),o.players[0].initialRanking>=0?(_(),T(ce,{key:0},[ee(j(Re(pi)(o.players[0].initialRanking))+" "+j(Re(oo)(o.players[0])),1)],64)):F("",!0),ee(" - "+j(o.players[1].name)+" ",1),o.players[1].initialRanking>=0?(_(),T(ce,{key:1},[ee(j(Re(pi)(o.players[1].initialRanking))+" "+j(Re(oo)(o.players[1])),1)],64)):F("",!0),Cg,o.players[0].score>=0||o.players[1].score>=0?(_(),T(ce,{key:2},[ee(" Score: "+j(o.players[0].score)+" - "+j(o.players[1].score)+" ",1),xg],64)):F("",!0),o.winner?(_(),T(ce,{key:3},[ee(" Winner: "+j(o.winner)+" ",1),Sg],64)):F("",!0),o.result?(_(),T(ce,{key:4},[ee(" Result: "+j(t(o.result))+" ",1),kg],64)):F("",!0),o.finishStatus?(_(),T(ce,{key:5},[ee(" Game status: "+j(s(o.finishStatus))+" ",1),Ag],64)):F("",!0),o.timeControlSeconds?(_(),T(ce,{key:6},[ee(" TimeControl: "+j(o.timeControlSeconds)+" s. ",1),Ig],64)):F("",!0),o.description&&o.gameType<30?(_(),T(ce,{key:7},[ee(" Description: "+j(o.description),1)],64)):F("",!0)])):F("",!0),o.players.length>2?(_(),T("ul",Pg,[(_(!0),T(ce,null,gt(o.players,(a,l)=>(_(),T("li",{key:a.name},[m("span",Og,j(a.name),1),Lg,ee(" Ranking: "+j(Re(pi)(o.players[l].initialRanking))+" "+j(Re(oo)(o.players[l]))+" ",1),$g,a.score>=0?(_(),T(ce,{key:0},[ee(" Score: "+j(a.score)+" ",1),Ng],64)):F("",!0),a.position?(_(),T(ce,{key:1},[ee(" Position: "+j(a.position),1)],64)):F("",!0)]))),128)),o.finishStatus?(_(),T(ce,{key:0},[ee(" Game status: "+j(s(o.finishStatus))+" ",1),Rg],64)):F("",!0),o.timeControlSeconds?(_(),T(ce,{key:1},[ee(" TimeControl: "+j(o.timeControlSeconds)+" s. ",1),Mg],64)):F("",!0)])):F("",!0)])],2))),128))])],64))}});const Bg=Fe(Dg,[["__scopeId","data-v-ce153fca"]]),Hg=De({name:"Profile",mixins:[Ct],components:{GameHistory:Bg},props:{selectedName:String},data(){return{stats:null,text:null,memberSince:null,connectFours:[],tictactoes:[],status:-1,fetchText:"",eightBalls:[],yatzyClassics:[],yatzySupers:[],yatzyFasts:[],yatzyHypers:[]}},computed:{getClass(){const e=this.eightBalls>0,t=this.tictactoes>0,s=this.connectFours>0;return e&&t&&s?"col-sm-4":"col-sm-6"}},created(){this.fetchProfile()},methods:{fetchProfile(){this.status=-1,this.fetchText="";const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:null}},t="http://35.217.7.146/portal/api/profile/"+this.selectedName;this.$store.dispatch("setLoadingStatus",!0),fetch(t,e).then(s=>(this.status=s.status,s.status!==200?Promise.reject("error fetching profile"):s.json())).then(s=>{this.text=s.user.profileText,this.memberSince=new Date(s.user.memberSince).toLocaleDateString(),this.tictactoes=s.user.tictactoes,this.connectFours=s.user.connectFours,this.eightBalls=s.user.eightBalls,this.yatzyClassics=s.user.yatzyClassics,this.yatzyFasts=s.user.yatzyFasts,this.yatzySupers=s.user.yatzySupers,this.yatzyHypers=s.user.yatzyHypers},s=>{console.error("error in profile fetch "+s)}).finally(()=>{this.$store.dispatch("setLoadingStatus",!1)})}}}),Vg={key:0,class:"row"},Fg={class:"row col-md-6 offset-md-3 alert alert-info text-start"},jg=m("br",null,null,-1),Ug=m("br",null,null,-1),zg={class:"row"},Gg={key:1,class:"row"};function Wg(e,t,s,n,i,o){const r=Rt("GameHistory");return _(),T(ce,null,[e.memberSince?(_(),T("div",Vg,[m("div",Fg,[m("b",null,j(e.selectedName),1),jg,ee(" Joined: "+j(e.memberSince)+" ",1),Ug,ee(" "+j(e.text),1)]),m("div",zg,[e.yatzyClassics.length>0?(_(),T("div",{key:0,class:Pe(["col-xs-12",e.getClass])},[re(r,{games:e.yatzyClassics,title:"Yatzy classics"},null,8,["games"])],2)):F("",!0),e.yatzyFasts.length>0?(_(),T("div",{key:1,class:Pe(["col-xs-12",e.getClass])},[re(r,{games:e.yatzyFasts,title:"Yatzy Fast"},null,8,["games"])],2)):F("",!0),e.yatzySupers.length>0?(_(),T("div",{key:2,class:Pe(["col-xs-12",e.getClass])},[re(r,{games:e.yatzySupers,title:"Yatzy Super"},null,8,["games"])],2)):F("",!0),e.yatzyHypers.length>0?(_(),T("div",{key:3,class:Pe(["col-xs-12",e.getClass])},[re(r,{games:e.yatzyHypers,title:"Yatzy Hyper"},null,8,["games"])],2)):F("",!0),e.eightBalls.length>0?(_(),T("div",{key:4,class:Pe(["col-xs-12",e.getClass])},[re(r,{games:e.eightBalls,title:"Eight ball"},null,8,["games"])],2)):F("",!0),e.connectFours.length>0?(_(),T("div",{key:5,class:Pe(["col-xs-12",e.getClass])},[re(r,{games:e.connectFours,title:"Connect four"},null,8,["games"])],2)):F("",!0),e.tictactoes.length>0?(_(),T("div",{key:6,class:Pe(["col-xs-12",e.getClass])},[re(r,{games:e.tictactoes,title:"TicTacToe"},null,8,["games"])],2)):F("",!0)])])):F("",!0),e.status==204||e.status>=400?(_(),T("div",Gg," User not found ")):F("",!0)],64)}const Yg=Fe(Hg,[["render",Wg]]),qg={name:"Gamers",props:{games:Array,title:String,totalGames:Number,gameNumber:Number,gameMode:Number},data(){return{}},computed:{},created(){},methods:{getRanking(e){return e.ranking}}},Kg={class:"col-xs-12 col-sm-4 mt-3 mt-md-0 pt-3"},Qg={class:"fw-bold"},Xg={class:"list-group"},Jg={class:"float-end"};function Zg(e,t,s,n,i,o){const r=Rt("router-link");return _(),T("div",Kg,[m("span",Qg,j(s.title),1),m("ul",Xg,[(_(!0),T(ce,null,gt(s.games,(a,l)=>(_(),T("li",{key:a,class:Pe(["list-group-item",[l%2==0?"bg-success p-2 text-dark bg-opacity-25":"bg-success p-2 text-dark bg-opacity-10"]])},[re(r,{to:{name:"Profile",params:{selectedName:a.nickname}},class:"games-profile-link float-start"},{default:rt(()=>[ee(j(l+1)+". "+j(a.nickname),1)]),_:2},1032,["to"]),m("span",Jg,j(o.getRanking(a)),1)],2))),128))]),ee(" Games "+j(s.totalGames),1)])}const eb=Fe(qg,[["render",Zg]]),tb=De({name:"TopLists",components:{Gamers:eb},data(){return{connectFours:[],tictactoes:[],eightBalls:[],yatzyClassics:[],yatzyFasts:[],yatzySupers:[],yatzyHypers:[],errorFlag:!1,dateTime:void 0,totalConnectFours:0,totalTictactoes:0,totalEightBalls:0,totalYatzyClassics:0,totalYatzyFasts:0,totalYatzyHypers:0,totalYatzySupers:0}},computed:{},created(){this.fetchLists()},methods:{fetchLists(){console.log("Ui starts fetch"),this.errorFlag=!1;const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:null}},t="http://35.217.7.146/portal/api/toplists";this.$store.dispatch("setLoadingStatus",!0),fetch(t,e).then(s=>s.status!==200?Promise.reject("error fetching lists"):s.json()).then(s=>{this.connectFours=s.connectFours,this.tictactoes=s.tictactoes,this.eightBalls=s.eightBalls,this.yatzyClassics=s.yatzyClassics,this.yatzyFasts=s.yatzyFasts,this.yatzySupers=s.yatzySupers,this.yatzyHypers=s.yatzyHypers,this.dateTime=new Date(s.instant).toLocaleString(),this.totalConnectFours=s.totalConnectFours,this.totalTictactoes=s.totalTictactoes,this.totalEightBalls=s.totalEightBalls,this.totalYatzyClassics=s.totalYatzyClassics,this.totalYatzyFasts=s.totalYatzyFasts,this.totalYatzySupers=s.totalYatzySupers,this.totalYatzyHypers=s.totalYatzyHypers},s=>{this.errorFlag=!0}).finally(()=>{this.$store.dispatch("setLoadingStatus",!1)})}}}),sb={class:"row mt-3"},nb=m("span",{class:"fw-bold"}," Hall of fame ",-1),ib=m("br",null,null,-1);function ob(e,t,s,n,i,o){const r=Rt("Gamers");return _(),T("div",sb,[m("p",null,[nb,ib,ee(" "+j(e.dateTime),1)]),re(r,{games:e.yatzyClassics,totalGames:e.totalYatzyClassics,gameNumber:4,gameMode:40,title:"Yatzy classic"},null,8,["games","totalGames"]),re(r,{games:e.yatzyFasts,totalGames:e.totalYatzyFasts,gameNumber:4,gameMode:41,title:"Yatzy fast"},null,8,["games","totalGames"]),re(r,{games:e.yatzySupers,totalGames:e.totalYatzySupers,gameNumber:4,gameMode:42,title:"Yatzy super"},null,8,["games","totalGames"]),re(r,{games:e.yatzyHypers,totalGames:e.totalYatzyHypers,gameNumber:4,gameMode:43,title:"Yatzy hyper"},null,8,["games","totalGames"]),re(r,{games:e.eightBalls,totalGames:e.totalEightBalls,gameNumber:3,title:"Eight ball"},null,8,["games","totalGames"]),re(r,{games:e.connectFours,totalGames:e.totalConnectFours,gameNumber:2,title:"ConnectFour"},null,8,["games","totalGames"]),re(r,{games:e.tictactoes,totalGames:e.totalTictactoes,gameNumber:1,title:"TicTacToe"},null,8,["games","totalGames"])])}const rb=Fe(tb,[["render",ob]]),ab=De({components:{Chat:Gi},name:"TableConnectFour",mixins:[Ct,Ui],props:["watch"],data(){return{canvas:null,renderingContext:null,showLastVal:!1,soundOn:!1,secondsLeft:120,startingPosX:-1,startingPosY:-1,gameBoardHeight:-1,gameBoardWidth:-1,arcDiameter:-1,selectedColumn:-1}},created(){this.unsubscribeAction=this.$store.subscribeAction((e,t)=>{e.type==="currentTableIsClosed"&&(this.stopReducer(),this.theTable.playerInTurn=null)}),this.unsubscribe=this.$store.subscribe((e,t)=>{if(e.type==="move")t.theTable.board,this.removeLastSquareHighLightning(),this.drawToken(this.theTable.board[this.theTable.board.length-1]),this.playMoveNotification(),this.highlightLastSquareIfSelected();else if(e.type==="changeTurn")t.theTable.playerInTurn.name===this.userName?(this.addMouseListeners(),this.startReducer()):(this.removeMouseListeners(),this.clearCircleIndicatorRow(),this.stopReducer());else if(e.type==="rematch")this.removeMouseListeners(),this.initBoard(),this.isMyTurnInStore()&&this.startReducer();else if(e.type==="updateWinner"){const s=t.theTable.win;this.stopReducer(),this.removeMouseListeners(),this.drawWinningLine(s)}else(e.type==="setDraw"||e.type==="resign")&&(this.stopReducer(),this.removeMouseListeners())})},computed:{timeLeft(){return this.secondsLeft},theTable(){return this.$store.getters.theTable},watchers(){return this.$store.getters.theTable.watchers},resignButtonDisabled(){return this.$store.getters.theTable,this.watch||this.theTable&&!this.theTable.playerInTurn||this.theTable.playerInTurn.name!==this.userName?!0:!!(this.theTable&&this.theTable.board&&this.theTable.board.length<4)},rematchButtonEnabled(){const e=this.$store.getters.theTable;return!this.watch&&e.playerInTurn===null},resignButtonVisible(){var e,t,s,n;return this.userName===((t=(e=this.theTable)==null?void 0:e.playerA)==null?void 0:t.name)||this.userName===((n=(s=this.theTable)==null?void 0:s.playerB)==null?void 0:n.name)}},mounted(){if(!this.$store.getters.theTable){this.$router.push("/error");return}this.initBoard(),this.watch==="1"&&this.drawBoard()},beforeUnmount(){this.unsubscribeAction(),this.unsubscribe(),this.stopReducer(),this.leaveTable()},methods:{startReducer(){this.redurcerInterval&&this.stopReducer(),this.secondsLeft=120,this.redurcerInterval=setInterval(()=>{this.secondsLeft--,this.secondsLeft<=0&&(this.stopReducer(),this.resign())},1e3)},stopReducer(){clearInterval(this.redurcerInterval),this.secondsLeft=null},highlightLastSquareIfSelected(){if(this.showLastVal&&this.theTable.board.length>1){const e=this.theTable.board,t=e[e.length-1];this.drawToken(t,"#FF0000")}},playMoveNotification(){if(this.soundOn){const e=new window.AudioContext,t=e.createOscillator();t.type="sine",t.frequency.setValueAtTime(446,e.currentTime),t.connect(e.destination),t.start(),setTimeout(()=>{t.stop()},250)}},removeLastSquareHighLightning(){if(this.theTable.board.length>1){const e=this.theTable.board,t=e[e.length-2];this.drawToken(t,"#000000")}},removeMouseListeners(){this.canvas.removeEventListener("click",this.handleClick,!1),this.canvas.removeEventListener("mousemove",this.handleCircleIndicator)},addMouseListeners(){this.canvas.addEventListener("click",this.handleClick,!1),this.canvas.addEventListener("mousemove",this.handleCircleIndicator)},handleCircleIndicator(e){var s,n,i;const t=Math.floor((e.offsetX-this.startingPosX)/this.arcDiameter)+1;if(t!=this.column&&t>0&&t<=this.theTable.x){const o=this.column*(this.arcDiameter/2);this.renderingContext.clearRect(o,0,o+this.arcDiameter,this.arcDiameter-3),this.column=t;const r=this.arcDiameter*this.column,a=this.arcDiameter/2;this.renderingContext.fillStyle="red",((n=(s=this.theTable)==null?void 0:s.playerInTurn)==null?void 0:n.gameToken)===wi.X&&this.userName===((i=this.theTable)==null?void 0:i.playerInTurn.name)&&(this.renderingContext.fillStyle="blue"),this.renderingContext.beginPath(),this.renderingContext.arc(r,a,23,0,2*Math.PI),this.renderingContext.fill()}},clearCircleIndicatorRow(){this.column=-1,this.renderingContext.clearRect(0,0,this.gameBoardWidth,this.arcDiameter-3)},drawWinningLine(e){this.renderingContext.beginPath();const t=(e.fromY+1)*this.arcDiameter,s=(e.fromX+1)*this.arcDiameter+this.arcDiameter/2,n=(e.toY+1)*this.arcDiameter,i=(e.toX+1)*this.arcDiameter+this.arcDiameter/2;this.renderingContext.moveTo(t,s),this.renderingContext.lineTo(n,i),this.renderingContext.strokeStyle="#00FFFF",this.renderingContext.lineWidth=5,this.renderingContext.stroke()},initBoard(){var t;const e=this.theTable;this.canvas=document.getElementById("canvas"),this.renderingContext=this.canvas.getContext("2d"),this.canvas.height=440,this.canvas.width=440,e.x>=10&&e.x<=20?(this.canvas.height=620,this.canvas.width=620):e.x>20&&(this.canvas.height=800,this.canvas.width=800),this.arcDiameter=this.canvas.width/(e.x+1),this.drawBoardFrame(e),this.drawBoardLines(e),((t=this.theTable.playerInTurn)==null?void 0:t.name)===this.userName&&this.addMouseListeners()},drawBoardFrame(e){this.gapBetweenArcs=28,this.gameBoardHeight=e.y*this.arcDiameter,this.gameBoardWidth=e.x*this.arcDiameter,this.startingPosX=this.gapBetweenArcs,this.startingPosY=this.arcDiameter,this.renderingContext.beginPath(),this.renderingContext.rect(this.startingPosX,this.startingPosY,this.gameBoardWidth,this.gameBoardHeight),this.renderingContext.stroke()},drawBoardLines(e){for(let t=0;t<e.x;t++)for(let s=0;s<e.y+1;s++){if(s===0)continue;const n=this.arcDiameter*t+this.arcDiameter,i=this.arcDiameter*s+this.gapBetweenArcs;this.renderingContext.beginPath(),this.renderingContext.arc(n,i,25,0,2*Math.PI),this.renderingContext.stroke()}},drawBoard(){this.theTable.board.forEach(t=>{this.drawToken(t)})},drawToken(e,t){e.token==wi.O?this.renderingContext.fillStyle="red":this.renderingContext.fillStyle="blue";const n=this.arcDiameter*(e.x+1)+this.gapBetweenArcs,i=this.arcDiameter*e.y+this.arcDiameter;this.renderingContext.beginPath(),this.renderingContext.arc(i,n,23,0,2*Math.PI),this.renderingContext.stroke(),this.renderingContext.fill()},handleClick(e){const t={title:"MOVE",message:this.theTable.tableId,y:this.column-1};this.user.webSocket.send(JSON.stringify(t))},disableBoard(){return this.renderingContext.font="30px Arial",this.renderingContext.fillText("Game over",10,this.canvas.height/2),!0},rematch(){const e={title:"REMATCH",message:""};this.user.webSocket.send(JSON.stringify(e))},resign(){const e={title:"RESIGN",message:this.tablea};this.user.webSocket.send(JSON.stringify(e))},leaveTable(){var t,s;const e={title:"LEAVE_TABLE",message:this.theTable.tableId};(s=(t=this==null?void 0:this.user)==null?void 0:t.webSocket)==null||s.send(JSON.stringify(e))}}});const Ps=e=>(hn("data-v-7efa9c6e"),e=e(),dn(),e),lb={class:"row"},cb={class:"col"},ub=["disabled"],hb={class:"row"},db={class:"col-xs-12 col-sm-4"},fb=ee(" Connect 4 table "),pb=Ps(()=>m("br",null,null,-1)),mb=Ps(()=>m("label",{class:"form-check-label ms-1",for:"highlight"},"Highlight last",-1)),gb=Ps(()=>m("br",null,null,-1)),bb=Ps(()=>m("label",{class:"form-check-label ms-1",for:"soundOn"},"Notification sound",-1)),yb=Ps(()=>m("br",null,null,-1)),vb=Ps(()=>m("br",null,null,-1)),_b=ee(" vs. "),Tb=Ps(()=>m("br",null,null,-1)),wb={key:2,class:"text-success"},Eb={key:3,class:"text-success"},Cb={key:4,class:"text-danger"},xb={class:"text-danger"},Sb={class:"col-xs-12 col-sm-8"};function kb(e,t,s,n,i,o){var a,l,h,u,c,p,b,x,L,I,w,H,Y,R,X,J,ne,se;const r=Rt("chat");return _(),T(ce,null,[m("div",lb,[m("div",cb,[e.resignButtonVisible?(_(),T("button",{key:0,disabled:e.resignButtonDisabled,onClick:t[0]||(t[0]=(...Q)=>e.resign&&e.resign(...Q)),type:"button",class:"btn btn-primary w-30 float-xs-start float-sm-end"}," Resign ",8,ub)):F("",!0),e.rematchButtonEnabled?(_(),T("button",{key:1,onClick:t[1]||(t[1]=(...Q)=>e.rematch&&e.rematch(...Q)),type:"button",class:"btn btn-primary w-30 float-xs-start float-sm-end"}," Rematch ")):F("",!0)])]),m("div",hb,[m("div",db,[fb,pb,Me(m("input",{class:"form-check-input",type:"checkbox",id:"highlight",onChange:t[2]||(t[2]=(...Q)=>e.highlightLastSquareIfSelected&&e.highlightLastSquareIfSelected(...Q)),"onUpdate:modelValue":t[3]||(t[3]=Q=>e.showLastVal=Q)},null,544),[[wt,e.showLastVal]]),mb,gb,Me(m("input",{class:"form-check-input",type:"checkbox",id:"soundOn","onUpdate:modelValue":t[4]||(t[4]=Q=>e.soundOn=Q)},null,512),[[wt,e.soundOn]]),bb,yb,e.theTable.playerA?(_(),T("span",{key:0,class:Pe(["fw-bold",{"text-success":((a=e.theTable.playerInTurn)==null?void 0:a.name)===((h=(l=e.theTable)==null?void 0:l.playerA)==null?void 0:h.name)}])},j((c=(u=e.theTable)==null?void 0:u.playerA)==null?void 0:c.gameToken)+" = "+j((b=(p=e.theTable)==null?void 0:p.playerA)==null?void 0:b.name),3)):F("",!0),vb,_b,Tb,e.theTable.playerB?(_(),T("span",{key:1,class:Pe(["fw-bold",{"text-success":((x=e.theTable.playerInTurn)==null?void 0:x.name)===((I=(L=e.theTable)==null?void 0:L.playerB)==null?void 0:I.name)}])},j((H=(w=e.theTable)==null?void 0:w.playerB)==null?void 0:H.gameToken)+" = "+j((R=(Y=e.theTable)==null?void 0:Y.playerB)==null?void 0:R.name),3)):F("",!0),((X=e.theTable.playerInTurn)==null?void 0:X.name)===e.userName?(_(),T("span",wb," It's your turn. ")):((J=e.theTable)==null?void 0:J.playerInTurn)===null?(_(),T("span",Eb," Game ended ")):(_(),T("div",Cb," In turn: "+j((ne=e.theTable.playerInTurn)==null?void 0:ne.name),1)),m("div",{class:Pe({hidden:((se=e.theTable.playerInTurn)==null?void 0:se.name)!==e.userName})},[m("span",xb," Time left "+j(e.timeLeft),1)],2)]),m("div",Sb,[m("canvas",{class:Pe({"bg-secondary":e.theTable.playerInTurn==null}),id:"canvas"},null,2)])]),re(r,{id:e.theTable.tableId},null,8,["id"])],64)}const Ab=Fe(ab,[["render",kb],["__scopeId","data-v-7efa9c6e"]]);var Je="top",ct="bottom",ut="right",Ze="left",Wi="auto",pn=[Je,ct,ut,Ze],Ss="start",Xs="end",$c="clippingParents",hr="viewport",Vs="popper",Nc="reference",Lo=pn.reduce(function(e,t){return e.concat([t+"-"+Ss,t+"-"+Xs])},[]),dr=[].concat(pn,[Wi]).reduce(function(e,t){return e.concat([t,t+"-"+Ss,t+"-"+Xs])},[]),Rc="beforeRead",Mc="read",Dc="afterRead",Bc="beforeMain",Hc="main",Vc="afterMain",Fc="beforeWrite",jc="write",Uc="afterWrite",zc=[Rc,Mc,Dc,Bc,Hc,Vc,Fc,jc,Uc];function Mt(e){return e?(e.nodeName||"").toLowerCase():null}function St(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Js(e){var t=St(e).Element;return e instanceof t||e instanceof Element}function ft(e){var t=St(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function fr(e){if(typeof ShadowRoot>"u")return!1;var t=St(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Ib(e){var t=e.state;Object.keys(t.elements).forEach(function(s){var n=t.styles[s]||{},i=t.attributes[s]||{},o=t.elements[s];!ft(o)||!Mt(o)||(Object.assign(o.style,n),Object.keys(i).forEach(function(r){var a=i[r];a===!1?o.removeAttribute(r):o.setAttribute(r,a===!0?"":a)}))})}function Pb(e){var t=e.state,s={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,s.popper),t.styles=s,t.elements.arrow&&Object.assign(t.elements.arrow.style,s.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],o=t.attributes[n]||{},r=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:s[n]),a=r.reduce(function(l,h){return l[h]="",l},{});!ft(i)||!Mt(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}const pr={name:"applyStyles",enabled:!0,phase:"write",fn:Ib,effect:Pb,requires:["computeStyles"]};function $t(e){return e.split("-")[0]}var Es=Math.max,Ci=Math.min,Zs=Math.round;function en(e,t){t===void 0&&(t=!1);var s=e.getBoundingClientRect(),n=1,i=1;if(ft(e)&&t){var o=e.offsetHeight,r=e.offsetWidth;r>0&&(n=Zs(s.width)/r||1),o>0&&(i=Zs(s.height)/o||1)}return{width:s.width/n,height:s.height/i,top:s.top/i,right:s.right/n,bottom:s.bottom/i,left:s.left/n,x:s.left/n,y:s.top/i}}function mr(e){var t=en(e),s=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-s)<=1&&(s=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:s,height:n}}function Gc(e,t){var s=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(s&&fr(s)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Ut(e){return St(e).getComputedStyle(e)}function Ob(e){return["table","td","th"].indexOf(Mt(e))>=0}function ls(e){return((Js(e)?e.ownerDocument:e.document)||window.document).documentElement}function Yi(e){return Mt(e)==="html"?e:e.assignedSlot||e.parentNode||(fr(e)?e.host:null)||ls(e)}function ma(e){return!ft(e)||Ut(e).position==="fixed"?null:e.offsetParent}function Lb(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,s=navigator.userAgent.indexOf("Trident")!==-1;if(s&&ft(e)){var n=Ut(e);if(n.position==="fixed")return null}var i=Yi(e);for(fr(i)&&(i=i.host);ft(i)&&["html","body"].indexOf(Mt(i))<0;){var o=Ut(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function zn(e){for(var t=St(e),s=ma(e);s&&Ob(s)&&Ut(s).position==="static";)s=ma(s);return s&&(Mt(s)==="html"||Mt(s)==="body"&&Ut(s).position==="static")?t:s||Lb(e)||t}function gr(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Sn(e,t,s){return Es(e,Ci(t,s))}function $b(e,t,s){var n=Sn(e,t,s);return n>s?s:n}function Wc(){return{top:0,right:0,bottom:0,left:0}}function Yc(e){return Object.assign({},Wc(),e)}function qc(e,t){return t.reduce(function(s,n){return s[n]=e,s},{})}var Nb=function(t,s){return t=typeof t=="function"?t(Object.assign({},s.rects,{placement:s.placement})):t,Yc(typeof t!="number"?t:qc(t,pn))};function Rb(e){var t,s=e.state,n=e.name,i=e.options,o=s.elements.arrow,r=s.modifiersData.popperOffsets,a=$t(s.placement),l=gr(a),h=[Ze,ut].indexOf(a)>=0,u=h?"height":"width";if(!(!o||!r)){var c=Nb(i.padding,s),p=mr(o),b=l==="y"?Je:Ze,x=l==="y"?ct:ut,L=s.rects.reference[u]+s.rects.reference[l]-r[l]-s.rects.popper[u],I=r[l]-s.rects.reference[l],w=zn(o),H=w?l==="y"?w.clientHeight||0:w.clientWidth||0:0,Y=L/2-I/2,R=c[b],X=H-p[u]-c[x],J=H/2-p[u]/2+Y,ne=Sn(R,J,X),se=l;s.modifiersData[n]=(t={},t[se]=ne,t.centerOffset=ne-J,t)}}function Mb(e){var t=e.state,s=e.options,n=s.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||!Gc(t.elements.popper,i)||(t.elements.arrow=i))}const Kc={name:"arrow",enabled:!0,phase:"main",fn:Rb,effect:Mb,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function tn(e){return e.split("-")[1]}var Db={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Bb(e){var t=e.x,s=e.y,n=window,i=n.devicePixelRatio||1;return{x:Zs(t*i)/i||0,y:Zs(s*i)/i||0}}function ga(e){var t,s=e.popper,n=e.popperRect,i=e.placement,o=e.variation,r=e.offsets,a=e.position,l=e.gpuAcceleration,h=e.adaptive,u=e.roundOffsets,c=e.isFixed,p=r.x,b=p===void 0?0:p,x=r.y,L=x===void 0?0:x,I=typeof u=="function"?u({x:b,y:L}):{x:b,y:L};b=I.x,L=I.y;var w=r.hasOwnProperty("x"),H=r.hasOwnProperty("y"),Y=Ze,R=Je,X=window;if(h){var J=zn(s),ne="clientHeight",se="clientWidth";if(J===St(s)&&(J=ls(s),Ut(J).position!=="static"&&a==="absolute"&&(ne="scrollHeight",se="scrollWidth")),J=J,i===Je||(i===Ze||i===ut)&&o===Xs){R=ct;var Q=c&&J===X&&X.visualViewport?X.visualViewport.height:J[ne];L-=Q-n.height,L*=l?1:-1}if(i===Ze||(i===Je||i===ct)&&o===Xs){Y=ut;var we=c&&J===X&&X.visualViewport?X.visualViewport.width:J[se];b-=we-n.width,b*=l?1:-1}}var Te=Object.assign({position:a},h&&Db),Ae=u===!0?Bb({x:b,y:L}):{x:b,y:L};if(b=Ae.x,L=Ae.y,l){var Oe;return Object.assign({},Te,(Oe={},Oe[R]=H?"0":"",Oe[Y]=w?"0":"",Oe.transform=(X.devicePixelRatio||1)<=1?"translate("+b+"px, "+L+"px)":"translate3d("+b+"px, "+L+"px, 0)",Oe))}return Object.assign({},Te,(t={},t[R]=H?L+"px":"",t[Y]=w?b+"px":"",t.transform="",t))}function Hb(e){var t=e.state,s=e.options,n=s.gpuAcceleration,i=n===void 0?!0:n,o=s.adaptive,r=o===void 0?!0:o,a=s.roundOffsets,l=a===void 0?!0:a,h={placement:$t(t.placement),variation:tn(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,ga(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:r,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,ga(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const br={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Hb,data:{}};var ii={passive:!0};function Vb(e){var t=e.state,s=e.instance,n=e.options,i=n.scroll,o=i===void 0?!0:i,r=n.resize,a=r===void 0?!0:r,l=St(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&h.forEach(function(u){u.addEventListener("scroll",s.update,ii)}),a&&l.addEventListener("resize",s.update,ii),function(){o&&h.forEach(function(u){u.removeEventListener("scroll",s.update,ii)}),a&&l.removeEventListener("resize",s.update,ii)}}const yr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Vb,data:{}};var Fb={left:"right",right:"left",bottom:"top",top:"bottom"};function mi(e){return e.replace(/left|right|bottom|top/g,function(t){return Fb[t]})}var jb={start:"end",end:"start"};function ba(e){return e.replace(/start|end/g,function(t){return jb[t]})}function vr(e){var t=St(e),s=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:s,scrollTop:n}}function _r(e){return en(ls(e)).left+vr(e).scrollLeft}function Ub(e){var t=St(e),s=ls(e),n=t.visualViewport,i=s.clientWidth,o=s.clientHeight,r=0,a=0;return n&&(i=n.width,o=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(r=n.offsetLeft,a=n.offsetTop)),{width:i,height:o,x:r+_r(e),y:a}}function zb(e){var t,s=ls(e),n=vr(e),i=(t=e.ownerDocument)==null?void 0:t.body,o=Es(s.scrollWidth,s.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),r=Es(s.scrollHeight,s.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-n.scrollLeft+_r(e),l=-n.scrollTop;return Ut(i||s).direction==="rtl"&&(a+=Es(s.clientWidth,i?i.clientWidth:0)-o),{width:o,height:r,x:a,y:l}}function Tr(e){var t=Ut(e),s=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(s+i+n)}function Qc(e){return["html","body","#document"].indexOf(Mt(e))>=0?e.ownerDocument.body:ft(e)&&Tr(e)?e:Qc(Yi(e))}function kn(e,t){var s;t===void 0&&(t=[]);var n=Qc(e),i=n===((s=e.ownerDocument)==null?void 0:s.body),o=St(n),r=i?[o].concat(o.visualViewport||[],Tr(n)?n:[]):n,a=t.concat(r);return i?a:a.concat(kn(Yi(r)))}function $o(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Gb(e){var t=en(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function ya(e,t){return t===hr?$o(Ub(e)):Js(t)?Gb(t):$o(zb(ls(e)))}function Wb(e){var t=kn(Yi(e)),s=["absolute","fixed"].indexOf(Ut(e).position)>=0,n=s&&ft(e)?zn(e):e;return Js(n)?t.filter(function(i){return Js(i)&&Gc(i,n)&&Mt(i)!=="body"}):[]}function Yb(e,t,s){var n=t==="clippingParents"?Wb(e):[].concat(t),i=[].concat(n,[s]),o=i[0],r=i.reduce(function(a,l){var h=ya(e,l);return a.top=Es(h.top,a.top),a.right=Ci(h.right,a.right),a.bottom=Ci(h.bottom,a.bottom),a.left=Es(h.left,a.left),a},ya(e,o));return r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}function Xc(e){var t=e.reference,s=e.element,n=e.placement,i=n?$t(n):null,o=n?tn(n):null,r=t.x+t.width/2-s.width/2,a=t.y+t.height/2-s.height/2,l;switch(i){case Je:l={x:r,y:t.y-s.height};break;case ct:l={x:r,y:t.y+t.height};break;case ut:l={x:t.x+t.width,y:a};break;case Ze:l={x:t.x-s.width,y:a};break;default:l={x:t.x,y:t.y}}var h=i?gr(i):null;if(h!=null){var u=h==="y"?"height":"width";switch(o){case Ss:l[h]=l[h]-(t[u]/2-s[u]/2);break;case Xs:l[h]=l[h]+(t[u]/2-s[u]/2);break}}return l}function sn(e,t){t===void 0&&(t={});var s=t,n=s.placement,i=n===void 0?e.placement:n,o=s.boundary,r=o===void 0?$c:o,a=s.rootBoundary,l=a===void 0?hr:a,h=s.elementContext,u=h===void 0?Vs:h,c=s.altBoundary,p=c===void 0?!1:c,b=s.padding,x=b===void 0?0:b,L=Yc(typeof x!="number"?x:qc(x,pn)),I=u===Vs?Nc:Vs,w=e.rects.popper,H=e.elements[p?I:u],Y=Yb(Js(H)?H:H.contextElement||ls(e.elements.popper),r,l),R=en(e.elements.reference),X=Xc({reference:R,element:w,strategy:"absolute",placement:i}),J=$o(Object.assign({},w,X)),ne=u===Vs?J:R,se={top:Y.top-ne.top+L.top,bottom:ne.bottom-Y.bottom+L.bottom,left:Y.left-ne.left+L.left,right:ne.right-Y.right+L.right},Q=e.modifiersData.offset;if(u===Vs&&Q){var we=Q[i];Object.keys(se).forEach(function(Te){var Ae=[ut,ct].indexOf(Te)>=0?1:-1,Oe=[Je,ct].indexOf(Te)>=0?"y":"x";se[Te]+=we[Oe]*Ae})}return se}function qb(e,t){t===void 0&&(t={});var s=t,n=s.placement,i=s.boundary,o=s.rootBoundary,r=s.padding,a=s.flipVariations,l=s.allowedAutoPlacements,h=l===void 0?dr:l,u=tn(n),c=u?a?Lo:Lo.filter(function(x){return tn(x)===u}):pn,p=c.filter(function(x){return h.indexOf(x)>=0});p.length===0&&(p=c);var b=p.reduce(function(x,L){return x[L]=sn(e,{placement:L,boundary:i,rootBoundary:o,padding:r})[$t(L)],x},{});return Object.keys(b).sort(function(x,L){return b[x]-b[L]})}function Kb(e){if($t(e)===Wi)return[];var t=mi(e);return[ba(e),t,ba(t)]}function Qb(e){var t=e.state,s=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=s.mainAxis,o=i===void 0?!0:i,r=s.altAxis,a=r===void 0?!0:r,l=s.fallbackPlacements,h=s.padding,u=s.boundary,c=s.rootBoundary,p=s.altBoundary,b=s.flipVariations,x=b===void 0?!0:b,L=s.allowedAutoPlacements,I=t.options.placement,w=$t(I),H=w===I,Y=l||(H||!x?[mi(I)]:Kb(I)),R=[I].concat(Y).reduce(function(Ke,E){return Ke.concat($t(E)===Wi?qb(t,{placement:E,boundary:u,rootBoundary:c,padding:h,flipVariations:x,allowedAutoPlacements:L}):E)},[]),X=t.rects.reference,J=t.rects.popper,ne=new Map,se=!0,Q=R[0],we=0;we<R.length;we++){var Te=R[we],Ae=$t(Te),Oe=tn(Te)===Ss,Ye=[Je,ct].indexOf(Ae)>=0,qe=Ye?"width":"height",de=sn(t,{placement:Te,boundary:u,rootBoundary:c,altBoundary:p,padding:h}),le=Ye?Oe?ut:Ze:Oe?ct:Je;X[qe]>J[qe]&&(le=mi(le));var pe=mi(le),ke=[];if(o&&ke.push(de[Ae]<=0),a&&ke.push(de[le]<=0,de[pe]<=0),ke.every(function(Ke){return Ke})){Q=Te,se=!1;break}ne.set(Te,ke)}if(se)for(var it=x?3:1,Le=function(E){var V=R.find(function(D){var U=ne.get(D);if(U)return U.slice(0,E).every(function(ge){return ge})});if(V)return Q=V,"break"},Be=it;Be>0;Be--){var Ne=Le(Be);if(Ne==="break")break}t.placement!==Q&&(t.modifiersData[n]._skip=!0,t.placement=Q,t.reset=!0)}}const Jc={name:"flip",enabled:!0,phase:"main",fn:Qb,requiresIfExists:["offset"],data:{_skip:!1}};function va(e,t,s){return s===void 0&&(s={x:0,y:0}),{top:e.top-t.height-s.y,right:e.right-t.width+s.x,bottom:e.bottom-t.height+s.y,left:e.left-t.width-s.x}}function _a(e){return[Je,ut,ct,Ze].some(function(t){return e[t]>=0})}function Xb(e){var t=e.state,s=e.name,n=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,r=sn(t,{elementContext:"reference"}),a=sn(t,{altBoundary:!0}),l=va(r,n),h=va(a,i,o),u=_a(l),c=_a(h);t.modifiersData[s]={referenceClippingOffsets:l,popperEscapeOffsets:h,isReferenceHidden:u,hasPopperEscaped:c},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":c})}const Zc={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Xb};function Jb(e,t,s){var n=$t(e),i=[Ze,Je].indexOf(n)>=0?-1:1,o=typeof s=="function"?s(Object.assign({},t,{placement:e})):s,r=o[0],a=o[1];return r=r||0,a=(a||0)*i,[Ze,ut].indexOf(n)>=0?{x:a,y:r}:{x:r,y:a}}function Zb(e){var t=e.state,s=e.options,n=e.name,i=s.offset,o=i===void 0?[0,0]:i,r=dr.reduce(function(u,c){return u[c]=Jb(c,t.rects,o),u},{}),a=r[t.placement],l=a.x,h=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=h),t.modifiersData[n]=r}const eu={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Zb};function ey(e){var t=e.state,s=e.name;t.modifiersData[s]=Xc({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const wr={name:"popperOffsets",enabled:!0,phase:"read",fn:ey,data:{}};function ty(e){return e==="x"?"y":"x"}function sy(e){var t=e.state,s=e.options,n=e.name,i=s.mainAxis,o=i===void 0?!0:i,r=s.altAxis,a=r===void 0?!1:r,l=s.boundary,h=s.rootBoundary,u=s.altBoundary,c=s.padding,p=s.tether,b=p===void 0?!0:p,x=s.tetherOffset,L=x===void 0?0:x,I=sn(t,{boundary:l,rootBoundary:h,padding:c,altBoundary:u}),w=$t(t.placement),H=tn(t.placement),Y=!H,R=gr(w),X=ty(R),J=t.modifiersData.popperOffsets,ne=t.rects.reference,se=t.rects.popper,Q=typeof L=="function"?L(Object.assign({},t.rects,{placement:t.placement})):L,we=typeof Q=="number"?{mainAxis:Q,altAxis:Q}:Object.assign({mainAxis:0,altAxis:0},Q),Te=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Ae={x:0,y:0};if(!!J){if(o){var Oe,Ye=R==="y"?Je:Ze,qe=R==="y"?ct:ut,de=R==="y"?"height":"width",le=J[R],pe=le+I[Ye],ke=le-I[qe],it=b?-se[de]/2:0,Le=H===Ss?ne[de]:se[de],Be=H===Ss?-se[de]:-ne[de],Ne=t.elements.arrow,Ke=b&&Ne?mr(Ne):{width:0,height:0},E=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Wc(),V=E[Ye],D=E[qe],U=Sn(0,ne[de],Ke[de]),ge=Y?ne[de]/2-it-U-V-we.mainAxis:Le-U-V-we.mainAxis,ye=Y?-ne[de]/2+it+U+D+we.mainAxis:Be+U+D+we.mainAxis,ae=t.elements.arrow&&zn(t.elements.arrow),oe=ae?R==="y"?ae.clientTop||0:ae.clientLeft||0:0,f=(Oe=Te==null?void 0:Te[R])!=null?Oe:0,g=le+ge-f-oe,v=le+ye-f,k=Sn(b?Ci(pe,g):pe,le,b?Es(ke,v):ke);J[R]=k,Ae[R]=k-le}if(a){var S,N=R==="x"?Je:Ze,B=R==="x"?ct:ut,$=J[X],M=X==="y"?"height":"width",P=$+I[N],K=$-I[B],z=[Je,Ze].indexOf(w)!==-1,q=(S=Te==null?void 0:Te[X])!=null?S:0,Z=z?P:$-ne[M]-se[M]-q+we.altAxis,he=z?$+ne[M]+se[M]-q-we.altAxis:K,be=b&&z?$b(Z,$,he):Sn(b?Z:P,$,b?he:K);J[X]=be,Ae[X]=be-$}t.modifiersData[n]=Ae}}const tu={name:"preventOverflow",enabled:!0,phase:"main",fn:sy,requiresIfExists:["offset"]};function ny(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function iy(e){return e===St(e)||!ft(e)?vr(e):ny(e)}function oy(e){var t=e.getBoundingClientRect(),s=Zs(t.width)/e.offsetWidth||1,n=Zs(t.height)/e.offsetHeight||1;return s!==1||n!==1}function ry(e,t,s){s===void 0&&(s=!1);var n=ft(t),i=ft(t)&&oy(t),o=ls(t),r=en(e,i),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!s)&&((Mt(t)!=="body"||Tr(o))&&(a=iy(t)),ft(t)?(l=en(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=_r(o))),{x:r.left+a.scrollLeft-l.x,y:r.top+a.scrollTop-l.y,width:r.width,height:r.height}}function ay(e){var t=new Map,s=new Set,n=[];e.forEach(function(o){t.set(o.name,o)});function i(o){s.add(o.name);var r=[].concat(o.requires||[],o.requiresIfExists||[]);r.forEach(function(a){if(!s.has(a)){var l=t.get(a);l&&i(l)}}),n.push(o)}return e.forEach(function(o){s.has(o.name)||i(o)}),n}function ly(e){var t=ay(e);return zc.reduce(function(s,n){return s.concat(t.filter(function(i){return i.phase===n}))},[])}function cy(e){var t;return function(){return t||(t=new Promise(function(s){Promise.resolve().then(function(){t=void 0,s(e())})})),t}}function uy(e){var t=e.reduce(function(s,n){var i=s[n.name];return s[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,s},{});return Object.keys(t).map(function(s){return t[s]})}var Ta={placement:"bottom",modifiers:[],strategy:"absolute"};function wa(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function qi(e){e===void 0&&(e={});var t=e,s=t.defaultModifiers,n=s===void 0?[]:s,i=t.defaultOptions,o=i===void 0?Ta:i;return function(a,l,h){h===void 0&&(h=o);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ta,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},c=[],p=!1,b={state:u,setOptions:function(w){var H=typeof w=="function"?w(u.options):w;L(),u.options=Object.assign({},o,u.options,H),u.scrollParents={reference:Js(a)?kn(a):a.contextElement?kn(a.contextElement):[],popper:kn(l)};var Y=ly(uy([].concat(n,u.options.modifiers)));return u.orderedModifiers=Y.filter(function(R){return R.enabled}),x(),b.update()},forceUpdate:function(){if(!p){var w=u.elements,H=w.reference,Y=w.popper;if(!!wa(H,Y)){u.rects={reference:ry(H,zn(Y),u.options.strategy==="fixed"),popper:mr(Y)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(we){return u.modifiersData[we.name]=Object.assign({},we.data)});for(var R=0;R<u.orderedModifiers.length;R++){if(u.reset===!0){u.reset=!1,R=-1;continue}var X=u.orderedModifiers[R],J=X.fn,ne=X.options,se=ne===void 0?{}:ne,Q=X.name;typeof J=="function"&&(u=J({state:u,options:se,name:Q,instance:b})||u)}}}},update:cy(function(){return new Promise(function(I){b.forceUpdate(),I(u)})}),destroy:function(){L(),p=!0}};if(!wa(a,l))return b;b.setOptions(h).then(function(I){!p&&h.onFirstUpdate&&h.onFirstUpdate(I)});function x(){u.orderedModifiers.forEach(function(I){var w=I.name,H=I.options,Y=H===void 0?{}:H,R=I.effect;if(typeof R=="function"){var X=R({state:u,name:w,instance:b,options:Y}),J=function(){};c.push(X||J)}})}function L(){c.forEach(function(I){return I()}),c=[]}return b}}var hy=qi(),dy=[yr,wr,br,pr],fy=qi({defaultModifiers:dy}),py=[yr,wr,br,pr,eu,Jc,tu,Kc,Zc],Er=qi({defaultModifiers:py});const su=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:qi,detectOverflow:sn,createPopperBase:hy,createPopper:Er,createPopperLite:fy,top:Je,bottom:ct,right:ut,left:Ze,auto:Wi,basePlacements:pn,start:Ss,end:Xs,clippingParents:$c,viewport:hr,popper:Vs,reference:Nc,variationPlacements:Lo,placements:dr,beforeRead:Rc,read:Mc,afterRead:Dc,beforeMain:Bc,main:Hc,afterMain:Vc,beforeWrite:Fc,write:jc,afterWrite:Uc,modifierPhases:zc,applyStyles:pr,arrow:Kc,computeStyles:br,eventListeners:yr,flip:Jc,hide:Zc,offset:eu,popperOffsets:wr,preventOverflow:tu},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const No="transitionend",my=e=>{do e+=Math.floor(1e6*Math.random());while(document.getElementById(e));return e},nu=e=>{let t=e.getAttribute("data-bs-target");if(!t||t==="#"){let s=e.getAttribute("href");if(!s||!s.includes("#")&&!s.startsWith("."))return null;s.includes("#")&&!s.startsWith("#")&&(s=`#${s.split("#")[1]}`),t=s&&s!=="#"?s.trim():null}return t},Cr=e=>{const t=nu(e);return t&&document.querySelector(t)?t:null},rs=e=>{const t=nu(e);return t?document.querySelector(t):null},gy=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:s}=window.getComputedStyle(e);const n=Number.parseFloat(t),i=Number.parseFloat(s);return n||i?(t=t.split(",")[0],s=s.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(s))):0},iu=e=>{e.dispatchEvent(new Event(No))},ks=e=>!(!e||typeof e!="object")&&(e.jquery!==void 0&&(e=e[0]),e.nodeType!==void 0),as=e=>ks(e)?e.jquery?e[0]:e:typeof e=="string"&&e.length>0?document.querySelector(e):null,Dt=(e,t,s)=>{Object.keys(s).forEach(n=>{const i=s[n],o=t[n],r=o&&ks(o)?"element":(a=o)==null?`${a}`:{}.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase();var a;if(!new RegExp(i).test(r))throw new TypeError(`${e.toUpperCase()}: Option "${n}" provided type "${r}" but expected type "${i}".`)})},Gn=e=>!(!ks(e)||e.getClientRects().length===0)&&getComputedStyle(e).getPropertyValue("visibility")==="visible",Cs=e=>!e||e.nodeType!==Node.ELEMENT_NODE||!!e.classList.contains("disabled")||(e.disabled!==void 0?e.disabled:e.hasAttribute("disabled")&&e.getAttribute("disabled")!=="false"),ou=e=>{if(!document.documentElement.attachShadow)return null;if(typeof e.getRootNode=="function"){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?ou(e.parentNode):null},xi=()=>{},mn=e=>{e.offsetHeight},ru=()=>{const{jQuery:e}=window;return e&&!document.body.hasAttribute("data-bs-no-jquery")?e:null},ao=[],st=()=>document.documentElement.dir==="rtl",mt=e=>{var t;t=()=>{const s=ru();if(s){const n=e.NAME,i=s.fn[n];s.fn[n]=e.jQueryInterface,s.fn[n].Constructor=e,s.fn[n].noConflict=()=>(s.fn[n]=i,e.jQueryInterface)}},document.readyState==="loading"?(ao.length||document.addEventListener("DOMContentLoaded",()=>{ao.forEach(s=>s())}),ao.push(t)):t()},bs=e=>{typeof e=="function"&&e()},au=(e,t,s=!0)=>{if(!s)return void bs(e);const n=gy(t)+5;let i=!1;const o=({target:r})=>{r===t&&(i=!0,t.removeEventListener(No,o),bs(e))};t.addEventListener(No,o),setTimeout(()=>{i||iu(t)},n)},lu=(e,t,s,n)=>{let i=e.indexOf(t);if(i===-1)return e[!s&&n?e.length-1:0];const o=e.length;return i+=s?1:-1,n&&(i=(i+o)%o),e[Math.max(0,Math.min(i,o-1))]},by=/[^.]*(?=\..*)\.|.*/,yy=/\..*/,vy=/::\d+$/,lo={};let Ea=1;const _y={mouseenter:"mouseover",mouseleave:"mouseout"},Ty=/^(mouseenter|mouseleave)/i,cu=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function uu(e,t){return t&&`${t}::${Ea++}`||e.uidEvent||Ea++}function hu(e){const t=uu(e);return e.uidEvent=t,lo[t]=lo[t]||{},lo[t]}function wy(e,t){return function s(n){return n.delegateTarget=e,s.oneOff&&O.off(e,n.type,t),t.apply(e,[n])}}function Ey(e,t,s){return function n(i){const o=e.querySelectorAll(t);for(let{target:r}=i;r&&r!==this;r=r.parentNode)for(let a=o.length;a--;)if(o[a]===r)return i.delegateTarget=r,n.oneOff&&O.off(e,i.type,t,s),s.apply(r,[i]);return null}}function du(e,t,s=null){const n=Object.keys(e);for(let i=0,o=n.length;i<o;i++){const r=e[n[i]];if(r.originalHandler===t&&r.delegationSelector===s)return r}return null}function fu(e,t,s){const n=typeof t=="string",i=n?s:t;let o=pu(e);return cu.has(o)||(o=e),[n,i,o]}function Ca(e,t,s,n,i){if(typeof t!="string"||!e)return;if(s||(s=n,n=null),Ty.test(t)){const b=x=>function(L){if(!L.relatedTarget||L.relatedTarget!==L.delegateTarget&&!L.delegateTarget.contains(L.relatedTarget))return x.call(this,L)};n?n=b(n):s=b(s)}const[o,r,a]=fu(t,s,n),l=hu(e),h=l[a]||(l[a]={}),u=du(h,r,o?s:null);if(u)return void(u.oneOff=u.oneOff&&i);const c=uu(r,t.replace(by,"")),p=o?Ey(e,s,n):wy(e,s);p.delegationSelector=o?s:null,p.originalHandler=r,p.oneOff=i,p.uidEvent=c,h[c]=p,e.addEventListener(a,p,o)}function Ro(e,t,s,n,i){const o=du(t[s],n,i);o&&(e.removeEventListener(s,o,Boolean(i)),delete t[s][o.uidEvent])}function Cy(e,t,s,n){const i=t[s]||{};Object.keys(i).forEach(o=>{if(o.includes(n)){const r=i[o];Ro(e,t,s,r.originalHandler,r.delegationSelector)}})}function pu(e){return e=e.replace(yy,""),_y[e]||e}const O={on(e,t,s,n){Ca(e,t,s,n,!1)},one(e,t,s,n){Ca(e,t,s,n,!0)},off(e,t,s,n){if(typeof t!="string"||!e)return;const[i,o,r]=fu(t,s,n),a=r!==t,l=hu(e),h=t.startsWith(".");if(o!==void 0)return!l||!l[r]?void 0:void Ro(e,l,r,o,i?s:null);h&&Object.keys(l).forEach(c=>{Cy(e,l,c,t.slice(1))});const u=l[r]||{};Object.keys(u).forEach(c=>{const p=c.replace(vy,"");if(!a||t.includes(p)){const b=u[c];Ro(e,l,r,b.originalHandler,b.delegationSelector)}})},trigger(e,t,s){if(typeof t!="string"||!e)return null;const n=ru(),i=pu(t),o=t!==i,r=cu.has(i);let a,l=!0,h=!0,u=!1,c=null;return o&&n&&(a=n.Event(t,s),n(e).trigger(a),l=!a.isPropagationStopped(),h=!a.isImmediatePropagationStopped(),u=a.isDefaultPrevented()),r?(c=document.createEvent("HTMLEvents"),c.initEvent(i,l,!0)):c=new CustomEvent(t,{bubbles:l,cancelable:!0}),s!==void 0&&Object.keys(s).forEach(p=>{Object.defineProperty(c,p,{get:()=>s[p]})}),u&&c.preventDefault(),h&&e.dispatchEvent(c),c.defaultPrevented&&a!==void 0&&a.preventDefault(),c}},qt=new Map,An={set(e,t,s){qt.has(e)||qt.set(e,new Map);const n=qt.get(e);n.has(t)||n.size===0?n.set(t,s):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`)},get:(e,t)=>qt.has(e)&&qt.get(e).get(t)||null,remove(e,t){if(!qt.has(e))return;const s=qt.get(e);s.delete(t),s.size===0&&qt.delete(e)}};class kt{constructor(t){(t=as(t))&&(this._element=t,An.set(this._element,this.constructor.DATA_KEY,this))}dispose(){An.remove(this._element,this.constructor.DATA_KEY),O.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach(t=>{this[t]=null})}_queueCallback(t,s,n=!0){au(t,s,n)}static getInstance(t){return An.get(as(t),this.DATA_KEY)}static getOrCreateInstance(t,s={}){return this.getInstance(t)||new this(t,typeof s=="object"?s:null)}static get VERSION(){return"5.1.3"}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}const Ki=(e,t="hide")=>{const s=`click.dismiss${e.EVENT_KEY}`,n=e.NAME;O.on(document,s,`[data-bs-dismiss="${n}"]`,function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),Cs(this))return;const o=rs(this)||this.closest(`.${n}`);e.getOrCreateInstance(o)[t]()})},xy="alert",Sy="close.bs.alert",ky="closed.bs.alert";class Si extends kt{static get NAME(){return xy}close(){if(O.trigger(this._element,Sy).defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,t)}_destroyElement(){this._element.remove(),O.trigger(this._element,ky),this.dispose()}static jQueryInterface(t){return this.each(function(){const s=Si.getOrCreateInstance(this);if(typeof t=="string"){if(s[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);s[t](this)}})}}Ki(Si,"close"),mt(Si);const Ay="button",xa='[data-bs-toggle="button"]',Iy="click.bs.button.data-api";class ki extends kt{static get NAME(){return Ay}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each(function(){const s=ki.getOrCreateInstance(this);t==="toggle"&&s[t]()})}}function Sa(e){return e==="true"||e!=="false"&&(e===Number(e).toString()?Number(e):e===""||e==="null"?null:e)}function co(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}O.on(document,Iy,xa,e=>{e.preventDefault();const t=e.target.closest(xa);ki.getOrCreateInstance(t).toggle()}),mt(ki);const ze={setDataAttribute(e,t,s){e.setAttribute(`data-bs-${co(t)}`,s)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${co(t)}`)},getDataAttributes(e){if(!e)return{};const t={};return Object.keys(e.dataset).filter(s=>s.startsWith("bs")).forEach(s=>{let n=s.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),t[n]=Sa(e.dataset[s])}),t},getDataAttribute:(e,t)=>Sa(e.getAttribute(`data-bs-${co(t)}`)),offset(e){const t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}},position:e=>({top:e.offsetTop,left:e.offsetLeft})},ie={find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter(s=>s.matches(t)),parents(e,t){const s=[];let n=e.parentNode;for(;n&&n.nodeType===Node.ELEMENT_NODE&&n.nodeType!==3;)n.matches(t)&&s.push(n),n=n.parentNode;return s},prev(e,t){let s=e.previousElementSibling;for(;s;){if(s.matches(t))return[s];s=s.previousElementSibling}return[]},next(e,t){let s=e.nextElementSibling;for(;s;){if(s.matches(t))return[s];s=s.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(s=>`${s}:not([tabindex^="-"])`).join(", ");return this.find(t,e).filter(s=>!Cs(s)&&Gn(s))}},ka="carousel",Aa={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},Py={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},ds="next",fs="prev",ms="left",wn="right",Oy={ArrowLeft:wn,ArrowRight:ms},Ly="slide.bs.carousel",Ia="slid.bs.carousel",$y="keydown.bs.carousel",Ny="mouseenter.bs.carousel",Ry="mouseleave.bs.carousel",My="touchstart.bs.carousel",Dy="touchmove.bs.carousel",By="touchend.bs.carousel",Hy="pointerdown.bs.carousel",Vy="pointerup.bs.carousel",Fy="dragstart.bs.carousel",jy="load.bs.carousel.data-api",Uy="click.bs.carousel.data-api",zy="carousel-item-end",Gy="carousel-item-start",Wy="carousel-item-next",Yy="carousel-item-prev",oi=".active.carousel-item",qy=".carousel-item",Ky=".carousel-item img",Qy=".carousel-item-next, .carousel-item-prev",Xy=".carousel-indicators",Jy="[data-bs-slide], [data-bs-slide-to]",Zy='[data-bs-ride="carousel"]';class Ft extends kt{constructor(t,s){super(t),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(s),this._indicatorsElement=ie.findOne(Xy,this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return Aa}static get NAME(){return ka}next(){this._slide(ds)}nextWhenVisible(){!document.hidden&&Gn(this._element)&&this.next()}prev(){this._slide(fs)}pause(t){t||(this._isPaused=!0),ie.findOne(Qy,this._element)&&(iu(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(t){this._activeElement=ie.findOne(oi,this._element);const s=this._getItemIndex(this._activeElement);if(t>this._items.length-1||t<0)return;if(this._isSliding)return void O.one(this._element,Ia,()=>this.to(t));if(s===t)return this.pause(),void this.cycle();const n=t>s?ds:fs;this._slide(n,this._items[t])}_getConfig(t){return t={...Aa,...ze.getDataAttributes(this._element),...typeof t=="object"?t:{}},Dt(ka,t,Py),t}_handleSwipe(){const t=Math.abs(this.touchDeltaX);if(t<=40)return;const s=t/this.touchDeltaX;this.touchDeltaX=0,s&&this._slide(s>0?wn:ms)}_addEventListeners(){this._config.keyboard&&O.on(this._element,$y,t=>this._keydown(t)),this._config.pause==="hover"&&(O.on(this._element,Ny,t=>this.pause(t)),O.on(this._element,Ry,t=>this.cycle(t))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const t=o=>this._pointerEvent&&(o.pointerType==="pen"||o.pointerType==="touch"),s=o=>{t(o)?this.touchStartX=o.clientX:this._pointerEvent||(this.touchStartX=o.touches[0].clientX)},n=o=>{this.touchDeltaX=o.touches&&o.touches.length>1?0:o.touches[0].clientX-this.touchStartX},i=o=>{t(o)&&(this.touchDeltaX=o.clientX-this.touchStartX),this._handleSwipe(),this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(r=>this.cycle(r),500+this._config.interval))};ie.find(Ky,this._element).forEach(o=>{O.on(o,Fy,r=>r.preventDefault())}),this._pointerEvent?(O.on(this._element,Hy,o=>s(o)),O.on(this._element,Vy,o=>i(o)),this._element.classList.add("pointer-event")):(O.on(this._element,My,o=>s(o)),O.on(this._element,Dy,o=>n(o)),O.on(this._element,By,o=>i(o)))}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const s=Oy[t.key];s&&(t.preventDefault(),this._slide(s))}_getItemIndex(t){return this._items=t&&t.parentNode?ie.find(qy,t.parentNode):[],this._items.indexOf(t)}_getItemByOrder(t,s){const n=t===ds;return lu(this._items,s,n,this._config.wrap)}_triggerSlideEvent(t,s){const n=this._getItemIndex(t),i=this._getItemIndex(ie.findOne(oi,this._element));return O.trigger(this._element,Ly,{relatedTarget:t,direction:s,from:i,to:n})}_setActiveIndicatorElement(t){if(this._indicatorsElement){const s=ie.findOne(".active",this._indicatorsElement);s.classList.remove("active"),s.removeAttribute("aria-current");const n=ie.find("[data-bs-target]",this._indicatorsElement);for(let i=0;i<n.length;i++)if(Number.parseInt(n[i].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(t)){n[i].classList.add("active"),n[i].setAttribute("aria-current","true");break}}}_updateInterval(){const t=this._activeElement||ie.findOne(oi,this._element);if(!t)return;const s=Number.parseInt(t.getAttribute("data-bs-interval"),10);s?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=s):this._config.interval=this._config.defaultInterval||this._config.interval}_slide(t,s){const n=this._directionToOrder(t),i=ie.findOne(oi,this._element),o=this._getItemIndex(i),r=s||this._getItemByOrder(n,i),a=this._getItemIndex(r),l=Boolean(this._interval),h=n===ds,u=h?Gy:zy,c=h?Wy:Yy,p=this._orderToDirection(n);if(r&&r.classList.contains("active"))return void(this._isSliding=!1);if(this._isSliding||this._triggerSlideEvent(r,p).defaultPrevented||!i||!r)return;this._isSliding=!0,l&&this.pause(),this._setActiveIndicatorElement(r),this._activeElement=r;const b=()=>{O.trigger(this._element,Ia,{relatedTarget:r,direction:p,from:o,to:a})};if(this._element.classList.contains("slide")){r.classList.add(c),mn(r),i.classList.add(u),r.classList.add(u);const x=()=>{r.classList.remove(u,c),r.classList.add("active"),i.classList.remove("active",c,u),this._isSliding=!1,setTimeout(b,0)};this._queueCallback(x,i,!0)}else i.classList.remove("active"),r.classList.add("active"),this._isSliding=!1,b();l&&this.cycle()}_directionToOrder(t){return[wn,ms].includes(t)?st()?t===ms?fs:ds:t===ms?ds:fs:t}_orderToDirection(t){return[ds,fs].includes(t)?st()?t===fs?ms:wn:t===fs?wn:ms:t}static carouselInterface(t,s){const n=Ft.getOrCreateInstance(t,s);let{_config:i}=n;typeof s=="object"&&(i={...i,...s});const o=typeof s=="string"?s:i.slide;if(typeof s=="number")n.to(s);else if(typeof o=="string"){if(n[o]===void 0)throw new TypeError(`No method named "${o}"`);n[o]()}else i.interval&&i.ride&&(n.pause(),n.cycle())}static jQueryInterface(t){return this.each(function(){Ft.carouselInterface(this,t)})}static dataApiClickHandler(t){const s=rs(this);if(!s||!s.classList.contains("carousel"))return;const n={...ze.getDataAttributes(s),...ze.getDataAttributes(this)},i=this.getAttribute("data-bs-slide-to");i&&(n.interval=!1),Ft.carouselInterface(s,n),i&&Ft.getInstance(s).to(i),t.preventDefault()}}O.on(document,Uy,Jy,Ft.dataApiClickHandler),O.on(window,jy,()=>{const e=ie.find(Zy);for(let t=0,s=e.length;t<s;t++)Ft.carouselInterface(e[t],Ft.getInstance(e[t]))}),mt(Ft);const Pa="collapse",ev="bs.collapse",Oa={toggle:!0,parent:null},tv={toggle:"boolean",parent:"(null|element)"},sv="show.bs.collapse",nv="shown.bs.collapse",iv="hide.bs.collapse",ov="hidden.bs.collapse",rv="click.bs.collapse.data-api",La=":scope .collapse .collapse",av="width",lv="height",cv=".collapse.show, .collapse.collapsing",Mo='[data-bs-toggle="collapse"]';class Ys extends kt{constructor(t,s){super(t),this._isTransitioning=!1,this._config=this._getConfig(s),this._triggerArray=[];const n=ie.find(Mo);for(let i=0,o=n.length;i<o;i++){const r=n[i],a=Cr(r),l=ie.find(a).filter(h=>h===this._element);a!==null&&l.length&&(this._selector=a,this._triggerArray.push(r))}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Oa}static get NAME(){return Pa}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t,s=[];if(this._config.parent){const r=ie.find(La,this._config.parent);s=ie.find(cv,this._config.parent).filter(a=>!r.includes(a))}const n=ie.findOne(this._selector);if(s.length){const r=s.find(a=>n!==a);if(t=r?Ys.getInstance(r):null,t&&t._isTransitioning)return}if(O.trigger(this._element,sv).defaultPrevented)return;s.forEach(r=>{n!==r&&Ys.getOrCreateInstance(r,{toggle:!1}).hide(),t||An.set(r,ev,null)});const i=this._getDimension();this._element.classList.remove("collapse"),this._element.classList.add("collapsing"),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const o=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove("collapsing"),this._element.classList.add("collapse","show"),this._element.style[i]="",O.trigger(this._element,nv)},this._element,!0),this._element.style[i]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||O.trigger(this._element,iv).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,mn(this._element),this._element.classList.add("collapsing"),this._element.classList.remove("collapse","show");const s=this._triggerArray.length;for(let n=0;n<s;n++){const i=this._triggerArray[n],o=rs(i);o&&!this._isShown(o)&&this._addAriaAndCollapsedClass([i],!1)}this._isTransitioning=!0,this._element.style[t]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove("collapsing"),this._element.classList.add("collapse"),O.trigger(this._element,ov)},this._element,!0)}_isShown(t=this._element){return t.classList.contains("show")}_getConfig(t){return(t={...Oa,...ze.getDataAttributes(this._element),...t}).toggle=Boolean(t.toggle),t.parent=as(t.parent),Dt(Pa,t,tv),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?av:lv}_initializeChildren(){if(!this._config.parent)return;const t=ie.find(La,this._config.parent);ie.find(Mo,this._config.parent).filter(s=>!t.includes(s)).forEach(s=>{const n=rs(s);n&&this._addAriaAndCollapsedClass([s],this._isShown(n))})}_addAriaAndCollapsedClass(t,s){t.length&&t.forEach(n=>{s?n.classList.remove("collapsed"):n.classList.add("collapsed"),n.setAttribute("aria-expanded",s)})}static jQueryInterface(t){return this.each(function(){const s={};typeof t=="string"&&/show|hide/.test(t)&&(s.toggle=!1);const n=Ys.getOrCreateInstance(this,s);if(typeof t=="string"){if(n[t]===void 0)throw new TypeError(`No method named "${t}"`);n[t]()}})}}O.on(document,rv,Mo,function(e){(e.target.tagName==="A"||e.delegateTarget&&e.delegateTarget.tagName==="A")&&e.preventDefault();const t=Cr(this);ie.find(t).forEach(s=>{Ys.getOrCreateInstance(s,{toggle:!1}).toggle()})}),mt(Ys);const uo="dropdown",uv=new RegExp("ArrowUp|ArrowDown|Escape"),hv="hide.bs.dropdown",dv="hidden.bs.dropdown",fv="show.bs.dropdown",pv="shown.bs.dropdown",$a="click.bs.dropdown.data-api",Na="keydown.bs.dropdown.data-api",mv="keyup.bs.dropdown.data-api",In='[data-bs-toggle="dropdown"]',Do=".dropdown-menu",gv=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",bv=st()?"top-end":"top-start",yv=st()?"top-start":"top-end",vv=st()?"bottom-end":"bottom-start",_v=st()?"bottom-start":"bottom-end",Tv=st()?"left-start":"right-start",wv=st()?"right-start":"left-start",Ev={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},Cv={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class dt extends kt{constructor(t,s){super(t),this._popper=null,this._config=this._getConfig(s),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar()}static get Default(){return Ev}static get DefaultType(){return Cv}static get NAME(){return uo}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Cs(this._element)||this._isShown(this._menu))return;const t={relatedTarget:this._element};if(O.trigger(this._element,fv,t).defaultPrevented)return;const s=dt.getParentFromElement(this._element);this._inNavbar?ze.setDataAttribute(this._menu,"popper","none"):this._createPopper(s),"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav")&&[].concat(...document.body.children).forEach(n=>O.on(n,"mouseover",xi)),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add("show"),this._element.classList.add("show"),O.trigger(this._element,pv,t)}hide(){if(Cs(this._element)||!this._isShown(this._menu))return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){O.trigger(this._element,hv,t).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(s=>O.off(s,"mouseover",xi)),this._popper&&this._popper.destroy(),this._menu.classList.remove("show"),this._element.classList.remove("show"),this._element.setAttribute("aria-expanded","false"),ze.removeDataAttribute(this._menu,"popper"),O.trigger(this._element,dv,t))}_getConfig(t){if(t={...this.constructor.Default,...ze.getDataAttributes(this._element),...t},Dt(uo,t,this.constructor.DefaultType),typeof t.reference=="object"&&!ks(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${uo.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(t){if(su===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let s=this._element;this._config.reference==="parent"?s=t:ks(this._config.reference)?s=as(this._config.reference):typeof this._config.reference=="object"&&(s=this._config.reference);const n=this._getPopperConfig(),i=n.modifiers.find(o=>o.name==="applyStyles"&&o.enabled===!1);this._popper=Er(s,this._menu,n),i&&ze.setDataAttribute(this._menu,"popper","static")}_isShown(t=this._element){return t.classList.contains("show")}_getMenuElement(){return ie.next(this._element,Do)[0]}_getPlacement(){const t=this._element.parentNode;if(t.classList.contains("dropend"))return Tv;if(t.classList.contains("dropstart"))return wv;const s=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains("dropup")?s?yv:bv:s?_v:vv}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(s=>Number.parseInt(s,10)):typeof t=="function"?s=>t(s,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return this._config.display==="static"&&(t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...typeof this._config.popperConfig=="function"?this._config.popperConfig(t):this._config.popperConfig}}_selectMenuItem({key:t,target:s}){const n=ie.find(gv,this._menu).filter(Gn);n.length&&lu(n,s,t==="ArrowDown",!n.includes(s)).focus()}static jQueryInterface(t){return this.each(function(){const s=dt.getOrCreateInstance(this,t);if(typeof t=="string"){if(s[t]===void 0)throw new TypeError(`No method named "${t}"`);s[t]()}})}static clearMenus(t){if(t&&(t.button===2||t.type==="keyup"&&t.key!=="Tab"))return;const s=ie.find(In);for(let n=0,i=s.length;n<i;n++){const o=dt.getInstance(s[n]);if(!o||o._config.autoClose===!1||!o._isShown())continue;const r={relatedTarget:o._element};if(t){const a=t.composedPath(),l=a.includes(o._menu);if(a.includes(o._element)||o._config.autoClose==="inside"&&!l||o._config.autoClose==="outside"&&l||o._menu.contains(t.target)&&(t.type==="keyup"&&t.key==="Tab"||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;t.type==="click"&&(r.clickEvent=t)}o._completeHide(r)}}static getParentFromElement(t){return rs(t)||t.parentNode}static dataApiKeydownHandler(t){if(/input|textarea/i.test(t.target.tagName)?t.key==="Space"||t.key!=="Escape"&&(t.key!=="ArrowDown"&&t.key!=="ArrowUp"||t.target.closest(Do)):!uv.test(t.key))return;const s=this.classList.contains("show");if(!s&&t.key==="Escape"||(t.preventDefault(),t.stopPropagation(),Cs(this)))return;const n=this.matches(In)?this:ie.prev(this,In)[0],i=dt.getOrCreateInstance(n);if(t.key!=="Escape")return t.key==="ArrowUp"||t.key==="ArrowDown"?(s||i.show(),void i._selectMenuItem(t)):void(s&&t.key!=="Space"||dt.clearMenus());i.hide()}}O.on(document,Na,In,dt.dataApiKeydownHandler),O.on(document,Na,Do,dt.dataApiKeydownHandler),O.on(document,$a,dt.clearMenus),O.on(document,mv,dt.clearMenus),O.on(document,$a,In,function(e){e.preventDefault(),dt.getOrCreateInstance(this).toggle()}),mt(dt);const Ra=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top";class Bo{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",s=>s+t),this._setElementAttributes(Ra,"paddingRight",s=>s+t),this._setElementAttributes(".sticky-top","marginRight",s=>s-t)}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,s,n){const i=this.getWidth();this._applyManipulationCallback(t,o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+i)return;this._saveInitialAttribute(o,s);const r=window.getComputedStyle(o)[s];o.style[s]=`${n(Number.parseFloat(r))}px`})}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(Ra,"paddingRight"),this._resetElementAttributes(".sticky-top","marginRight")}_saveInitialAttribute(t,s){const n=t.style[s];n&&ze.setDataAttribute(t,s,n)}_resetElementAttributes(t,s){this._applyManipulationCallback(t,n=>{const i=ze.getDataAttribute(n,s);i===void 0?n.style.removeProperty(s):(ze.removeDataAttribute(n,s),n.style[s]=i)})}_applyManipulationCallback(t,s){ks(t)?s(t):ie.find(t,this._element).forEach(s)}isOverflowing(){return this.getWidth()>0}}const xv={className:"modal-backdrop",isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},Sv={className:"string",isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},kv="backdrop",Ma="mousedown.bs.backdrop";class mu{constructor(t){this._config=this._getConfig(t),this._isAppended=!1,this._element=null}show(t){this._config.isVisible?(this._append(),this._config.isAnimated&&mn(this._getElement()),this._getElement().classList.add("show"),this._emulateAnimation(()=>{bs(t)})):bs(t)}hide(t){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),bs(t)})):bs(t)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_getConfig(t){return(t={...xv,...typeof t=="object"?t:{}}).rootElement=as(t.rootElement),Dt(kv,t,Sv),t}_append(){this._isAppended||(this._config.rootElement.append(this._getElement()),O.on(this._getElement(),Ma,()=>{bs(this._config.clickCallback)}),this._isAppended=!0)}dispose(){this._isAppended&&(O.off(this._element,Ma),this._element.remove(),this._isAppended=!1)}_emulateAnimation(t){au(t,this._getElement(),this._config.isAnimated)}}const Av={trapElement:null,autofocus:!0},Iv={trapElement:"element",autofocus:"boolean"},Pv="focustrap",Da=".bs.focustrap",Ov="focusin.bs.focustrap",Lv="keydown.tab.bs.focustrap";class gu{constructor(t){this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}activate(){const{trapElement:t,autofocus:s}=this._config;this._isActive||(s&&t.focus(),O.off(document,Da),O.on(document,Ov,n=>this._handleFocusin(n)),O.on(document,Lv,n=>this._handleKeydown(n)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,O.off(document,Da))}_handleFocusin(t){const{target:s}=t,{trapElement:n}=this._config;if(s===document||s===n||n.contains(s))return;const i=ie.focusableChildren(n);i.length===0?n.focus():this._lastTabNavDirection==="backward"?i[i.length-1].focus():i[0].focus()}_handleKeydown(t){t.key==="Tab"&&(this._lastTabNavDirection=t.shiftKey?"backward":"forward")}_getConfig(t){return t={...Av,...typeof t=="object"?t:{}},Dt(Pv,t,Iv),t}}const Ba="modal",Ha={backdrop:!0,keyboard:!0,focus:!0},$v={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},Nv="hide.bs.modal",Rv="hidePrevented.bs.modal",bu="hidden.bs.modal",yu="show.bs.modal",Mv="shown.bs.modal",Va="resize.bs.modal",Fa="click.dismiss.bs.modal",ja="keydown.dismiss.bs.modal",Dv="mouseup.dismiss.bs.modal",Ua="mousedown.dismiss.bs.modal",Bv="click.bs.modal.data-api",Hv='[data-bs-toggle="modal"]';class Us extends kt{constructor(t,s){super(t),this._config=this._getConfig(s),this._dialog=ie.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new Bo}static get Default(){return Ha}static get NAME(){return Ba}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||O.trigger(this._element,yu,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add("modal-open"),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),O.on(this._dialog,Ua,()=>{O.one(this._element,Dv,s=>{s.target===this._element&&(this._ignoreBackdropClick=!0)})}),this._showBackdrop(()=>this._showElement(t)))}hide(){if(!this._isShown||this._isTransitioning||O.trigger(this._element,Nv).defaultPrevented)return;this._isShown=!1;const t=this._isAnimated();t&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.deactivate(),this._element.classList.remove("show"),O.off(this._element,Fa),O.off(this._dialog,Ua),this._queueCallback(()=>this._hideModal(),this._element,t)}dispose(){[window,this._dialog].forEach(t=>O.off(t,".bs.modal")),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new mu({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new gu({trapElement:this._element})}_getConfig(t){return t={...Ha,...ze.getDataAttributes(this._element),...typeof t=="object"?t:{}},Dt(Ba,t,$v),t}_showElement(t){const s=this._isAnimated(),n=ie.findOne(".modal-body",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,n&&(n.scrollTop=0),s&&mn(this._element),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,O.trigger(this._element,Mv,{relatedTarget:t})},this._dialog,s)}_setEscapeEvent(){this._isShown?O.on(this._element,ja,t=>{this._config.keyboard&&t.key==="Escape"?(t.preventDefault(),this.hide()):this._config.keyboard||t.key!=="Escape"||this._triggerBackdropTransition()}):O.off(this._element,ja)}_setResizeEvent(){this._isShown?O.on(window,Va,()=>this._adjustDialog()):O.off(window,Va)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove("modal-open"),this._resetAdjustments(),this._scrollBar.reset(),O.trigger(this._element,bu)})}_showBackdrop(t){O.on(this._element,Fa,s=>{this._ignoreBackdropClick?this._ignoreBackdropClick=!1:s.target===s.currentTarget&&(this._config.backdrop===!0?this.hide():this._config.backdrop==="static"&&this._triggerBackdropTransition())}),this._backdrop.show(t)}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(O.trigger(this._element,Rv).defaultPrevented)return;const{classList:t,scrollHeight:s,style:n}=this._element,i=s>document.documentElement.clientHeight;!i&&n.overflowY==="hidden"||t.contains("modal-static")||(i||(n.overflowY="hidden"),t.add("modal-static"),this._queueCallback(()=>{t.remove("modal-static"),i||this._queueCallback(()=>{n.overflowY=""},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,s=this._scrollBar.getWidth(),n=s>0;(!n&&t&&!st()||n&&!t&&st())&&(this._element.style.paddingLeft=`${s}px`),(n&&!t&&!st()||!n&&t&&st())&&(this._element.style.paddingRight=`${s}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,s){return this.each(function(){const n=Us.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0)throw new TypeError(`No method named "${t}"`);n[t](s)}})}}O.on(document,Bv,Hv,function(e){const t=rs(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),O.one(t,yu,n=>{n.defaultPrevented||O.one(t,bu,()=>{Gn(this)&&this.focus()})});const s=ie.findOne(".modal.show");s&&Us.getInstance(s).hide(),Us.getOrCreateInstance(t).toggle(this)}),Ki(Us),mt(Us);const za="offcanvas",Vv="load.bs.offcanvas.data-api",Ga={backdrop:!0,keyboard:!0,scroll:!1},Fv={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},jv="offcanvas-backdrop",Wa=".offcanvas.show",Uv="show.bs.offcanvas",zv="shown.bs.offcanvas",Gv="hide.bs.offcanvas",vu="hidden.bs.offcanvas",Wv="click.bs.offcanvas.data-api",Yv="keydown.dismiss.bs.offcanvas",qv='[data-bs-toggle="offcanvas"]';class ys extends kt{constructor(t,s){super(t),this._config=this._getConfig(s),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get NAME(){return za}static get Default(){return Ga}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||O.trigger(this._element,Uv,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||new Bo().hide(),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add("show"),this._queueCallback(()=>{this._config.scroll||this._focustrap.activate(),O.trigger(this._element,zv,{relatedTarget:t})},this._element,!0))}hide(){this._isShown&&(O.trigger(this._element,Gv).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.remove("show"),this._backdrop.hide(),this._queueCallback(()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||new Bo().reset(),O.trigger(this._element,vu)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_getConfig(t){return t={...Ga,...ze.getDataAttributes(this._element),...typeof t=="object"?t:{}},Dt(za,t,Fv),t}_initializeBackDrop(){return new mu({className:jv,isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_initializeFocusTrap(){return new gu({trapElement:this._element})}_addEventListeners(){O.on(this._element,Yv,t=>{this._config.keyboard&&t.key==="Escape"&&this.hide()})}static jQueryInterface(t){return this.each(function(){const s=ys.getOrCreateInstance(this,t);if(typeof t=="string"){if(s[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);s[t](this)}})}}O.on(document,Wv,qv,function(e){const t=rs(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),Cs(this))return;O.one(t,vu,()=>{Gn(this)&&this.focus()});const s=ie.findOne(Wa);s&&s!==t&&ys.getInstance(s).hide(),ys.getOrCreateInstance(t).toggle(this)}),O.on(window,Vv,()=>ie.find(Wa).forEach(e=>ys.getOrCreateInstance(e).show())),Ki(ys),mt(ys);const Kv=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Qv=/^aria-[\w-]*$/i,Xv=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Jv=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Zv=(e,t)=>{const s=e.nodeName.toLowerCase();if(t.includes(s))return!Kv.has(s)||Boolean(Xv.test(e.nodeValue)||Jv.test(e.nodeValue));const n=t.filter(i=>i instanceof RegExp);for(let i=0,o=n.length;i<o;i++)if(n[i].test(s))return!0;return!1},e_={"*":["class","dir","id","lang","role",Qv],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function Ya(e,t,s){if(!e.length)return e;if(s&&typeof s=="function")return s(e);const n=new window.DOMParser().parseFromString(e,"text/html"),i=[].concat(...n.body.querySelectorAll("*"));for(let o=0,r=i.length;o<r;o++){const a=i[o],l=a.nodeName.toLowerCase();if(!Object.keys(t).includes(l)){a.remove();continue}const h=[].concat(...a.attributes),u=[].concat(t["*"]||[],t[l]||[]);h.forEach(c=>{Zv(c,u)||a.removeAttribute(c.nodeName)})}return n.body.innerHTML}const qa="tooltip",t_=new Set(["sanitize","allowList","sanitizeFn"]),s_={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},n_={AUTO:"auto",TOP:"top",RIGHT:st()?"left":"right",BOTTOM:"bottom",LEFT:st()?"right":"left"},i_={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:e_,popperConfig:null},o_={HIDE:"hide.bs.tooltip",HIDDEN:"hidden.bs.tooltip",SHOW:"show.bs.tooltip",SHOWN:"shown.bs.tooltip",INSERTED:"inserted.bs.tooltip",CLICK:"click.bs.tooltip",FOCUSIN:"focusin.bs.tooltip",FOCUSOUT:"focusout.bs.tooltip",MOUSEENTER:"mouseenter.bs.tooltip",MOUSELEAVE:"mouseleave.bs.tooltip"};class Os extends kt{constructor(t,s){if(su===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(s),this.tip=null,this._setListeners()}static get Default(){return i_}static get NAME(){return qa}static get Event(){return o_}static get DefaultType(){return s_}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(t){if(this._isEnabled)if(t){const s=this._initializeOnDelegatedTarget(t);s._activeTrigger.click=!s._activeTrigger.click,s._isWithActiveTrigger()?s._enter(null,s):s._leave(null,s)}else{if(this.getTipElement().classList.contains("show"))return void this._leave(null,this);this._enter(null,this)}}dispose(){clearTimeout(this._timeout),O.off(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this.isWithContent()||!this._isEnabled)return;const t=O.trigger(this._element,this.constructor.Event.SHOW),s=ou(this._element),n=s===null?this._element.ownerDocument.documentElement.contains(this._element):s.contains(this._element);if(t.defaultPrevented||!n)return;this.constructor.NAME==="tooltip"&&this.tip&&this.getTitle()!==this.tip.querySelector(".tooltip-inner").innerHTML&&(this._disposePopper(),this.tip.remove(),this.tip=null);const i=this.getTipElement(),o=my(this.constructor.NAME);i.setAttribute("id",o),this._element.setAttribute("aria-describedby",o),this._config.animation&&i.classList.add("fade");const r=typeof this._config.placement=="function"?this._config.placement.call(this,i,this._element):this._config.placement,a=this._getAttachment(r);this._addAttachmentClass(a);const{container:l}=this._config;An.set(i,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(l.append(i),O.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=Er(this._element,i,this._getPopperConfig(a)),i.classList.add("show");const h=this._resolvePossibleFunction(this._config.customClass);h&&i.classList.add(...h.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(c=>{O.on(c,"mouseover",xi)});const u=this.tip.classList.contains("fade");this._queueCallback(()=>{const c=this._hoverState;this._hoverState=null,O.trigger(this._element,this.constructor.Event.SHOWN),c==="out"&&this._leave(null,this)},this.tip,u)}hide(){if(!this._popper)return;const t=this.getTipElement();if(O.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented)return;t.classList.remove("show"),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(n=>O.off(n,"mouseover",xi)),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1;const s=this.tip.classList.contains("fade");this._queueCallback(()=>{this._isWithActiveTrigger()||(this._hoverState!=="show"&&t.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),O.trigger(this._element,this.constructor.Event.HIDDEN),this._disposePopper())},this.tip,s),this._hoverState=""}update(){this._popper!==null&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;const t=document.createElement("div");t.innerHTML=this._config.template;const s=t.children[0];return this.setContent(s),s.classList.remove("fade","show"),this.tip=s,this.tip}setContent(t){this._sanitizeAndSetContent(t,this.getTitle(),".tooltip-inner")}_sanitizeAndSetContent(t,s,n){const i=ie.findOne(n,t);s||!i?this.setElementContent(i,s):i.remove()}setElementContent(t,s){if(t!==null)return ks(s)?(s=as(s),void(this._config.html?s.parentNode!==t&&(t.innerHTML="",t.append(s)):t.textContent=s.textContent)):void(this._config.html?(this._config.sanitize&&(s=Ya(s,this._config.allowList,this._config.sanitizeFn)),t.innerHTML=s):t.textContent=s)}getTitle(){const t=this._element.getAttribute("data-bs-original-title")||this._config.title;return this._resolvePossibleFunction(t)}updateAttachment(t){return t==="right"?"end":t==="left"?"start":t}_initializeOnDelegatedTarget(t,s){return s||this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(s=>Number.parseInt(s,10)):typeof t=="function"?s=>t(s,this._element):t}_resolvePossibleFunction(t){return typeof t=="function"?t.call(this._element):t}_getPopperConfig(t){const s={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:n=>this._handlePopperPlacementChange(n)}],onFirstUpdate:n=>{n.options.placement!==n.placement&&this._handlePopperPlacementChange(n)}};return{...s,...typeof this._config.popperConfig=="function"?this._config.popperConfig(s):this._config.popperConfig}}_addAttachmentClass(t){this.getTipElement().classList.add(`${this._getBasicClassPrefix()}-${this.updateAttachment(t)}`)}_getAttachment(t){return n_[t.toUpperCase()]}_setListeners(){this._config.trigger.split(" ").forEach(t=>{if(t==="click")O.on(this._element,this.constructor.Event.CLICK,this._config.selector,s=>this.toggle(s));else if(t!=="manual"){const s=t==="hover"?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,n=t==="hover"?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;O.on(this._element,s,this._config.selector,i=>this._enter(i)),O.on(this._element,n,this._config.selector,i=>this._leave(i))}}),this._hideModalHandler=()=>{this._element&&this.hide()},O.on(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){const t=this._element.getAttribute("title"),s=typeof this._element.getAttribute("data-bs-original-title");(t||s!=="string")&&(this._element.setAttribute("data-bs-original-title",t||""),!t||this._element.getAttribute("aria-label")||this._element.textContent||this._element.setAttribute("aria-label",t),this._element.setAttribute("title",""))}_enter(t,s){s=this._initializeOnDelegatedTarget(t,s),t&&(s._activeTrigger[t.type==="focusin"?"focus":"hover"]=!0),s.getTipElement().classList.contains("show")||s._hoverState==="show"?s._hoverState="show":(clearTimeout(s._timeout),s._hoverState="show",s._config.delay&&s._config.delay.show?s._timeout=setTimeout(()=>{s._hoverState==="show"&&s.show()},s._config.delay.show):s.show())}_leave(t,s){s=this._initializeOnDelegatedTarget(t,s),t&&(s._activeTrigger[t.type==="focusout"?"focus":"hover"]=s._element.contains(t.relatedTarget)),s._isWithActiveTrigger()||(clearTimeout(s._timeout),s._hoverState="out",s._config.delay&&s._config.delay.hide?s._timeout=setTimeout(()=>{s._hoverState==="out"&&s.hide()},s._config.delay.hide):s.hide())}_isWithActiveTrigger(){for(const t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1}_getConfig(t){const s=ze.getDataAttributes(this._element);return Object.keys(s).forEach(n=>{t_.has(n)&&delete s[n]}),(t={...this.constructor.Default,...s,...typeof t=="object"&&t?t:{}}).container=t.container===!1?document.body:as(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),Dt(qa,t,this.constructor.DefaultType),t.sanitize&&(t.template=Ya(t.template,t.allowList,t.sanitizeFn)),t}_getDelegateConfig(){const t={};for(const s in this._config)this.constructor.Default[s]!==this._config[s]&&(t[s]=this._config[s]);return t}_cleanTipClass(){const t=this.getTipElement(),s=new RegExp(`(^|\\s)${this._getBasicClassPrefix()}\\S+`,"g"),n=t.getAttribute("class").match(s);n!==null&&n.length>0&&n.map(i=>i.trim()).forEach(i=>t.classList.remove(i))}_getBasicClassPrefix(){return"bs-tooltip"}_handlePopperPlacementChange(t){const{state:s}=t;s&&(this.tip=s.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(s.placement)))}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(t){return this.each(function(){const s=Os.getOrCreateInstance(this,t);if(typeof t=="string"){if(s[t]===void 0)throw new TypeError(`No method named "${t}"`);s[t]()}})}}mt(Os);const r_="popover",a_={...Os.Default,placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'},l_={...Os.DefaultType,content:"(string|element|function)"},c_={HIDE:"hide.bs.popover",HIDDEN:"hidden.bs.popover",SHOW:"show.bs.popover",SHOWN:"shown.bs.popover",INSERTED:"inserted.bs.popover",CLICK:"click.bs.popover",FOCUSIN:"focusin.bs.popover",FOCUSOUT:"focusout.bs.popover",MOUSEENTER:"mouseenter.bs.popover",MOUSELEAVE:"mouseleave.bs.popover"},u_=".popover-header";class xr extends Os{static get Default(){return a_}static get NAME(){return r_}static get Event(){return c_}static get DefaultType(){return l_}isWithContent(){return this.getTitle()||this._getContent()}setContent(t){this._sanitizeAndSetContent(t,this.getTitle(),u_),this._sanitizeAndSetContent(t,this._getContent(),".popover-body")}_getContent(){return this._resolvePossibleFunction(this._config.content)}_getBasicClassPrefix(){return"bs-popover"}static jQueryInterface(t){return this.each(function(){const s=xr.getOrCreateInstance(this,t);if(typeof t=="string"){if(s[t]===void 0)throw new TypeError(`No method named "${t}"`);s[t]()}})}}mt(xr);const Ka="scrollspy",h_=".bs.scrollspy",Qa={offset:10,method:"auto",target:""},d_={offset:"number",method:"string",target:"(string|element)"},f_="activate.bs.scrollspy",p_="scroll.bs.scrollspy",m_="load.bs.scrollspy.data-api",g_='[data-bs-spy="scroll"]',ho=".nav-link, .list-group-item, .dropdown-item";class Ai extends kt{constructor(t,s){super(t),this._scrollElement=this._element.tagName==="BODY"?window:this._element,this._config=this._getConfig(s),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,O.on(this._scrollElement,p_,()=>this._process()),this.refresh(),this._process()}static get Default(){return Qa}static get NAME(){return Ka}refresh(){const t=this._scrollElement===this._scrollElement.window?"offset":"position",s=this._config.method==="auto"?t:this._config.method,n=s==="position"?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),ie.find(ho,this._config.target).map(i=>{const o=Cr(i),r=o?ie.findOne(o):null;if(r){const a=r.getBoundingClientRect();if(a.width||a.height)return[ze[s](r).top+n,o]}return null}).filter(i=>i).sort((i,o)=>i[0]-o[0]).forEach(i=>{this._offsets.push(i[0]),this._targets.push(i[1])})}dispose(){O.off(this._scrollElement,h_),super.dispose()}_getConfig(t){return(t={...Qa,...ze.getDataAttributes(this._element),...typeof t=="object"&&t?t:{}}).target=as(t.target)||document.documentElement,Dt(Ka,t,d_),t}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const t=this._getScrollTop()+this._config.offset,s=this._getScrollHeight(),n=this._config.offset+s-this._getOffsetHeight();if(this._scrollHeight!==s&&this.refresh(),t>=n){const i=this._targets[this._targets.length-1];this._activeTarget!==i&&this._activate(i)}else{if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(let i=this._offsets.length;i--;)this._activeTarget!==this._targets[i]&&t>=this._offsets[i]&&(this._offsets[i+1]===void 0||t<this._offsets[i+1])&&this._activate(this._targets[i])}}_activate(t){this._activeTarget=t,this._clear();const s=ho.split(",").map(i=>`${i}[data-bs-target="${t}"],${i}[href="${t}"]`),n=ie.findOne(s.join(","),this._config.target);n.classList.add("active"),n.classList.contains("dropdown-item")?ie.findOne(".dropdown-toggle",n.closest(".dropdown")).classList.add("active"):ie.parents(n,".nav, .list-group").forEach(i=>{ie.prev(i,".nav-link, .list-group-item").forEach(o=>o.classList.add("active")),ie.prev(i,".nav-item").forEach(o=>{ie.children(o,".nav-link").forEach(r=>r.classList.add("active"))})}),O.trigger(this._scrollElement,f_,{relatedTarget:t})}_clear(){ie.find(ho,this._config.target).filter(t=>t.classList.contains("active")).forEach(t=>t.classList.remove("active"))}static jQueryInterface(t){return this.each(function(){const s=Ai.getOrCreateInstance(this,t);if(typeof t=="string"){if(s[t]===void 0)throw new TypeError(`No method named "${t}"`);s[t]()}})}}O.on(window,m_,()=>{ie.find(g_).forEach(e=>new Ai(e))}),mt(Ai);const b_="hide.bs.tab",y_="hidden.bs.tab",v_="show.bs.tab",__="shown.bs.tab",T_="click.bs.tab.data-api",Xa=":scope > li > .active",w_='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',E_=":scope > .dropdown-menu .active";class Ii extends kt{static get NAME(){return"tab"}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains("active"))return;let t;const s=rs(this._element),n=this._element.closest(".nav, .list-group");if(n){const r=n.nodeName==="UL"||n.nodeName==="OL"?Xa:".active";t=ie.find(r,n),t=t[t.length-1]}const i=t?O.trigger(t,b_,{relatedTarget:this._element}):null;if(O.trigger(this._element,v_,{relatedTarget:t}).defaultPrevented||i!==null&&i.defaultPrevented)return;this._activate(this._element,n);const o=()=>{O.trigger(t,y_,{relatedTarget:this._element}),O.trigger(this._element,__,{relatedTarget:t})};s?this._activate(s,s.parentNode,o):o()}_activate(t,s,n){const i=(!s||s.nodeName!=="UL"&&s.nodeName!=="OL"?ie.children(s,".active"):ie.find(Xa,s))[0],o=n&&i&&i.classList.contains("fade"),r=()=>this._transitionComplete(t,i,n);i&&o?(i.classList.remove("show"),this._queueCallback(r,t,!0)):r()}_transitionComplete(t,s,n){if(s){s.classList.remove("active");const o=ie.findOne(E_,s.parentNode);o&&o.classList.remove("active"),s.getAttribute("role")==="tab"&&s.setAttribute("aria-selected",!1)}t.classList.add("active"),t.getAttribute("role")==="tab"&&t.setAttribute("aria-selected",!0),mn(t),t.classList.contains("fade")&&t.classList.add("show");let i=t.parentNode;if(i&&i.nodeName==="LI"&&(i=i.parentNode),i&&i.classList.contains("dropdown-menu")){const o=t.closest(".dropdown");o&&ie.find(".dropdown-toggle",o).forEach(r=>r.classList.add("active")),t.setAttribute("aria-expanded",!0)}n&&n()}static jQueryInterface(t){return this.each(function(){const s=Ii.getOrCreateInstance(this);if(typeof t=="string"){if(s[t]===void 0)throw new TypeError(`No method named "${t}"`);s[t]()}})}}O.on(document,T_,w_,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),Cs(this)||Ii.getOrCreateInstance(this).show()}),mt(Ii);const Ja="toast",C_="mouseover.bs.toast",x_="mouseout.bs.toast",S_="focusin.bs.toast",k_="focusout.bs.toast",A_="hide.bs.toast",I_="hidden.bs.toast",P_="show.bs.toast",O_="shown.bs.toast",L_={animation:"boolean",autohide:"boolean",delay:"number"},Za={animation:!0,autohide:!0,delay:5e3};class Pi extends kt{constructor(t,s){super(t),this._config=this._getConfig(s),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return L_}static get Default(){return Za}static get NAME(){return Ja}show(){O.trigger(this._element,P_).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),mn(this._element),this._element.classList.add("show"),this._element.classList.add("showing"),this._queueCallback(()=>{this._element.classList.remove("showing"),O.trigger(this._element,O_),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this._element.classList.contains("show")&&(O.trigger(this._element,A_).defaultPrevented||(this._element.classList.add("showing"),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove("showing"),this._element.classList.remove("show"),O.trigger(this._element,I_)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this._element.classList.contains("show")&&this._element.classList.remove("show"),super.dispose()}_getConfig(t){return t={...Za,...ze.getDataAttributes(this._element),...typeof t=="object"&&t?t:{}},Dt(Ja,t,this.constructor.DefaultType),t}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,s){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=s;break;case"focusin":case"focusout":this._hasKeyboardInteraction=s}if(s)return void this._clearTimeout();const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){O.on(this._element,C_,t=>this._onInteraction(t,!0)),O.on(this._element,x_,t=>this._onInteraction(t,!1)),O.on(this._element,S_,t=>this._onInteraction(t,!0)),O.on(this._element,k_,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const s=Pi.getOrCreateInstance(this,t);if(typeof t=="string"){if(s[t]===void 0)throw new TypeError(`No method named "${t}"`);s[t](this)}})}}Ki(Pi),mt(Pi);const el=1200,tl=677,sl=900,nl=12,Kt=34,ri=.991,ai=1/8;let Ht,bn,Qt;const $_=De({components:{Chat:Gi},name:"PoolTable",mixins:[Ct,Ui,_c],props:["watch"],data(){return{canvas:void 0,balls:[],cueBall:void 0,cue:void 0,poolTable:void 0,gameOptions:{pointerLine:!1,notificationSound:!1},mouseCoordsTemp:void 0,handBall:!1,playingTurn:!1,resultSnapshot:void 0,pocketSelection:!1,selectedPocket:null,turnQueue:{actions:[],blocked:!1}}},watch:{turnQueueLength:{handler(e,t){e>t&&this.consumeTurns()}},mouseEnabled:{handler(e,t){e&&!Qt?(console.log("watcher:restartReducerInterval"),this.restartReducerInterval()):e||(this.stopReducerInterval(),this.stopCueInterval(),Qt=null)}},timeRunOut:{handler(e,t){e&&(console.log("watcher:stopreducer"),this.stopReducerInterval(),(this.isOngoingGame()&&this.isMyTurnInSnapshot()||this.firstTurnPlayed===!1||this.firstTurnPlayed===void 0)&&this.resign())}}},created(){this.unsubscribe=this.$store.subscribe((e,t)=>{e.type==="rematch"&&(this.resultSnapshot=null,this.initTable()),e.type==="resign"&&(this.theTable.playerInTurn=null,this.handleGameEnd(),this.clearTurnQueue(),this.draw())})},mounted(){if(this.initTable(),this.watch==="1"){this.clearTurnQueue(),this.updatePocketedBalls(this.theTable.playerABalls),this.updatePocketedBalls(this.theTable.playerBBalls,!1),this.updateRemainingBallPositions(this.theTable.remainingBalls,this.balls);let e=this.theTable.remainingBalls[this.theTable.remainingBalls.length-1];this.cue.position=e.position,this.unblockQueue(),this.draw()}this.unsubscribeAction=this.$store.subscribeAction((e,t)=>{var s,n,i,o,r,a,l,h;if(e.type==="poolUpdate"){this.cue.image.canvasRotationAngle=e.payload.pool.cue.angle,this.cue.angle=e.payload.pool.cue.angle,this.draw();return}if(e.type==="currentTableIsClosed"){let u=(n=(s=this==null?void 0:this.theTable)==null?void 0:s.playerA)==null?void 0:n.name;((o=(i=this==null?void 0:this.theTable)==null?void 0:i.playerA)==null?void 0:o.name)===((a=(r=e==null?void 0:e.payload)==null?void 0:r.who)==null?void 0:a.name)&&(u=(h=(l=this==null?void 0:this.theTable)==null?void 0:l.playerB)==null?void 0:h.name);let c={winner:u,winReason:"opponent disconnected",whoPlayed:null};this.handleGameEnd(c)}e.type!=="poolPlayTurn"&&e.type!=="poolSetHandBall"&&e.type!=="poolSelectPocket"&&e.type!=="poolSetHandBallFail"&&e.type!=="poolGameEnded"||(this.resetInstanceVariables(),this.createTableSnapshot(e),!this.isDocumentVisible()&&this.isTimerRestartRequiredForAction(e)&&this.isMe(e.payload.table.playerInTurn.name)&&this.restartReducerInterval(),this.isDocumentVisible&&(this.produceTurns(e),this.draw()))}),new Os(document.getElementsByClassName("selectora")[0])},computed:{turnQueueLength(){return this.turnQueue.actions.length},mouseEnabled(){if(!this.$store.getters.playerInTurn)return this.draw(),!1;if(!this.poolTable)return!1;const t=this.$store.getters.playerInTurn.name===this.userName&&this.poolTable.mouseEnabled;return console.log("computed mouseEnabled:"+t),t},cueVisible(){return this.mouseEnabled},timeRunOut(){return this.theTable.secondsLeft<=0}},beforeUnmount(){this.unsubscribe(),this.unsubscribeAction(),this.clearIntervals(),this.removeMouseListeners(),document.removeEventListener("visibilitychange",this.onVisibilityChange),this.leaveTable()},methods:{resetInstanceVariables(){this.handBall=!1,this.selectedPocket=null,this.pocketSelection=!1,this.cue.force=0,this.cue.position=this.cueBall.position,this.resultSnapshot=null},clearIntervals(){this.stopCueInterval(),clearInterval(bn),clearInterval(Qt)},isTimerRestartRequiredForAction(e){return e.type=="poolPlayTurn"||e.type==="poolSetHandBall"||e.type==="poolSelectPocket"},consumeTurns(){if(this.turnQueue.actions.length===0){const t=!!this.isMyTurnInStore();this.poolTable.mouseEnabled=t,console.log("TurnQueue is empty, mouseEnabled "+this.poolTable.mouseEnabled);return}if(this.turnQueue.blocked){console.log("TurnQueue is blocked, not consuming");return}this.turnQueue.blocked=!0;const e=this.turnQueue.actions.splice(0,1)[0];if(console.log("Starting to consume turn "+JSON.stringify(e)),e.shootBall)console.log("shootball"),this.firstTurnPlayed=!0,this.shootBall(e).then(()=>{console.log("shootball done"),this.selectedPocket=null,this.cue.force=0;const t=this.isMyTurnInStore()?0:1500;this.unblockQueue(t),this.playingTurn=!1});else if(e.setHandBall){this.setHandBall(e);const t=this.isMyTurnInStore()?0:2e3;this.unblockQueue(t)}else e.setSelectedPocket!=null?(this.selectedPocket=e.setSelectedPocket,this.pocketSelection=!1,this.unblockQueue(250)):e.askHandBallPosition?(this.handBall=!0,this.cueBall.image.visible=!0,this.unblockQueue(0)):e.lastTurn?this.handleGameEnd(e):e.askPocketSelection?(this.pocketSelection=!0,this.unblockQueue(0)):e.changePlayer&&this.$store.dispatch("changeTurn",e.nextTurnPlayer).then(()=>{this.unblockQueue(0)})},unblockQueue(e=0){this.turnQueue.blocked=!1,this.draw(),setTimeout(()=>{this.consumeTurns()},e)},produceTurns(e){e.type==="poolPlayTurn"?(this.createShootBallTurn(e),e.payload.pool.turnResult==="CHANGE_TURN"?this.createChangePlayerTurn(e):e.payload.pool.turnResult==="HANDBALL"?(this.createChangePlayerTurn(e),this.isMe(e.payload.pool.whoPlayed)||this.createAskHandBallPositionTurn(e)):e.payload.pool.turnResult==="ASK_POCKET_SELECTION"&&(this.isTurnChange(e.payload.table.playerInTurn)&&this.createChangePlayerTurn(e),this.isMe(e.payload.table.playerInTurn.name)&&this.createAskPocketSelectionTurn(e))):e.type==="poolSetHandBallFail"?this.createAskHandBallPositionTurn(e):e.type==="poolSetHandBall"?(this.createPoolSetHandBallTurn(e),e.payload.pool.turnResult==="ASK_POCKET_SELECTION"&&(this.isTurnChange(e.payload.table.playerInTurn)&&this.createChangePlayerTurn(e),this.isMe(e.payload.table.playerInTurn.name)&&this.createAskPocketSelectionTurn(e))):e.type==="poolSelectPocket"?this.createSelectPocketTurn(e):e.type==="poolGameEnded"&&this.createLastTurn(e)},createAskHandBallPositionTurn(e){let t={turnResult:e.payload.pool.turnResult,askHandBallPosition:!0,askPocketSelection:!1,setSelectedPocket:null,setHandBall:!1,lastTurn:!1,whoPlayed:e.payload.pool.whoPlayed};return this.turnQueue.actions.splice(this.turnQueue.actions.length,0,t),console.log("produced: createAskHandBallPositionTurn"+this.turnQueue.actions.length),t},createAskPocketSelectionTurn(e){e.payload.pool.selectedPocket;let t=e.payload.table.playerInTurn,s={changePlayer:!1,turnResult:e.payload.pool.turnResult,askPocketSelection:!0,setSelectedPocket:null,setHandBall:null,nextTurnPlayer:t,lastTurn:!1,whoPlayed:e.payload.pool.whoPlayed};return this.turnQueue.actions.splice(this.turnQueue.actions.length,0,s),console.log("produced: createAskPocketSelectionTurn"+this.turnQueue.actions.length),s},createSelectPocketTurn(e){let t=e.payload.pool.selectedPocket,s={turnResult:e.payload.pool.turnResult,askPocketSelection:!1,setSelectedPocket:t,setHandBall:null,lastTurn:!1,whoPlayed:e.payload.pool.whoPlayed};return this.turnQueue.actions.splice(this.turnQueue.actions.length,0,s),console.log("produced: createSelectPocketTurn"+this.turnQueue.actions.length),s},createLastTurn(e){const t=e.payload.pool.turnResult,s=e.payload.pool.winner.name;let n={askPocketSelection:!1,setSelectedPocket:null,setHandBall:null,lastTurn:!0,winner:s,winReason:t,whoPlayed:e.payload.pool.whoPlayed};return this.turnQueue.actions.splice(this.turnQueue.actions.length,0,n),console.log("produced: createLastTurn"+this.turnQueue.actions.length),n},createChangePlayerTurn(e){let t=e.payload.table.playerInTurn,s={changePlayer:!0,nextTurnPlayer:t,lastTurn:!1,whoPlayed:e.payload.pool.whoPlayed};return this.turnQueue.actions.splice(this.turnQueue.actions.length,0,s),console.log("produced: createChangePlayerTurn"+this.turnQueue.actions.length),s},createShootBallTurn(e){let t=e.payload.pool.cue;t.force=e.payload.pool.cue.force,t.angle=e.payload.pool.cue.angle;let s={shootBall:!0,cue:t,turnResult:e.payload.pool.turnResult,lastTurn:!1,whoPlayed:e.payload.pool.whoPlayed};return this.turnQueue.actions.splice(this.turnQueue.actions.length,0,s),console.log("produced: createShootBallTurn"+this.turnQueue.actions.length),s},createPoolSetHandBallTurn(e){let{...t}=this.cueBall;t.position=e.payload.pool.cueBall.position,t.inPocket=!1,t.image.visible=!0;let s={...this.cue};s.force=0,s.position=t.position;let n={cue:s,cueBall:t,turnResult:e.payload.pool.turnResult,setHandBall:!0,nextTurnPlayer:e.payload.table.playerInTurn,lastTurn:!1,whoPlayed:e.payload.pool.whoPlayed};return this.turnQueue.actions.splice(this.turnQueue.actions.length,0,n),console.log("produced: createPoolSetHandBallTurn"+this.turnQueue.actions.length),n},handleGameEnd(e){if(this.theTable.playerInTurn=null,this.clearTurnQueue(),this.turnQueue.blocked=!0,this.clearIntervals(),this.removeMouseListeners(),this.poolTable.mouseEnabled=!1,e){const t={from:"System",text:e.winner+" won ( "+e.winReason.toLowerCase()+" )"};this.$store.dispatch("chat",t)}this.draw()},setHandBall(e){this.cueBall.position=e.cueBall.position,this.cueBall.inPocket=!1,this.cue.position=this.cueBall.position,this.handBall=!1,this.cue.force=0,this.cueBall.image.visible=!0},createTableSnapshot(e){this.firstTurnPlayed=!0,this.resultSnapshot=e},updateRemainingBallPositions(e,t){e.forEach(s=>{let n=t.find(i=>i.number===s.number);this.updateBallPropertiesWithoutFriction(n,s.position)})},updateBallPropertiesWithoutFriction(e,t){e.position.x=t.x,e.position.y=t.y,e.velocity.x=0,e.velocity.y=0},updatePocketedBalls(e,t=!0){if(!e||e.length===0)return;let s=t?this.canvas.width*.12:this.canvas.width*.55;for(let n=0;n<e.length;n++){let i=e[n],o=this.balls.find(r=>r.number===i.number);!o||(o.position.x=s+n*o.diameter,o.position.y=this.canvas.height*.06,o.inPocket||(o.image.canvasDimension.x=o.image.canvasDimension.x*.8,o.image.canvasDimension.y=o.image.canvasDimension.y*.8),o.inPocket=!0)}},movePocketedBallToEdgeOfTable(e){if(e.number===8||e.number===0)return;let t=this.resultSnapshot.payload.table.playerABalls.findIndex(n=>n.number===e.number),s=this.canvas.width*.12;t===-1&&(t=this.resultSnapshot.payload.table.playerBBalls.findIndex(n=>n.number===e.number)+1,s=this.canvas.width*.55),e.position.x=s+t*e.diameter,e.position.y=this.canvas.height*.06},putBallInMiddleOfPocket(e,t){e.inPocket||(e.velocity.x=0,e.velocity.y=0,t&&(e.position.x=t.center.x,e.position.y=t.center.y),e.inPocket=!0,!(e.number===0||e.number===8)&&(e.image.canvasDimension.x=e.image.canvasDimension.x*.8,e.image.canvasDimension.y=e.image.canvasDimension.y*.8))},draw(){this.isDocumentVisible()&&requestAnimationFrame(this.repaintAll)},repaintComponent(e){const t=e.image;!e.image.visible||(this.renderingContext.translate(e.position.x,e.position.y),t.canvasRotationAngle&&this.renderingContext.rotate(t.canvasRotationAngle),t.canvasDestination||(t.canvasDestination={x:0,y:0}),this.gameOptions&&this.gameOptions.pointerLine&&e.hasOwnProperty("force")&&(this.renderingContext.beginPath(),this.renderingContext.moveTo(-200,0),this.renderingContext.lineTo(200,0),this.renderingContext.stroke(),this.renderingContext.beginPath(),this.renderingContext.moveTo(0,-200),this.renderingContext.lineTo(0,200),this.renderingContext.stroke()),!this.isMyTurnInStore()&&e.hasOwnProperty("force")?this.renderingContext.drawImage(t.image,1430,0,100,22,t.canvasDestination.x+825,t.canvasDestination.y,88,10):this.renderingContext.drawImage(t.image,0,0,t.realDimension.x,t.realDimension.y,t.canvasDestination.x,t.canvasDestination.y,t.canvasDimension.x,t.canvasDimension.y),this.renderingContext.resetTransform())},repaintAll(){this.renderingContext.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.repaintComponent(this.poolTable),this.repaintComponent(this.cueBall);for(let e=0;e<this.balls.length;e++)this.repaintComponent(this.balls[e]);if(this.isOngoingGame()||this.repaintGameEnd(),this.repaintNames(),!this.handBall&&!this.playingTurn&&this.repaintComponent(this.cue),this.handBall&&this.isMyTurnInStore()&&(this.renderingContext.font="bolder 16px Arial",this.renderingContext.fillText("Set handball position",400,35)),this.pocketSelection&&this.isMyTurnInStore()){const e=this.selectedPocket===null?0:this.selectedPocket;this.repaintPocketSelection(e),this.renderingContext.font="bolder 16px Arial",this.renderingContext.fillText("Click to select pocket",400,35)}else this.selectedPocket!==null&&this.repaintPocketSelection(this.selectedPocket);this.renderingContext.fillStyle="black"},repaintGameEnd(){this.renderingContext.globalAlpha=.4,this.renderingContext.fillStyle="gray",this.renderingContext.fillRect(0,0,this.canvas.width,this.canvas.height)},initTable(){this.balls=[],this.turnQueue={actions:[],blocked:!1};let e=window.innerWidth,t=window.innerHeight;this.canvas=document.getElementById("canvas"),this.renderingContext=this.canvas.getContext("2d",{alpha:!1});let s=e,n=t;s=el,n=tl,this.canvas.height=n,this.canvas.width=s,document.addEventListener("visibilitychange",this.onVisibilityChange);let i={x:el,y:tl},o={image:document.getElementById("tableImg"),canvasDimension:i,realDimension:{x:4551,y:2570},canvasRotationAngle:0,canvasDestination:{x:0,y:0},visible:!0};this.poolTable={image:o,position:{x:0,y:0},mouseEnabled:!1};const r={a:79,b:118,c:572},a={a:79,b:644,c:1090},l={a:1122,b:118,c:560},h={a:600,b:644,c:1090},u={a:600,b:118,c:572},c={a:80,b:118,c:560};this.poolTable.pockets=[],this.poolTable.topLeftPart=r,this.poolTable.topRightPart=a,this.poolTable.rightPart=l,this.poolTable.bottomRightPart=h,this.poolTable.bottomLeftPart=u,this.poolTable.leftPart=c;const p={center:{x:65,y:61},radius:32,pathwayLeft:{top:{x:54,y:93},bottom:{x:80,y:118}},pathwayRight:{top:{x:96,y:56},bottom:{x:117,y:77}}},b={center:{x:607,y:49},radius:28,pathwayLeft:{top:{x:580,y:56},bottom:{x:571,y:79}},pathwayRight:{top:{x:635,y:56},bottom:{x:644,y:79}}},x={center:{x:1144,y:61},radius:32,pathwayLeft:{top:{x:1112,y:56},bottom:{x:1089,y:79}},pathwayRight:{top:{x:1144,y:93},bottom:{x:1122,y:118}}},L={center:{x:1144,y:614},radius:32,pathwayLeft:{top:{x:1091,y:600},bottom:{x:1112,y:620}},pathwayRight:{top:{x:1122,y:562},bottom:{x:1142,y:580}}},I={center:{x:607,y:628},radius:28,pathwayLeft:{top:{x:571,y:600},bottom:{x:580,y:620}},pathwayRight:{top:{x:644,y:600},bottom:{x:635,y:620}}},w={center:{x:65,y:614},radius:32,pathwayLeft:{top:{x:80,y:558},bottom:{x:54,y:584}},pathwayRight:{top:{x:118,y:600},bottom:{x:98,y:620}}};this.poolTable.pockets.push(p),this.poolTable.pockets.push(b),this.poolTable.pockets.push(x),this.poolTable.pockets.push(L),this.poolTable.pockets.push(I),this.poolTable.pockets.push(w),this.poolTable.topMiddlePocket=b,this.poolTable.topRightPocket=x,this.poolTable.bottomRightPocket=L,this.poolTable.bottomMiddlePocket=I,this.poolTable.bottomLeftPocket=w;const H={x:Kt,y:Kt};let Y={image:document.getElementById("0"),canvasDimension:H,realDimension:{x:141,y:141},canvasRotationAngle:0,canvasDestination:{x:-Kt/2,y:-Kt/2},visible:!0};this.cueBall={image:Y,diameter:Kt,radius:Kt/2,position:{x:1030,y:150},number:0,color:"white",velocity:{x:0,y:0}};let R={x:sl,y:nl},X={image:document.getElementById("cue3Img"),canvasDimension:R,realDimension:{x:1508,y:22},canvasDestination:{x:-R.x-Kt,y:-R.y/2},canvasRotationAngle:0,visible:!0};this.isPlayerInTurn(this.userName)&&(this.handBall=!0,this.poolTable.mouseEnabled=!0);let J={x:this.cueBall.position.x,y:this.cueBall.position.y},ne=0;this.cue={position:J,image:X,force:ne,angle:0};for(let se=1;se<16;se++){let Q=this.createBall(se,this.cueBall.diameter);this.balls.push(Q)}this.balls.push(this.cueBall),this.watch!=="1"&&(this.removeMouseListeners(),this.addMouseListeners()),this.draw()},isDocumentVisible(){return document.visibilityState==="visible"},onVisibilityChange(){this.isDocumentVisible()?(this.stopCueInterval(),clearInterval(bn),this.createTableFromSnapShot(),this.clearTurnQueue(),this.unblockQueue(0),this.draw()):(this.turnQueue.blocked=!0,this.stopCueInterval(),clearInterval(bn))},clearTurnQueue(){this.turnQueue.actions.splice(0,this.turnQueue.actions.length)},createTableFromSnapShot(){if(!this.resultSnapshot)return;let e=this.resultSnapshot.payload.table,t=this.resultSnapshot.payload.pool;this.playingTurn=!1,this.updatePocketedBalls(e.playerABalls),this.updatePocketedBalls(e.playerBBalls,!1),this.updateRemainingBallPositions(e.remainingBalls,this.balls),this.cueBall.position=t.cueBall.position,this.cueBall.velocity.x=0,this.cueBall.velocity.y=0;let s=e.playerInTurn;if(this.changeTurnIfRequired(s),t.winner){console.log("winner from snapshot"+t.winner.name);const n=t.winner.name,i=t.turnResult;let o={askPocketSelection:!1,setSelectedPocket:null,setHandBall:null,lastTurn:!0,winner:n,winReason:i,whoPlayed:t.whoPlayed};this.handleGameEnd(o)}else this.isMyTurnInStore()&&(this.poolTable.mouseEnabled=!0);t.turnResult==="HANDBALL"&&this.isMyTurnInStore()?this.handBall=!0:t.turnResult==="ASK_POCKET_SELECTION"&&this.isMyTurnInStore()&&(this.pocketSelection=!0),requestAnimationFrame(this.repaintAll)},isTableTopBoundry(e){return e.position.x>=this.poolTable.topLeftPart.b&&e.position.x<=this.poolTable.topLeftPart.c&&e.position.y-this.cueBall.radius<=this.poolTable.topLeftPart.a||e.position.x>=this.poolTable.topRightPart.b&&e.position.x<=this.poolTable.topRightPart.c&&e.position.y-this.cueBall.radius<=this.poolTable.topRightPart.a},isTableLeftBoundry(e){return e.position.x<=this.poolTable.leftPart.a+this.cueBall.radius&&e.position.y>=this.poolTable.leftPart.b&&e.position.y<=this.poolTable.leftPart.c},isTableRightBoundry(e){return e.position.x>=this.poolTable.rightPart.a-this.cueBall.radius&&e.position.y>=this.poolTable.rightPart.b&&e.position.y<=this.poolTable.rightPart.c},isTableBottomBoundry(e){return e.position.x>=this.poolTable.bottomLeftPart.b&&e.position.x<=this.poolTable.bottomLeftPart.c&&e.position.y+this.cueBall.radius>=this.poolTable.bottomLeftPart.a||e.position.x>=this.poolTable.bottomRightPart.b&&e.position.x<=this.poolTable.bottomRightPart.c&&e.position.y+this.cueBall.radius>=this.poolTable.bottomRightPart.a},restartReducerInterval(e){Qt&&this.stopReducerInterval(),this.theTable.secondsLeft=this.getAllTimeControls()[this.theTable.timeControlIndex].seconds,Qt=setInterval(()=>{this.theTable.secondsLeft--,this.gameOptions.notificationSound&&this.theTable.secondsLeft<15&&this.playNotificationSound()},1e3)},startCueInterval(){console.log("called startCueInterval"),Ht&&(console.log("called startCueInterval stopping first"),this.stopInterval()),Ht=setInterval(this.updateCueForce,50),console.log("called startCueInterval startin really"+Ht)},stopCueInterval(){console.log("stopping cueForceInterval "+Ht),Ht=clearInterval(Ht),console.log("stopped cueForceInterval"+Ht)},stopReducerInterval(){Qt=clearInterval(Qt),console.log("stoppedReducerInterval"+Qt)},createBall(e,t){const s={x:t,y:t};let n={x:this.canvas.width*.65+t*.9*this.calculateRackColumn(e),y:this.canvas.height/2+t*.5*this.calculateRackRow(e)};return{image:{image:document.getElementById(e.toString()),canvasDimension:s,realDimension:{x:141,y:141},canvasRotationAngle:0,canvasDestination:{x:-t/2,y:-t/2},visible:!0},diameter:t,radius:t/2,position:n,number:e,color:this.calculateBallColor(e),velocity:{x:0,y:0}}},addMouseListeners(){this.canvas.addEventListener("mousemove",this.handleMouseMove),this.canvas.addEventListener("mousedown",this.handleMouseDown),this.canvas.addEventListener("mouseup",this.handleMouseUp),this.canvas.onpointerdown=this.handleMouseDown,this.canvas.onpointerup=this.handleMouseUp,this.canvas.onpointermove=this.handleMouseMove,this.canvas.addEventListener("pointerdown",this.handleMouseDown,!1),this.canvas.addEventListener("pointerup",this.handleMouseUp,!1),this.canvas.addEventListener("pointermove",this.handleMouseMove,!1),this.canvas.addEventListener("contextmenu",e=>e.preventDefault())},removeMouseListeners(){this.canvas.removeEventListener("mousemove",this.handleMouseMove),this.canvas.removeEventListener("mousedown",this.handleMouseDown),this.canvas.removeEventListener("mouseup",this.handleMouseUp),this.canvas.removeEventListener("contextmenu",e=>e.preventDefault()),this.canvas.removeEventListener("pointerdown",this.handleMouseUp),this.canvas.removeEventListener("pointerup",this.handleMouseUp),this.canvas.removeEventListener("pointermove",this.handleMouseUp)},handleMouseDown(e){e.button!==2&&(!this.poolTable.mouseEnabled||this.pocketSelection||this.poolTable.mouseEnabled&&!this.handBall&&(this.cue.force=0,console.log("cueForce interval:"+Ht),Ht||this.startCueInterval()))},handleMouseUp(e){if(!!this.poolTable.mouseEnabled){if(this.stopCueInterval(),this.pocketSelection){this.poolTable.mouseEnabled=!1,this.sendPocketSelection(this.selectedPocket);return}else this.handBall?(this.cueBall.position.x=e.offsetX,this.cueBall.position.y=e.offsetY,this.hb(e.offsetX,e.offsetY,this.canvas)):this.handBall||(this.poolTable.mouseEnabled=!1,this.stopReducerInterval(),this.sendTurn(this.cue,this.cueBall,this.canvas));this.poolTable.mouseEnabled=!1}},isMyTurnInSnapshot(){return this.resultSnapshot?this.resultSnapshot.payload.table.playerInTurn.name===this.userName:!1},isHandBallPositionAllowed(){if(!this.firstTurnPlayed&&this.mouseCoordsTemp.x>this.canvas.width*.25)return!1;if(this.mouseCoordsTemp.x>this.poolTable.leftPart.a+this.cueBall.radius&&this.mouseCoordsTemp.x<this.poolTable.rightPart.a-this.cueBall.radius){if(!(this.mouseCoordsTemp.y>this.poolTable.topLeftPart.a+this.cueBall.radius&&this.mouseCoordsTemp.y<this.poolTable.bottomRightPart.a-this.cueBall.radius))return!1}else return!1;for(let e=0;e<this.balls.length;e++){const t=this.balls[e];if(t.number===0)continue;let s=t.position.x-this.cueBall.position.x,n=t.position.y-this.cueBall.position.y;if(!(Math.abs(s)>t.diameter)&&!(Math.abs(n)>t.diameter))return!1}return!0},handleMouseMove(e){if(!!this.poolTable.mouseEnabled){if(this.mouseCoordsTemp={x:e.offsetX,y:e.offsetY},this.pocketSelection){this.selectedPocket=this.getClosestPocket(e),this.draw();return}this.handBall?(this.cueBall.position.x=e.offsetX,this.cueBall.position.y=e.offsetY,setTimeout(()=>{this.isHandBallPositionAllowed(e)?this.cueBall.image.visible=!0:this.cueBall.image.visible=!1,this.draw()},10)):(this.cue.position.x=this.cueBall.position.x,this.cue.position.y=this.cueBall.position.y,this.mousePoint={x:e.offsetX,y:e.offsetY},this.isMyTurnInStore()&&setTimeout(()=>{this.updateCueAngle(e),this.draw()},150))}},handleAfterAnimation(){return new Promise(e=>{this.isMyTurnInStore()&&this.theTable.playerInTurn!==null&&(this.cue.force=0),this.draw(),e("resolve after animation")})},shootBall(e){return new Promise(t=>{this.cue.force<10&&(this.cue.force=10);let s={x:-sl-Kt/2,y:-nl/2};this.cue.force=e.cue.force,this.cue.angle=e.cue.angle,this.cue.image.canvasRotationAngle=e.cue.angle,this.cue.image.canvasDestination=s,this.cueBall.velocity={x:this.cue.force*Math.cos(this.cue.image.canvasRotationAngle),y:this.cue.force*Math.sin(this.cue.image.canvasRotationAngle)},this.collideCueWithCueBall().then(()=>{this.playingTurn=!0,this.handleCollisions().then(()=>{this.handleAfterAnimation().then(()=>{t("animations done")})})})})},collideCueWithCueBall(){return new Promise(e=>{this.cue.position=this.cueBall.position,setTimeout(()=>{this.draw(),e("Cue movement done")},145)})},handleCollisions(){return new Promise(e=>{bn=setInterval(()=>{this.updateBallProperties(),this.handleBallCollisions(),this.draw(),this.isAnyBallMoving()||(clearInterval(bn),e("collisions checked"))},25)})},updateBallProperties(){for(let e=0;e<this.balls.length;e++){let t=this.balls[e];if(t.inPocket){t.velocity={x:0,y:0};continue}t.position.x+=t.velocity.x*ai,t.position.y+=t.velocity.y*ai,t.velocity.x*=ri,t.velocity.y*=ri}},checkIfGoesToPocket(e){let t=this.poolTable.pockets[0],s=Math.pow(e.position.x-t.center.x,2)+Math.pow(e.position.y-t.center.y,2)<=Math.pow(t.radius,2);if(s||(t=this.poolTable.topMiddlePocket,s=Math.pow(e.position.x-t.center.x,2)+Math.pow(e.position.y-t.center.y,2)<=Math.pow(t.radius,2),s)||(t=this.poolTable.topRightPocket,s=Math.pow(e.position.x-t.center.x,2)+Math.pow(e.position.y-t.center.y,2)<=Math.pow(t.radius,2),s)||(t=this.poolTable.bottomRightPocket,s=Math.pow(e.position.x-t.center.x,2)+Math.pow(e.position.y-t.center.y,2)<=Math.pow(t.radius,2),s)||(t=this.poolTable.bottomMiddlePocket,s=Math.pow(e.position.x-t.center.x,2)+Math.pow(e.position.y-t.center.y,2)<=Math.pow(t.radius,2),s)||(t=this.poolTable.bottomLeftPocket,s=Math.pow(e.position.x-t.center.x,2)+Math.pow(e.position.y-t.center.y,2)<=Math.pow(t.radius,2),s))return t},handleBallCollisions(){for(let e=0;e<this.balls.length;e++){const t=this.balls[e];this.isMoving(t)&&!t.inPocket&&this.checkAndHandleTableCollision(t);for(let s=e+1;s<this.balls.length;s++){const n=this.balls[s],i=this.balls[e];n.inPocket||i.inPocket||(this.isMoving(n)||this.isMoving(i))&&this.checkAndHandleCollision(i,n)}}},checkAndHandleCollision(e,t){let s=this.subtractVectors(e.position,t.position);const n=this.calculateLength(s);if(n>this.cueBall.diameter)return;const i=this.multiplyVector(s,(this.cueBall.diameter-n)/n);e.position.x+=i.x*.5,e.position.y+=i.y*.5,t.position.x-=i.x*.5,t.position.y-=i.y*.5;const o=1/n,r=this.multiplyVector(s,o),a={x:-r.y,y:r.x},l=this.dotProduct(r,e.velocity),h=this.dotProduct(a,e.velocity),u=this.dotProduct(r,t.velocity),c=this.dotProduct(a,t.velocity);let p=u,b=l;p={x:r.x*p,y:r.y*p};const x={x:a.x*h,y:a.y*h};b={x:r.x*b,y:r.y*b};const L={x:a.x*c,y:a.y*c};e.velocity={x:p.x+x.x,y:p.y+x.y},t.velocity={x:b.x+L.x,y:b.y+L.y}},isMoving(e){return e?e.velocity.x!==0||e.velocity.y!==0:!1},checkAndHandleTableCollision(e){const t=this.checkIfGoesToPocket(e);if(t){this.putBallInMiddleOfPocket(e,t),setTimeout(()=>{this.movePocketedBallToEdgeOfTable(e),this.draw()},1500);return}this.isBallInMiddleArea(e)||(this.isTableTopBoundry(e)?e.velocity.y=Math.abs(e.velocity.y):this.isTableBottomBoundry(e)?e.velocity.y=-Math.abs(e.velocity.y):this.isTableLeftBoundry(e)?e.velocity.x=Math.abs(e.velocity.x):this.isTableRightBoundry(e)?e.velocity.x=-Math.abs(e.velocity.x):this.checkAndHandlePocketPathwayCollisions(e))},updatePositionAndVelocity(e){e.position.x+=e.velocity.x*ai,e.position.y+=e.velocity.y*ai,e.velocity.x*=ri,e.velocity.y*=ri},checkAndHandlePocketPathwayCollisions(e){for(let t=0;t<this.poolTable.pockets.length;t++){const s=this.poolTable.pockets[t];if(this.isPathwayBorderCollision(s.pathwayRight,e,t)){let n=this.calculateBallVelocityOnPathwayBorderCollision(s.pathwayRight,e);return e.velocity=n,!0}else if(this.isPathwayBorderCollision(s.pathwayLeft,e,t)){let n=this.calculateBallVelocityOnPathwayBorderCollision(s.pathwayLeft,e);return e.velocity=n,!0}}return!1},calculateBallVelocityOnPathwayBorderCollision(e,t){let s=this.subtractVectors(e.bottom,e.top);const n=this.calculateLength(s),i=1/n,o=this.multiplyVector(s,i);let r=2*this.dotProduct(o,t.velocity),a=this.multiplyVector(o,r);return this.subtractVectors(a,t.velocity)},isPathwayBorderCollision(e,t){if(this.isBallInMiddleArea(t))return!1;const s=e.top,n=e.bottom,i=t.position,o=this.subtractVectors(i,s),r=this.subtractVectors(n,s),a=this.addVectors(this.projectVectorOnVector(o,r),s),l=this.subtractVectors(a,s),h=Math.abs(r.x)>Math.abs(r.y)?l.x/r.x:l.y/r.y;let u;return h<=0?u=Math.sqrt(this.hypot2(i,s)):h>=1&&(u=Math.sqrt(this.hypot2(i,n))),u||(u=Math.sqrt(this.hypot2(i,a))),u<=t.radius},isBallInMiddleArea(e){const t={x:125,y:130},s={x:1072,y:550},n=this.subtractVectors(e.position,t),i=this.subtractVectors(s,e.position);if(n.x>0&&n.y>0)return i.x>0&&i.y>0},hypot2(e,t){return this.dotProduct(this.subtractVectors(e,t),this.subtractVectors(e,t))},projectVectorOnVector(e,t){const s=this.dotProduct(e,t)/this.dotProduct(t,t);return{x:s*t.x,y:s*t.y}},calculateLength(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))},calculateVectorLength(e){return Math.sqrt(Math.pow(e.velocity.x,2)+Math.pow(e.velocity.y,2))<5&&(e.velocity={x:0,y:0}),e},multiplyVector(e,t){return{x:e.x*t,y:e.y*t}},addVectors(e,t){return{x:e.x+t.x,y:e.y+t.y}},subtractVectors(e,t){return{x:e.x-t.x,y:e.y-t.y}},dotProduct(e,t){return e.x*t.x+e.y*t.y},isAnyBallMoving(){for(let e=0;e<this.balls.length;e++){let t=this.balls[e];if(this.calculateVectorLength(t),t.velocity.x!==0||t.velocity.y!==0)return!0}return!1},updateCueAngle(e){let t=this.mousePoint.y-this.cueBall.position.y,s=this.mousePoint.x-this.cueBall.position.x;const n=Math.atan2(t,s);this.cue.angle=n,this.cue.image.canvasRotationAngle=n,this.t(this.sp,1e3,this.cue,this.cueBall,this.canvas)},updateCueForce(){this.cue.force+=10,this.cue.image.canvasDestination.x-=5,this.draw(),this.cue.force>=250&&(this.stopCueInterval(),this.stopReducerInterval(),this.poolTable.mouseEnabled=!1,this.sendTurn(this.cue,this.cueBall,this.canvas))},updatePointerLine(e){if(!e)return;const t=this.cueBall;this.pointerLine={fromX:t.position.x+t.diameter/2,fromY:t.position.y+t.diameter/2,toX:e.offsetX,toY:e.offsetY}},calculateBallColor(e){return e===8?"black":e%2===0?"red":"yellow"},calculateRackRow(e){return e===1||e===8||e==13?0:e===3||e===15?1:e===10||e===2||e===15?-1:e===4||e===12?-2:e===6||e===14?2:e===7?3:e===9?-3:e===5?-4:e===11?4:-4},calculateRackColumn(e){return e===1?1:e===10||e===3?2:e===4||e===8||e===14?3:e===7||e===9||e===2||e===15?4:5},repaintTableParts(e){this.renderingContext.moveTo(this.poolTable.leftPart.a,this.poolTable.leftPart.b),this.renderingContext.lineTo(this.poolTable.leftPart.a,this.poolTable.leftPart.c),this.renderingContext.stroke(),this.renderingContext.closePath(),this.renderingContext.moveTo(this.poolTable.topLeftPart.b,this.poolTable.topLeftPart.a),this.renderingContext.lineTo(this.poolTable.topLeftPart.c,this.poolTable.topLeftPart.a),this.renderingContext.stroke(),this.renderingContext.closePath(),this.renderingContext.moveTo(this.poolTable.topRightPart.b,this.poolTable.topRightPart.a),this.renderingContext.lineTo(this.poolTable.topRightPart.c,this.poolTable.topRightPart.a),this.renderingContext.stroke(),this.renderingContext.closePath(),this.renderingContext.moveTo(this.poolTable.rightPart.a,this.poolTable.rightPart.b),this.renderingContext.lineTo(this.poolTable.rightPart.a,this.poolTable.rightPart.c),this.renderingContext.stroke(),this.renderingContext.closePath(),this.renderingContext.moveTo(this.poolTable.bottomRightPart.b,this.poolTable.bottomRightPart.a),this.renderingContext.lineTo(this.poolTable.bottomRightPart.c,this.poolTable.bottomRightPart.a),this.renderingContext.stroke(),this.renderingContext.closePath(),this.renderingContext.moveTo(this.poolTable.bottomLeftPart.b,this.poolTable.bottomLeftPart.a),this.renderingContext.lineTo(this.poolTable.bottomLeftPart.c,this.poolTable.bottomLeftPart.a),this.renderingContext.stroke(),this.renderingContext.closePath()},repaintPockets(){this.renderingContext.fillStyle="red",this.renderingContext.lineWidth=1,this.renderingContext.beginPath(),this.renderingContext.arc(this.poolTable.pockets[0].center.x,this.poolTable.pockets[0].center.y,this.poolTable.pockets[0].radius,0,2*Math.PI),this.renderingContext.stroke(),this.renderingContext.closePath(),this.renderingContext.fill(),this.renderingContext.beginPath(),this.renderingContext.arc(this.poolTable.topMiddlePocket.center.x,this.poolTable.topMiddlePocket.center.y,this.poolTable.topMiddlePocket.radius,0,2*Math.PI),this.renderingContext.stroke(),this.renderingContext.closePath(),this.renderingContext.fill(),this.renderingContext.beginPath(),this.renderingContext.arc(this.poolTable.topRightPocket.center.x,this.poolTable.topRightPocket.center.y,this.poolTable.topRightPocket.radius,0,2*Math.PI),this.renderingContext.stroke(),this.renderingContext.closePath(),this.renderingContext.fill(),this.renderingContext.beginPath(),this.renderingContext.arc(this.poolTable.bottomRightPocket.center.x,this.poolTable.bottomRightPocket.center.y,this.poolTable.bottomRightPocket.radius,0,2*Math.PI),this.renderingContext.stroke(),this.renderingContext.closePath(),this.renderingContext.fill(),this.renderingContext.beginPath(),this.renderingContext.arc(this.poolTable.bottomMiddlePocket.center.x,this.poolTable.bottomMiddlePocket.center.y,this.poolTable.bottomMiddlePocket.radius,0,2*Math.PI),this.renderingContext.stroke(),this.renderingContext.closePath(),this.renderingContext.fill(),this.renderingContext.beginPath(),this.renderingContext.arc(this.poolTable.bottomLeftPocket.center.x,this.poolTable.bottomLeftPocket.center.y,this.poolTable.bottomLeftPocket.radius,0,2*Math.PI),this.renderingContext.stroke(),this.renderingContext.closePath(),this.renderingContext.fill()},repaintPathways(){this.mouseCoordsTemp&&(this.renderingContext.fillStyle="black",this.renderingContext.fillText("Mouse: x:"+this.mouseCoordsTemp.x+"  y:"+this.mouseCoordsTemp.y,150,50),this.renderingContext.fillText("Ball:  x:"+this.cueBall.position.x+"  y:"+this.cueBall.position.y,150,40));for(let e=0;e<6;e++){let t=this.poolTable.pockets[e].pathwayLeft;if(!t)break;this.renderingContext.moveTo(t.top.x,t.top.y),this.renderingContext.lineTo(t.bottom.x,t.bottom.y),this.renderingContext.stroke(),this.renderingContext.closePath(),t=this.poolTable.pockets[e].pathwayRight,this.renderingContext.moveTo(t.top.x,t.top.y),this.renderingContext.lineTo(t.bottom.x,t.bottom.y),this.renderingContext.stroke(),this.renderingContext.closePath()}},repaintNames(){this.renderingContext.font="bolder 16px Arial",this.renderingContext.fillStyle="black",this.renderingContext.fillText(this.theTable.playerA.name,this.canvas.width*.1,20),this.renderingContext.fillText(this.theTable.playerB.name,this.canvas.width*.55,20)},repaintPocketSelection(e){this.renderingContext.fillStyle="blue",this.renderingContext.lineWidth=1,this.renderingContext.beginPath(),this.renderingContext.arc(this.poolTable.pockets[e].center.x,this.poolTable.pockets[e].center.y,this.poolTable.pockets[e].radius,0,2*Math.PI),this.renderingContext.stroke(),this.renderingContext.closePath(),this.renderingContext.fill()}}});const _u=e=>(hn("data-v-054be8db"),e=e(),dn(),e),N_={class:"row"},R_={class:"col"},M_=["disabled"],D_={class:"row"},B_={class:"col-xs-12 col-sm-4"},H_=_u(()=>m("label",{class:"selectora",for:"notificationSound","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Beeps last 14 seconds in turn if checked"},[m("i",{class:"bi bi-music-note"})],-1)),V_={class:"ps-4"},F_=_u(()=>m("label",{class:"",for:"pointerLine"},"Bridge",-1)),j_={class:"row"},U_={class:"col-xs-12 col-sm-4"},z_={key:0,class:"text-success"},G_={key:1,class:"text-success"},W_={key:2,class:"text-success"},Y_={key:3,class:"text-danger"},q_={class:"col-xs-12 col-sm-8"};function K_(e,t,s,n,i,o){var a,l,h;const r=Rt("chat");return _(),T(ce,null,[m("div",N_,[m("div",R_,[e.resignButtonVisible?(_(),T("button",{key:0,disabled:e.resignButtonDisabled,onClick:t[0]||(t[0]=(...u)=>e.resign&&e.resign(...u)),type:"button",class:"btn btn-primary w-30 float-xs-start float-sm-end"}," Resign ",8,M_)):F("",!0),e.rematchButtonEnabled?(_(),T("button",{key:1,onClick:t[1]||(t[1]=(...u)=>e.rematch&&e.rematch(...u)),type:"button",class:"btn btn-primary w-30 float-xs-start float-sm-end"}," Rematch ")):F("",!0)])]),m("div",D_,[m("div",B_,[H_,Me(m("input",{type:"checkbox",id:"notificationSound","onUpdate:modelValue":t[2]||(t[2]=u=>e.gameOptions.notificationSound=u)},null,512),[[wt,e.gameOptions.notificationSound]]),m("span",V_,[Me(m("input",{class:"",type:"checkbox",id:"pointerLine","onUpdate:modelValue":t[3]||(t[3]=u=>e.gameOptions.pointerLine=u)},null,512),[[wt,e.gameOptions.pointerLine]]),F_])])]),m("div",j_,[m("div",U_,[e.playingTurn?(_(),T("span",z_,"Playing turn")):((a=e.theTable.playerInTurn)==null?void 0:a.name)===e.userName?(_(),T("span",G_," It's your turn "+j(e.userName)+" > time left:"+j(e.theTable.secondsLeft),1)):((l=e.theTable)==null?void 0:l.playerInTurn)===null?(_(),T("span",W_," Game ended ")):(_(),T("div",Y_," In turn: "+j((h=e.theTable.playerInTurn)==null?void 0:h.name),1))])]),m("div",q_,[m("canvas",{id:"canvas",width:"400",height:"400",style:{border:"1px solid"},class:Pe({"bg-secondary":e.theTable.playerInTurn==null})},null,2)]),re(r,{id:e.theTable.tableId},null,8,["id"])],64)}const Q_=Fe($_,[["render",K_],["__scopeId","data-v-054be8db"]]);/*!
  * vue-router v4.1.2
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Fs=typeof window<"u";function X_(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const xe=Object.assign;function fo(e,t){const s={};for(const n in t){const i=t[n];s[n]=Et(i)?i.map(e):e(i)}return s}const Pn=()=>{},Et=Array.isArray,J_=/\/$/,Z_=e=>e.replace(J_,"");function po(e,t,s="/"){let n,i={},o="",r="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(n=t.slice(0,l),o=t.slice(l+1,a>-1?a:t.length),i=e(o)),a>-1&&(n=n||t.slice(0,a),r=t.slice(a,t.length)),n=nT(n!=null?n:t,s),{fullPath:n+(o&&"?")+o+r,path:n,query:i,hash:r}}function eT(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function il(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function tT(e,t,s){const n=t.matched.length-1,i=s.matched.length-1;return n>-1&&n===i&&nn(t.matched[n],s.matched[i])&&Tu(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function nn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Tu(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(!sT(e[s],t[s]))return!1;return!0}function sT(e,t){return Et(e)?ol(e,t):Et(t)?ol(t,e):e===t}function ol(e,t){return Et(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function nT(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/");let i=s.length-1,o,r;for(o=0;o<n.length;o++)if(r=n[o],r!==".")if(r==="..")i>1&&i--;else break;return s.slice(0,i).join("/")+"/"+n.slice(o-(o===n.length?1:0)).join("/")}var Fn;(function(e){e.pop="pop",e.push="push"})(Fn||(Fn={}));var On;(function(e){e.back="back",e.forward="forward",e.unknown=""})(On||(On={}));function iT(e){if(!e)if(Fs){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Z_(e)}const oT=/^[^#]+#/;function rT(e,t){return e.replace(oT,"#")+t}function aT(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const Qi=()=>({left:window.pageXOffset,top:window.pageYOffset});function lT(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),i=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!i)return;t=aT(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function rl(e,t){return(history.state?history.state.position-t:-1)+e}const Ho=new Map;function cT(e,t){Ho.set(e,t)}function uT(e){const t=Ho.get(e);return Ho.delete(e),t}let hT=()=>location.protocol+"//"+location.host;function wu(e,t){const{pathname:s,search:n,hash:i}=t,o=e.indexOf("#");if(o>-1){let a=i.includes(e.slice(o))?e.slice(o).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),il(l,"")}return il(s,e)+n+i}function dT(e,t,s,n){let i=[],o=[],r=null;const a=({state:p})=>{const b=wu(e,location),x=s.value,L=t.value;let I=0;if(p){if(s.value=b,t.value=p,r&&r===x){r=null;return}I=L?p.position-L.position:0}else n(b);i.forEach(w=>{w(s.value,x,{delta:I,type:Fn.pop,direction:I?I>0?On.forward:On.back:On.unknown})})};function l(){r=s.value}function h(p){i.push(p);const b=()=>{const x=i.indexOf(p);x>-1&&i.splice(x,1)};return o.push(b),b}function u(){const{history:p}=window;!p.state||p.replaceState(xe({},p.state,{scroll:Qi()}),"")}function c(){for(const p of o)p();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u),{pauseListeners:l,listen:h,destroy:c}}function al(e,t,s,n=!1,i=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:i?Qi():null}}function fT(e){const{history:t,location:s}=window,n={value:wu(e,s)},i={value:t.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,h,u){const c=e.indexOf("#"),p=c>-1?(s.host&&document.querySelector("base")?e:e.slice(c))+l:hT()+e+l;try{t[u?"replaceState":"pushState"](h,"",p),i.value=h}catch(b){console.error(b),s[u?"replace":"assign"](p)}}function r(l,h){const u=xe({},t.state,al(i.value.back,l,i.value.forward,!0),h,{position:i.value.position});o(l,u,!0),n.value=l}function a(l,h){const u=xe({},i.value,t.state,{forward:l,scroll:Qi()});o(u.current,u,!0);const c=xe({},al(n.value,l,null),{position:u.position+1},h);o(l,c,!1),n.value=l}return{location:n,state:i,push:a,replace:r}}function pT(e){e=iT(e);const t=fT(e),s=dT(e,t.state,t.location,t.replace);function n(o,r=!0){r||s.pauseListeners(),history.go(o)}const i=xe({location:"",base:e,go:n,createHref:rT.bind(null,e)},t,s);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function mT(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),pT(e)}function gT(e){return typeof e=="string"||e&&typeof e=="object"}function Eu(e){return typeof e=="string"||typeof e=="symbol"}const Xt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Cu=Symbol("");var ll;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(ll||(ll={}));function on(e,t){return xe(new Error,{type:e,[Cu]:!0},t)}function Jt(e,t){return e instanceof Error&&Cu in e&&(t==null||!!(e.type&t))}const cl="[^/]+?",bT={sensitive:!1,strict:!1,start:!0,end:!0},yT=/[.+*?^${}()[\]/\\]/g;function vT(e,t){const s=xe({},bT,t),n=[];let i=s.start?"^":"";const o=[];for(const h of e){const u=h.length?[]:[90];s.strict&&!h.length&&(i+="/");for(let c=0;c<h.length;c++){const p=h[c];let b=40+(s.sensitive?.25:0);if(p.type===0)c||(i+="/"),i+=p.value.replace(yT,"\\$&"),b+=40;else if(p.type===1){const{value:x,repeatable:L,optional:I,regexp:w}=p;o.push({name:x,repeatable:L,optional:I});const H=w||cl;if(H!==cl){b+=10;try{new RegExp(`(${H})`)}catch(R){throw new Error(`Invalid custom RegExp for param "${x}" (${H}): `+R.message)}}let Y=L?`((?:${H})(?:/(?:${H}))*)`:`(${H})`;c||(Y=I&&h.length<2?`(?:/${Y})`:"/"+Y),I&&(Y+="?"),i+=Y,b+=20,I&&(b+=-8),L&&(b+=-20),H===".*"&&(b+=-50)}u.push(b)}n.push(u)}if(s.strict&&s.end){const h=n.length-1;n[h][n[h].length-1]+=.7000000000000001}s.strict||(i+="/?"),s.end?i+="$":s.strict&&(i+="(?:/|$)");const r=new RegExp(i,s.sensitive?"":"i");function a(h){const u=h.match(r),c={};if(!u)return null;for(let p=1;p<u.length;p++){const b=u[p]||"",x=o[p-1];c[x.name]=b&&x.repeatable?b.split("/"):b}return c}function l(h){let u="",c=!1;for(const p of e){(!c||!u.endsWith("/"))&&(u+="/"),c=!1;for(const b of p)if(b.type===0)u+=b.value;else if(b.type===1){const{value:x,repeatable:L,optional:I}=b,w=x in h?h[x]:"";if(Et(w)&&!L)throw new Error(`Provided param "${x}" is an array but it is not repeatable (* or + modifiers)`);const H=Et(w)?w.join("/"):w;if(!H)if(I)p.length<2&&e.length>1&&(u.endsWith("/")?u=u.slice(0,-1):c=!0);else throw new Error(`Missing required param "${x}"`);u+=H}}return u}return{re:r,score:n,keys:o,parse:a,stringify:l}}function _T(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function TT(e,t){let s=0;const n=e.score,i=t.score;for(;s<n.length&&s<i.length;){const o=_T(n[s],i[s]);if(o)return o;s++}if(Math.abs(i.length-n.length)===1){if(ul(n))return 1;if(ul(i))return-1}return i.length-n.length}function ul(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const wT={type:0,value:""},ET=/[a-zA-Z0-9_]/;function CT(e){if(!e)return[[]];if(e==="/")return[[wT]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(b){throw new Error(`ERR (${s})/"${h}": ${b}`)}let s=0,n=s;const i=[];let o;function r(){o&&i.push(o),o=[]}let a=0,l,h="",u="";function c(){!h||(s===0?o.push({type:0,value:h}):s===1||s===2||s===3?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:h,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),h="")}function p(){h+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&s!==2){n=s,s=4;continue}switch(s){case 0:l==="/"?(h&&c(),r()):l===":"?(c(),s=1):p();break;case 4:p(),s=n;break;case 1:l==="("?s=2:ET.test(l)?p():(c(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:s=3:u+=l;break;case 3:c(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return s===2&&t(`Unfinished custom RegExp for param "${h}"`),c(),r(),i}function xT(e,t,s){const n=vT(CT(e.path),s),i=xe(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function ST(e,t){const s=[],n=new Map;t=dl({strict:!1,end:!0,sensitive:!1},t);function i(u){return n.get(u)}function o(u,c,p){const b=!p,x=AT(u);x.aliasOf=p&&p.record;const L=dl(t,u),I=[x];if("alias"in u){const Y=typeof u.alias=="string"?[u.alias]:u.alias;for(const R of Y)I.push(xe({},x,{components:p?p.record.components:x.components,path:R,aliasOf:p?p.record:x}))}let w,H;for(const Y of I){const{path:R}=Y;if(c&&R[0]!=="/"){const X=c.record.path,J=X[X.length-1]==="/"?"":"/";Y.path=c.record.path+(R&&J+R)}if(w=xT(Y,c,L),p?p.alias.push(w):(H=H||w,H!==w&&H.alias.push(w),b&&u.name&&!hl(w)&&r(u.name)),x.children){const X=x.children;for(let J=0;J<X.length;J++)o(X[J],w,p&&p.children[J])}p=p||w,l(w)}return H?()=>{r(H)}:Pn}function r(u){if(Eu(u)){const c=n.get(u);c&&(n.delete(u),s.splice(s.indexOf(c),1),c.children.forEach(r),c.alias.forEach(r))}else{const c=s.indexOf(u);c>-1&&(s.splice(c,1),u.record.name&&n.delete(u.record.name),u.children.forEach(r),u.alias.forEach(r))}}function a(){return s}function l(u){let c=0;for(;c<s.length&&TT(u,s[c])>=0&&(u.record.path!==s[c].record.path||!xu(u,s[c]));)c++;s.splice(c,0,u),u.record.name&&!hl(u)&&n.set(u.record.name,u)}function h(u,c){let p,b={},x,L;if("name"in u&&u.name){if(p=n.get(u.name),!p)throw on(1,{location:u});L=p.record.name,b=xe(kT(c.params,p.keys.filter(H=>!H.optional).map(H=>H.name)),u.params),x=p.stringify(b)}else if("path"in u)x=u.path,p=s.find(H=>H.re.test(x)),p&&(b=p.parse(x),L=p.record.name);else{if(p=c.name?n.get(c.name):s.find(H=>H.re.test(c.path)),!p)throw on(1,{location:u,currentLocation:c});L=p.record.name,b=xe({},c.params,u.params),x=p.stringify(b)}const I=[];let w=p;for(;w;)I.unshift(w.record),w=w.parent;return{name:L,path:x,params:b,matched:I,meta:PT(I)}}return e.forEach(u=>o(u)),{addRoute:o,resolve:h,removeRoute:r,getRoutes:a,getRecordMatcher:i}}function kT(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function AT(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:IT(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function IT(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="boolean"?s:s[n];return t}function hl(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function PT(e){return e.reduce((t,s)=>xe(t,s.meta),{})}function dl(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}function xu(e,t){return t.children.some(s=>s===e||xu(e,s))}const Su=/#/g,OT=/&/g,LT=/\//g,$T=/=/g,NT=/\?/g,ku=/\+/g,RT=/%5B/g,MT=/%5D/g,Au=/%5E/g,DT=/%60/g,Iu=/%7B/g,BT=/%7C/g,Pu=/%7D/g,HT=/%20/g;function Sr(e){return encodeURI(""+e).replace(BT,"|").replace(RT,"[").replace(MT,"]")}function VT(e){return Sr(e).replace(Iu,"{").replace(Pu,"}").replace(Au,"^")}function Vo(e){return Sr(e).replace(ku,"%2B").replace(HT,"+").replace(Su,"%23").replace(OT,"%26").replace(DT,"`").replace(Iu,"{").replace(Pu,"}").replace(Au,"^")}function FT(e){return Vo(e).replace($T,"%3D")}function jT(e){return Sr(e).replace(Su,"%23").replace(NT,"%3F")}function UT(e){return e==null?"":jT(e).replace(LT,"%2F")}function Oi(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function zT(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const o=n[i].replace(ku," "),r=o.indexOf("="),a=Oi(r<0?o:o.slice(0,r)),l=r<0?null:Oi(o.slice(r+1));if(a in t){let h=t[a];Et(h)||(h=t[a]=[h]),h.push(l)}else t[a]=l}return t}function fl(e){let t="";for(let s in e){const n=e[s];if(s=FT(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(Et(n)?n.map(o=>o&&Vo(o)):[n&&Vo(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+s,o!=null&&(t+="="+o))})}return t}function GT(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=Et(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const WT=Symbol(""),pl=Symbol(""),Xi=Symbol(""),Ou=Symbol(""),Fo=Symbol("");function yn(){let e=[];function t(n){return e.push(n),()=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)}}function s(){e=[]}return{add:t,list:()=>e,reset:s}}function ts(e,t,s,n,i){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((r,a)=>{const l=c=>{c===!1?a(on(4,{from:s,to:t})):c instanceof Error?a(c):gT(c)?a(on(2,{from:t,to:c})):(o&&n.enterCallbacks[i]===o&&typeof c=="function"&&o.push(c),r())},h=e.call(n&&n.instances[i],t,s,l);let u=Promise.resolve(h);e.length<3&&(u=u.then(l)),u.catch(c=>a(c))})}function mo(e,t,s,n){const i=[];for(const o of e)for(const r in o.components){let a=o.components[r];if(!(t!=="beforeRouteEnter"&&!o.instances[r]))if(YT(a)){const h=(a.__vccOpts||a)[t];h&&i.push(ts(h,s,n,o,r))}else{let l=a();i.push(()=>l.then(h=>{if(!h)return Promise.reject(new Error(`Couldn't resolve component "${r}" at "${o.path}"`));const u=X_(h)?h.default:h;o.components[r]=u;const p=(u.__vccOpts||u)[t];return p&&ts(p,s,n,o,r)()}))}}return i}function YT(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function ml(e){const t=Lt(Xi),s=Lt(Ou),n=Ie(()=>t.resolve(Re(e.to))),i=Ie(()=>{const{matched:l}=n.value,{length:h}=l,u=l[h-1],c=s.matched;if(!u||!c.length)return-1;const p=c.findIndex(nn.bind(null,u));if(p>-1)return p;const b=gl(l[h-2]);return h>1&&gl(u)===b&&c[c.length-1].path!==b?c.findIndex(nn.bind(null,l[h-2])):p}),o=Ie(()=>i.value>-1&&XT(s.params,n.value.params)),r=Ie(()=>i.value>-1&&i.value===s.matched.length-1&&Tu(s.params,n.value.params));function a(l={}){return QT(l)?t[Re(e.replace)?"replace":"push"](Re(e.to)).catch(Pn):Promise.resolve()}return{route:n,href:Ie(()=>n.value.href),isActive:o,isExactActive:r,navigate:a}}const qT=De({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ml,setup(e,{slots:t}){const s=un(ml(e)),{options:n}=Lt(Xi),i=Ie(()=>({[bl(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[bl(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const o=t.default&&t.default(s);return e.custom?o:gc("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:i.value},o)}}}),KT=qT;function QT(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function XT(e,t){for(const s in t){const n=t[s],i=e[s];if(typeof n=="string"){if(n!==i)return!1}else if(!Et(i)||i.length!==n.length||n.some((o,r)=>o!==i[r]))return!1}return!0}function gl(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const bl=(e,t,s)=>e!=null?e:t!=null?t:s,JT=De({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=Lt(Fo),i=Ie(()=>e.route||n.value),o=Lt(pl,0),r=Ie(()=>{let h=Re(o);const{matched:u}=i.value;let c;for(;(c=u[h])&&!c.components;)h++;return h}),a=Ie(()=>i.value.matched[r.value]);ui(pl,Ie(()=>r.value+1)),ui(WT,a),ui(Fo,i);const l=Ds();return Ts(()=>[l.value,a.value,e.name],([h,u,c],[p,b,x])=>{u&&(u.instances[c]=h,b&&b!==u&&h&&h===p&&(u.leaveGuards.size||(u.leaveGuards=b.leaveGuards),u.updateGuards.size||(u.updateGuards=b.updateGuards))),h&&u&&(!b||!nn(u,b)||!p)&&(u.enterCallbacks[c]||[]).forEach(L=>L(h))},{flush:"post"}),()=>{const h=i.value,u=a.value,c=u&&u.components[e.name],p=e.name;if(!c)return yl(s.default,{Component:c,route:h});const b=u.props[e.name],x=b?b===!0?h.params:typeof b=="function"?b(h):b:null,I=gc(c,xe({},x,t,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(u.instances[p]=null)},ref:l}));return yl(s.default,{Component:I,route:h})||I}}});function yl(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const ZT=JT;function ew(e){const t=ST(e.routes,e),s=e.parseQuery||zT,n=e.stringifyQuery||fl,i=e.history,o=yn(),r=yn(),a=yn(),l=Ph(Xt);let h=Xt;Fs&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=fo.bind(null,E=>""+E),c=fo.bind(null,UT),p=fo.bind(null,Oi);function b(E,V){let D,U;return Eu(E)?(D=t.getRecordMatcher(E),U=V):U=E,t.addRoute(U,D)}function x(E){const V=t.getRecordMatcher(E);V&&t.removeRoute(V)}function L(){return t.getRoutes().map(E=>E.record)}function I(E){return!!t.getRecordMatcher(E)}function w(E,V){if(V=xe({},V||l.value),typeof E=="string"){const oe=po(s,E,V.path),f=t.resolve({path:oe.path},V),g=i.createHref(oe.fullPath);return xe(oe,f,{params:p(f.params),hash:Oi(oe.hash),redirectedFrom:void 0,href:g})}let D;if("path"in E)D=xe({},E,{path:po(s,E.path,V.path).path});else{const oe=xe({},E.params);for(const f in oe)oe[f]==null&&delete oe[f];D=xe({},E,{params:c(E.params)}),V.params=c(V.params)}const U=t.resolve(D,V),ge=E.hash||"";U.params=u(p(U.params));const ye=eT(n,xe({},E,{hash:VT(ge),path:U.path})),ae=i.createHref(ye);return xe({fullPath:ye,hash:ge,query:n===fl?GT(E.query):E.query||{}},U,{redirectedFrom:void 0,href:ae})}function H(E){return typeof E=="string"?po(s,E,l.value.path):xe({},E)}function Y(E,V){if(h!==E)return on(8,{from:V,to:E})}function R(E){return ne(E)}function X(E){return R(xe(H(E),{replace:!0}))}function J(E){const V=E.matched[E.matched.length-1];if(V&&V.redirect){const{redirect:D}=V;let U=typeof D=="function"?D(E):D;return typeof U=="string"&&(U=U.includes("?")||U.includes("#")?U=H(U):{path:U},U.params={}),xe({query:E.query,hash:E.hash,params:"path"in U?{}:E.params},U)}}function ne(E,V){const D=h=w(E),U=l.value,ge=E.state,ye=E.force,ae=E.replace===!0,oe=J(D);if(oe)return ne(xe(H(oe),{state:ge,force:ye,replace:ae}),V||D);const f=D;f.redirectedFrom=V;let g;return!ye&&tT(n,U,D)&&(g=on(16,{to:f,from:U}),it(U,U,!0,!1)),(g?Promise.resolve(g):Q(f,U)).catch(v=>Jt(v)?Jt(v,2)?v:ke(v):le(v,f,U)).then(v=>{if(v){if(Jt(v,2))return ne(xe(H(v.to),{state:ge,force:ye,replace:ae}),V||f)}else v=Te(f,U,!0,ae,ge);return we(f,U,v),v})}function se(E,V){const D=Y(E,V);return D?Promise.reject(D):Promise.resolve()}function Q(E,V){let D;const[U,ge,ye]=tw(E,V);D=mo(U.reverse(),"beforeRouteLeave",E,V);for(const oe of U)oe.leaveGuards.forEach(f=>{D.push(ts(f,E,V))});const ae=se.bind(null,E,V);return D.push(ae),Ms(D).then(()=>{D=[];for(const oe of o.list())D.push(ts(oe,E,V));return D.push(ae),Ms(D)}).then(()=>{D=mo(ge,"beforeRouteUpdate",E,V);for(const oe of ge)oe.updateGuards.forEach(f=>{D.push(ts(f,E,V))});return D.push(ae),Ms(D)}).then(()=>{D=[];for(const oe of E.matched)if(oe.beforeEnter&&!V.matched.includes(oe))if(Et(oe.beforeEnter))for(const f of oe.beforeEnter)D.push(ts(f,E,V));else D.push(ts(oe.beforeEnter,E,V));return D.push(ae),Ms(D)}).then(()=>(E.matched.forEach(oe=>oe.enterCallbacks={}),D=mo(ye,"beforeRouteEnter",E,V),D.push(ae),Ms(D))).then(()=>{D=[];for(const oe of r.list())D.push(ts(oe,E,V));return D.push(ae),Ms(D)}).catch(oe=>Jt(oe,8)?oe:Promise.reject(oe))}function we(E,V,D){for(const U of a.list())U(E,V,D)}function Te(E,V,D,U,ge){const ye=Y(E,V);if(ye)return ye;const ae=V===Xt,oe=Fs?history.state:{};D&&(U||ae?i.replace(E.fullPath,xe({scroll:ae&&oe&&oe.scroll},ge)):i.push(E.fullPath,ge)),l.value=E,it(E,V,D,ae),ke()}let Ae;function Oe(){Ae||(Ae=i.listen((E,V,D)=>{if(!Ke.listening)return;const U=w(E),ge=J(U);if(ge){ne(xe(ge,{replace:!0}),U).catch(Pn);return}h=U;const ye=l.value;Fs&&cT(rl(ye.fullPath,D.delta),Qi()),Q(U,ye).catch(ae=>Jt(ae,12)?ae:Jt(ae,2)?(ne(ae.to,U).then(oe=>{Jt(oe,20)&&!D.delta&&D.type===Fn.pop&&i.go(-1,!1)}).catch(Pn),Promise.reject()):(D.delta&&i.go(-D.delta,!1),le(ae,U,ye))).then(ae=>{ae=ae||Te(U,ye,!1),ae&&(D.delta?i.go(-D.delta,!1):D.type===Fn.pop&&Jt(ae,20)&&i.go(-1,!1)),we(U,ye,ae)}).catch(Pn)}))}let Ye=yn(),qe=yn(),de;function le(E,V,D){ke(E);const U=qe.list();return U.length?U.forEach(ge=>ge(E,V,D)):console.error(E),Promise.reject(E)}function pe(){return de&&l.value!==Xt?Promise.resolve():new Promise((E,V)=>{Ye.add([E,V])})}function ke(E){return de||(de=!E,Oe(),Ye.list().forEach(([V,D])=>E?D(E):V()),Ye.reset()),E}function it(E,V,D,U){const{scrollBehavior:ge}=e;if(!Fs||!ge)return Promise.resolve();const ye=!D&&uT(rl(E.fullPath,0))||(U||!D)&&history.state&&history.state.scroll||null;return zl().then(()=>ge(E,V,ye)).then(ae=>ae&&lT(ae)).catch(ae=>le(ae,E,V))}const Le=E=>i.go(E);let Be;const Ne=new Set,Ke={currentRoute:l,listening:!0,addRoute:b,removeRoute:x,hasRoute:I,getRoutes:L,resolve:w,options:e,push:R,replace:X,go:Le,back:()=>Le(-1),forward:()=>Le(1),beforeEach:o.add,beforeResolve:r.add,afterEach:a.add,onError:qe.add,isReady:pe,install(E){const V=this;E.component("RouterLink",KT),E.component("RouterView",ZT),E.config.globalProperties.$router=V,Object.defineProperty(E.config.globalProperties,"$route",{enumerable:!0,get:()=>Re(l)}),Fs&&!Be&&l.value===Xt&&(Be=!0,R(i.location).catch(ge=>{}));const D={};for(const ge in Xt)D[ge]=Ie(()=>l.value[ge]);E.provide(Xi,V),E.provide(Ou,un(D)),E.provide(Fo,l);const U=E.unmount;Ne.add(E),E.unmount=function(){Ne.delete(E),Ne.size<1&&(h=Xt,Ae&&Ae(),Ae=null,l.value=Xt,Be=!1,de=!1),U()}}};return Ke}function Ms(e){return e.reduce((t,s)=>t.then(()=>s()),Promise.resolve())}function tw(e,t){const s=[],n=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let r=0;r<o;r++){const a=t.matched[r];a&&(e.matched.find(h=>nn(h,a))?n.push(a):s.push(a));const l=e.matched[r];l&&(t.matched.find(h=>nn(h,l))||i.push(l))}return[s,n,i]}function sw(){return Lt(Xi)}function nw(e){var s,n;const t={title:"LEAVE_TABLE",message:e};(n=(s=je.getters.user)==null?void 0:s.webSocket)==null||n.send(JSON.stringify(t)),je.dispatch("clearTable")}function vl(){var t;const e={title:"REMATCH",message:""};(t=je.getters.user)==null||t.webSocket.send(JSON.stringify(e))}function iw(e){var s;const t={title:"RESIGN",message:e};(s=je.getters.user)==null||s.webSocket.send(JSON.stringify(t))}var js=(e=>(e.DEFAULT="15px",e.LARGER="16px",e.LARGEST="18px",e))(js||{}),Ce=(e=>(e[e.ONES=1]="ONES",e[e.TWOS=2]="TWOS",e[e.THREES=3]="THREES",e[e.FOURS=4]="FOURS",e[e.FIVES=5]="FIVES",e[e.SIXES=6]="SIXES",e[e.PAIR=7]="PAIR",e[e.TWO_PAIR=8]="TWO_PAIR",e[e.THREE_OF_KIND=9]="THREE_OF_KIND",e[e.FULL_HOUSE=10]="FULL_HOUSE",e[e.SMALL_STRAIGHT=11]="SMALL_STRAIGHT",e[e.LARGE_STRAIGHT=12]="LARGE_STRAIGHT",e[e.FOUR_OF_KIND=13]="FOUR_OF_KIND",e[e.CHANCE=14]="CHANCE",e[e.YATZY=15]="YATZY",e[e.BONUS=16]="BONUS",e[e.SUBTOTAL=17]="SUBTOTAL",e[e.TOTAL=18]="TOTAL",e))(Ce||{});const kr=e=>(hn("data-v-f786749a"),e=e(),dn(),e),ow={class:"row"},rw={class:"col"},aw=["disabled"],lw=["disabled"],cw={class:"row"},uw={class:"col-xs-12 col-sm-4"},hw=kr(()=>m("label",{class:"selectora",for:"notificationSound","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Beeps last 14 seconds in turn if checked"},[m("i",{class:"bi bi-music-note"})],-1)),dw={class:"ps-4"},fw=kr(()=>m("label",{class:"",for:"animate"}," animate",-1)),pw={class:"row"},mw={class:"col-xs-12 col-sm-4"},gw={key:0,class:"text-success"},bw={key:1,class:"text-success"},yw={key:2,class:"text-danger"},vw=kr(()=>m("div",null,[m("canvas",{id:"canvas",width:"1200",height:"600",style:{border:"1px solid"}})],-1)),_w=De({__name:"YatzyTable",props:["watch"],setup(e){const t=e,s=22;sw();let n=null;const i=Ec(),o=Ds({notificationSound:!1,animations:!0});sr(()=>{ke(c.value.secondsLeft),c.value.timeControlIndex<2&&(o.value.animations=!1),r(),t.watch==="1"?(n={table:i.getters.theTable,yatzy:null},oe()):ge(),Ke(),Qn()});const r=()=>{let d=document.getElementById("canvas");c.value.canvas={element:d,animating:!1,ctx:d.getContext("2d")},c.value.canvas.ctx.imageSmoothingEnabled=!0,c.value.scoreCardRows=h(),Zi(),R.value&&(c.value.canvas.enabled=!0)},a=()=>{o.value.animations&&(c.value.canvas.animating=!1,R.value)},l=()=>{const d=At();return d.end.y-d.start.y},h=()=>{let d=[],y=l()/s;return c.value.canvas.element.width<768&&(y=c.value.canvas.element.height*.5/s),d.push(He("Ones [5]",4,Ce.ONES,y)),d.push(He("Twos [10]",5,Ce.TWOS,y)),d.push(He("Threes [15]",6,Ce.THREES,y)),d.push(He("Fours [20]",7,Ce.FOURS,y)),d.push(He("Fives [25]",8,Ce.FIVES,y)),d.push(He("Sixes[30]",9,Ce.SIXES,y)),d.push(He("Subtotal [105]",10,Ce.SUBTOTAL,y)),d.push(He("Bonus [50] (upper > 63)",11,Ce.BONUS,y)),d.push(He("Pair [12]",12,Ce.PAIR,y)),d.push(He("Two pairs [22]",13,Ce.TWO_PAIR,y)),d.push(He("Three of kind [18]",14,Ce.THREE_OF_KIND,y)),d.push(He("Full house [28]",15,Ce.FULL_HOUSE,y)),d.push(He("Low straight (1-5) [15]",16,Ce.SMALL_STRAIGHT,y)),d.push(He("High straight (2-6) [20]",17,Ce.LARGE_STRAIGHT,y)),d.push(He("Four of kind [24]",18,Ce.FOUR_OF_KIND,y)),d.push(He("Chance [30]",19,Ce.CHANCE,y)),d.push(He("Yatzy [50]",20,Ce.YATZY,y)),d.push(He("Grand Total [374]",21,Ce.TOTAL,y)),d},u=()=>{let d=i.getters.yatzyTable;console.log("initTable:"+JSON.stringify(d));const y={x:1600,y:1600},C={image:document.getElementById("yatzybg"),canvasDimension:y,canvasDestination:{x:0,y:0},realDimension:{x:1024,y:1024},canvasRotationAngle:0,visible:!0};d.image=C;const A=d.players;t.watch||d.players.forEach(W=>{W.scoreCard={bonus:void 0,subTotal:0,total:0,hands:[],lastAdded:null},W.enabled=!0}),d.players=A;for(let W=1;W<6;W++){const fe={image:document.getElementById("dice"+W),canvasDimension:{x:80,y:80},realDimension:{x:1024,y:1024},canvasRotationAngle:0,canvasDestination:{x:0,y:0},visible:!0};let ht=d.dices[W-1];ht.image=fe}const G={image:document.getElementById("emptyButton"),canvasDimension:{x:100,y:50},realDimension:{x:727,y:279},canvasRotationAngle:0,canvasDestination:{x:0,y:0},visible:!0};return d.playButton={image:G,position:{x:650,y:300}},d.position={x:0,y:0},d},c=Ds(u()),p=Ds({actions:[],blocked:!1}),b=Ie(()=>{var d;return(d=i.getters.user)==null?void 0:d.name}),x=Ie(()=>i.getters.user),L=Ie(()=>se.value===!0&&screen.width>=1200),I=Ie(()=>p.value.actions.length),w=Ie(()=>c.value.playerInTurn),H=Ie(()=>w.value.rollsLeft>0&&w.value.rollsLeft<3&&c.value.canvas.animating===!1),Y=Ie(()=>R.value===!0&&w.value.rollsLeft<3&&c.value.canvas.animating===!1),R=Ie(()=>{var d,y;return((y=(d=c.value)==null?void 0:d.playerInTurn)==null?void 0:y.name)===b.value}),X=Ie(()=>{var d;return R.value&&w.value.rollsLeft>0&&((d=c.value.canvas)==null?void 0:d.animating)===!1&&J.value===!1}),J=Ie(()=>c.value.dices.filter(d=>d.selected).length===5),ne=Ie(()=>c.value.canvas.enabled&&R.value===!0),se=Ds(!0),Q=Ds(!1),we=()=>{iw(c.value.tableId),Q.value=!0},Te=Ie(()=>c.value.gameOver===!1&&c.value.players.find(d=>d.scoreCard.hands.length>0&&d.name===b.value&&d.enabled===!0)!=null&&Q.value===!1),Ae=Ie(()=>c.value.gameOver===!0&&c.value.players.length>1);Ts(()=>I,d=>{d.value>0&&Ye()},{deep:!0});const Oe=()=>c.value.players.find(d=>d.name===b.value)!=null,Ye=()=>{if(p.value.blocked||p.value.actions.length===0){console.log("actionQueue not consuming "+p.value.actions.length);return}if(c.value.playerInTurn===null){console.log("consumeActions no playerInTurn, so game over");return}p.value.blocked=!0;const d=p.value.actions.splice(0,1)[0];if(V=!1,d.type==="yatzyRollDices")Ar(c.value.dices,d.payload.yatzy.dices).then(()=>{const y=c.value.playerInTurn;w.value.rollsLeft=d.payload.table.playerInTurn.rollsLeft,Ir(c.value.dices,d.payload.table.dices,y.rollsLeft===0),Bt(),Le(),console.log("animations done")});else if(d.type==="yatzySelectHand")it(d.payload),to(),d.payload.table.gameOver?de():Le();else if(d.type==="changeTurn")i.dispatch("changeTurn",d.payload.table.playerInTurn).then(()=>{c.value.dices.forEach(y=>{y.selected=!1}),Le(),document.body.style.cursor="default",c.value.playerInTurn=d.payload.table.playerInTurn,w.value.rollsLeft=d.payload.table.playerInTurn.rollsLeft,R.value&&(c.value.canvas.enabled=!0),Qn()});else if(d.type==="timeout"){let y=c.value.players.find(C=>C.name===d.payload.table.timedOutPlayerName);console.log("Handling timeout"+JSON.stringify(y)+" myName:"+b+" timedOut "+d.payload.table.timedOutPlayerName),qe(y,d,!0)}},qe=(d,y,C)=>{d.enabled=!1,b.value===d.name&&C===!0&&(Ge=!0),b.value===d.name&&(c.value.canvas.enabled=!1),to(),y.payload.table.gameOver?de():Le()},de=()=>{pe(),console.log("Handling gameOver"),c.value.playerInTurn=null,p.value.blocked=!0,p.value.actions=[],c.value.canvas.enabled=!1,c.value.gameOver=!0;const d={from:"System",text:"Game ended"};i.dispatch("chat",d),Bt()};let le=null;const pe=()=>{le=clearInterval(le)},ke=d=>{console.log("restartInterval "+d),le&&pe(),c.value.secondsLeft=d,le=setInterval(()=>{c.value.secondsLeft--,(c.value.secondsLeft<=0||!c.value.secondsLeft)&&pe()},1e3)},it=d=>{let y=c.value.players.find(A=>A.name===d.yatzy.whoPlayed);y.scoreCard.total=d.yatzy.scoreCard.total,y.scoreCard.bonus=d.yatzy.scoreCard.bonus,y.scoreCard.subTotal=d.yatzy.scoreCard.subTotal,y.scoreCard.lastAdded=d.yatzy.scoreCard.lastAdded;let C=y.scoreCard.hands.find(A=>A.last===!0);C&&C.last&&(C.last=!1),y.scoreCard.hands.push({handType:d.yatzy.scoreCard.lastAdded.handType,typeNumber:d.yatzy.scoreCard.lastAdded.typeNumber,value:d.yatzy.scoreCard.lastAdded.value,last:!0})},Le=(d=0)=>{V=!1,p.value.blocked=!1,setTimeout(()=>{Ye()},d)},Be=()=>{c.value.canvas.element.style.position="absolute",c.value.canvas.element.style.left="0px"},Ne=()=>{c.value.canvas.element.style.position="relative ",c.value.canvas.element.style.left=""},Ke=()=>{console.log("resizeEvent screenWidth"+screen.width),E(),r(),Bt()},E=()=>{se.value=!0,c.value.players.length===4&&(se.value=!1),window.innerWidth>=1200?(c.value.canvas.element.width=1100,c.value.canvas.element.height=window.innerHeight>=1100?1100:window.innerHeight,Ne()):window.innerWidth>=1e3&&c.value.players.length>2?(c.value.canvas.element.width=900,c.value.canvas.element.height=window.innerHeight>=1100?1100:window.innerHeight,Ne()):window.innerWidth>=940?(c.value.playerAmount>=3&&(se.value=!1),Be(),c.value.canvas.element.width=window.innerWidth,c.value.canvas.element.height=window.innerHeight>=1100?1100:window.innerHeight):(se.value=!1,c.value.canvas.element.width=window.innerWidth-10,c.value.canvas.element.height=window.innerHeight-10,Be()),c.value.scoreCardRows=h();const d=Wt();c.value.dices.forEach(y=>{y.image.canvasDimension.x=d.x,y.image.canvasDimension.y=d.y})};let V=!1;const D=()=>{if(g=null,X.value===!1||c.value.canvas.animating===!0||V===!0)return;V=!0;let d=[];for(let C=0;C<c.value.dices.length;C++){const{diceId:A,selected:G,number:W,position:fe}=c.value.dices[C];G||d.push({diceId:A,selected:G,number:W,position:fe})}const y={title:"YATZY_ROLL_DICES",message:c.value.tableId,yatzy:{dices:d}};console.log("*** Sending dices "+JSON.stringify(y)),x.value.webSocket.send(JSON.stringify(y))},U=d=>{if(R.value!==!0||w.value.rollsLeft===3||c.value.canvas.animating===!0||g===null||V===!0)return;const y={title:"YATZY_SELECT_HAND",message:c.value.tableId,yatzy:{handType:g.handType}};console.log("*** Sending selection "+JSON.stringify(y)),x.value.webSocket.send(JSON.stringify(y)),g=null},ge=()=>{window.addEventListener("resize",Ke);const d=document.getElementById("canvas");d.addEventListener("pointerover",y=>{ne.value}),d.addEventListener("pointerdown",y=>{if(!ne.value)return;const C={x:y.offsetX,y:y.offsetY};console.log("Pointer down event");const A=ye(C);A&&H.value===!0?A.selected?A.selected=!1:A.selected=!0:N(C,c.value.playButton.image)?(document.body.style.cursor="default",D()):Y.value===!0&&B(C,At())&&U(),Qn()}),d.addEventListener("pointermove",y=>{const C={x:y.offsetX,y:y.offsetY};!ne.value||(document.body.style.cursor="default",H.value===!0&&B(C,Ls())?ye(C)&&(document.body.style.cursor="pointer"):Y.value===!0&&B(C,At())?(document.body.style.cursor="pointer",g=null,v(C),Bt()):B(C,Zi())&&X.value===!0&&N(C,c.value.playButton.image)&&(document.body.style.cursor="pointer"))}),document.addEventListener("visibilitychange",f),d.addEventListener("contextmenu",y=>y.preventDefault())},ye=d=>c.value.dices.filter(y=>S(y,d))[0],ae=()=>document.visibilityState==="visible",oe=()=>{if(n===null){Le();return}console.log("FROM SNAPSHOT"),p.value.actions=[],Ir(c.value.dices,n.table.dices,!1),n.table.players.forEach(A=>{var fe,ht;const G=c.value.players.find(Xn=>Xn.name===A.name),W=A.scoreCard.hands;G.scoreCard.hands=[];for(const[Xn,Lr]of Object.entries(W)){let $r=Lr;((ht=(fe=A.scoreCard)==null?void 0:fe.lastAdded)==null?void 0:ht.handType)===$r.handType&&($r.last=!0),G.scoreCard.hands.push(Lr)}G.scoreCard.bonus=A.scoreCard.bonus,G.scoreCard.total=A.scoreCard.total,G.scoreCard.subTotal=A.scoreCard.subTotal,G.enabled=A.enabled});let d=n.table.playerInTurn;if(w.value&&(w.value.rollsLeft=d==null?void 0:d.rollsLeft,console.log("ROLLS LEFT:"+w.value.rollsLeft+" PlayerInTurn:"+JSON.stringify(w.value))),n.table.players.find(A=>!(A!=null&&A.enabled)&&(A==null?void 0:A.name)===b.value)&&(Ge=!0),n.table.gameOver)return de();q({payload:n})},f=()=>{console.log("onVisiblityChange "+ae()),ae()?(oe(),Bt(),Le()):p.value.blocked=!0};let g=null;const v=d=>{const y=d.y-At().start.y;let C=l()/s,A=Math.floor(y/C);const G=c.value.scoreCardRows[A-4];if(!G||!k(G)){document.body.style.cursor="default";return}if(w.value.scoreCard.hands.length===void 0){g=G;return}w.value.scoreCard.hands.findIndex(fe=>{fe.handType,G.handType})===-1&&(g=G)},k=d=>d.handType===Ce.BONUS||d.handType===Ce.SUBTOTAL||d.handType===Ce.TOTAL?!1:!c.value.players.find(A=>A.name===b.value).scoreCard.hands.find(A=>A.handType.toString()===Ce[d.handType].toString()),S=(d,y)=>{const C=Wt();return!(y.x<d.position.x||y.x>d.position.x+C.x||y.y<d.position.y||y.y>d.position.y+C.y)},N=(d,y)=>!(d.x<y.canvasDestination.x||d.x>y.canvasDestination.x+y.canvasDimension.x||d.y<y.canvasDestination.y||d.y>y.canvasDestination.y+y.canvasDimension.y),B=(d,y)=>!(d.x<y.start.x||d.x>y.end.x||d.y<y.start.y||d.y>y.end.y);nr(()=>{console.log("onUnmounted"),P(),$(),document.removeEventListener("visibilitychange",f),nw(c.value.tableId)});const $=i.subscribe((d,y)=>{d.type==="changeTurn"&&console.log("changePlayer mutation"),d.type==="rematch"&&console.log("rematch sub"),d.type==="resign"&&console.log("resign sub")}),M=d=>{ke(d.payload.table.secondsLeft),c.value=u();let y=d.payload.table.playerInTurn;y.rollsLeft=d.payload.table.playerInTurn.rollsLeft,c.value.players.forEach(C=>C.enabled=!0),c.value.playerInTurn=y,Ge=!1,c.value.gameOver=!1,Le(),r(),Q.value=!1,Bt()},P=i.subscribeAction((d,y)=>{if(console.log("Action in:"+JSON.stringify(d)),!!K(d)){if(d.type==="currentTableIsClosed"){c.value.players.forEach(C=>{C.enabled=!1}),de();return}if(d.type==="rematch"){M(d),n=d.payload;return}if(d.type==="leaveTable")return n=d.payload,z(d);if(d.type==="multiplayerTableResign"){n=d.payload;let C=c.value.players.find(G=>G.name===d.payload.who.name);qe(C,d,!1),q(d)&&ke(d.payload.table.secondsLeft);return}n=d.payload,ke(d.payload.table.secondsLeft),p.value.actions.splice(p.value.actions.length,0,d),q(d)}}),K=d=>d.type==="yatzyRollDices"||d.type==="yatzySelectHand"||d.type==="leaveTable"||d.type==="timeout"||d.type==="rematch"||d.type==="multiplayerTableResign"||d.type==="currentTableIsClosed",z=d=>{let y=c.value.players.find(C=>C.name===d.payload.who.name);if(!y){console.log("watcher left");return}console.log("handle leaving player"),y.enabled=!1,Le(),q(d),Bt()},q=d=>{var y,C,A,G,W,fe;if(d.payload.table.gameOver)return!1;if(((A=(C=(y=d.payload)==null?void 0:y.table)==null?void 0:C.playerInTurn)==null?void 0:A.name)!==((W=(G=c.value)==null?void 0:G.playerInTurn)==null?void 0:W.name)||((fe=c.value)==null?void 0:fe.players.filter(ht=>ht.enabled===!0).length)===1){let ht={type:"changeTurn",payload:d.payload};return p.value.actions.splice(p.value.actions.length,0,ht),!0}return!1},Z=d=>{if(!d)return;const y=c.value.canvas.ctx;!d.image.visible||(d.image.canvasRotationAngle&&y.rotate(d.image.canvasRotationAngle),d.image.canvasDestination||(d.image.canvasDestination={x:0,y:0}),y.drawImage(d.image.image,0,0,d.image.realDimension.x,d.image.realDimension.y,d.image.canvasDestination.x,d.image.canvasDestination.y,d.image.canvasDimension.x,d.image.canvasDimension.y))},he=()=>{const d=c.value.canvas.element.width;return d<480?1:d<500?10:c.value.canvas.element.width<550?20:60},be=()=>{const d=Wt();return c.value.canvas.element.width<550?d.y/2:d.y},ve=()=>{var A;const d=Ls();Wt();const y=he(),C=be();for(let G=0;G<5;G++){const W=c.value.dices[G],fe=Wt();W.selected?W.position={x:d.start.x+G*fe.x+y,y:d.start.y+C}:((A=w==null?void 0:w.value)==null?void 0:A.rollsLeft)===0&&W.selected===!1?W.position={x:d.start.x+G*fe.x+y,y:d.start.y+(W.position.y-d.start.y)}:W.position={x:d.start.x+G*fe.x+y,y:d.start.y},W.image.canvasDestination=W.position,W.image.canvasDimension.x=fe.x,W.image.canvasDimension.x=fe.y,Z(W)}},Ee=()=>{if(X.value===!0){const d=c.value.playButton,y=Zi();d.position.x=y.end.x-d.image.canvasDimension.x,d.position.y=y.end.y-d.image.canvasDimension.y,d.image.canvasDestination=d.position;const C=c.value.canvas.ctx;C.beginPath();const A=c.value.dices.filter(G=>!G.selected).length;C.font="bold "+js.LARGEST+" Arial",C.font="18px bolder Arial",C.fillText("Roll "+A,d.position.x+20,d.position.y+30),C.closePath(),Z(d)}},ot="Click the roll button",Gt="Select a hand",Wn="Select a hand, lock dices or roll unlocked dices";let cs="It's your turn "+b.value;const Yn="Waiting your turn",Qe="You timed out";let Ge=!1;const qn=()=>Ge?Qe:R.value===!1&&Ge===!1&&!t.watch?Yn:R.value===!1?"":w.value.rollsLeft===3?ot:w.value.rollsLeft===0?Gt:Wn,Lu=()=>{var G,W,fe;const d=Ls().start.x+he(),y=Ls().start.y-30,C=Ls().start.y-10,A=c.value.canvas.ctx;if(A.beginPath(),A.font="18px bolder Arial",!w.value){A.fillText("GAME OVER",d,y),A.closePath();return}R.value===!0?A.fillStyle="green":A.fillStyle="red",A.fillText(R.value===!1?"In turn "+((G=w==null?void 0:w.value)==null?void 0:G.name)+" (left = "+((W=w==null?void 0:w.value)==null?void 0:W.rollsLeft)+")":cs+" (left = "+((fe=w==null?void 0:w.value)==null?void 0:fe.rollsLeft)+")",d,y),A.fillStyle="black",A.fillText(qn(),d,C),A.closePath()},At=()=>{const d=c.value.canvas.element.width,y=c.value.canvas.element.height,C={x:0,y:0};let A;if(c.value.players.length===4&&d>=1100){let W=d*.9,fe=y*.5;return A={x:W,y:fe},{start:C,end:A}}if(c.value.players.length===4){let W=d,fe=y*.65;return A={x:W,y:fe},{start:C,end:A}}if(d>=1200||d>=1e3&&c.value.players.length<=3){let W=d*.95/2;return A={x:W,y:W},{start:C,end:A}}if(d>=768&&c.value.players.length<=3){let W=d*.55;return A={x:W,y:W},{start:C,end:A}}const G=d;return c.value.canvas.element.height*.75,A={x:G,y:y*.75},{start:C,end:A}},Ls=()=>{const d=Wt();if(c.value.canvas.element.width,At().end,se.value){const G=At().end.x,W=c.value.canvas.element.height*.12;return{start:{x:G,y:W},end:{x:G+6*d.x,y:W+d.y*2}}}const y=50,C=20,A=At().end.y+y;return{start:{x:C,y:A},end:{x:20+6*d.x,y:A+d.y*2}}},Zi=()=>{const d=Ls();Wt();const y=c.value.canvas.element.width;if(c.value.canvas.element.height,!se.value&&y<440){const G={x:d.end.x-100,y:d.start.y-30},W={x:d.end.x,y:d.start.y};return{start:G,end:W}}if(!se.value&&y<530){const G={x:d.end.x-80,y:d.start.y-30},W={x:d.end.x+20,y:d.start.y};return{start:G,end:W}}if(!se.value){const G={x:d.end.x,y:d.start.y},W={x:y,y:d.start.y+75};return{start:G,end:W}}const C={x:d.start.x+50,y:d.end.y+20},A={x:d.start.x+150,y:d.end.y+75};return{start:C,end:A}},Wt=()=>{const d=c.value.canvas.element.width;return se.value&&screen.width>=1e3?{x:85,y:85}:se.value&&window.innerWidth<1e3?{x:70,y:70}:d<600?{x:65,y:65}:window.innerWidth<550?{x:54,y:54}:{x:80,y:80}};let Kn=0;const eo=d=>new Promise(y=>setTimeout(y,d)),Bt=()=>{Qn()},Ar=async(d,y)=>{o.value.animations!==!1&&(c.value.canvas.animating=!0,Kn!==0?(Or(c.value.dices),ve()):($u(d,y),Or(c.value.dices),Bt()),Kn++,Kn<10?(await eo(250),await Ar(d,y)):(Kn=0,c.value.canvas.animating=!1))},$u=async(d,y)=>{d.forEach(C=>{y.find(G=>C.diceId===G.diceId)?C.selected=!1:C.selected=!0}),await eo(1e3)},Ir=async(d,y,C=!1)=>{if(y.forEach(fe=>{const ht=d.find(Xn=>Xn.diceId===fe.diceId);Pr(ht,fe.number)}),C===!1||!o.value.animations)return;let A=0;const G=d.filter(fe=>!fe.selected);Wt(),c.value.canvas.animating=!0;const W=be();for(;A<16;){for(let fe=0;fe<G.length;fe++){let ht=G[fe];ht.position.y+=W/16}Bt(),await eo(50),A++}c.value.canvas.animating=!1},Pr=(d,y)=>{d.number=y,d.image.image=document.getElementById("dice"+y)},Nu=d=>{d.selected||Pr(d,Ru())},Or=d=>{d.forEach(y=>{Nu(y)})},Ru=()=>Math.floor(Math.random()*6+1),Mu=(d,y)=>{let C=y.scoreCard.hands.find(A=>A.handType.toString()===Ce[d].toString());return C||(d===Ce.BONUS?C={handType:void 0,value:y.scoreCard.bonus,typeNumber:16}:d===Ce.SUBTOTAL?C={handType:void 0,value:y.scoreCard.subTotal,typeNumber:17}:d===Ce.TOTAL&&(C={handType:void 0,value:y.scoreCard.total,typeNumber:18}),C)},Qn=()=>{const d=c.value.canvas;d.ctx.clearRect(0,0,d.element.width,d.element.height),Z(c.value),to(),ve(),Ee(),Lu()},$s=120,Du=(d,y,C)=>{const A=c.value.canvas.ctx;if(y&&y.value>-1){let G=y.value>-1?y.value.toString():" - ";A.fillStyle=d.enabled?"black":"gray",A.fillText(G,C.x,C.y)}A.fillStyle="black"},Bu=25,Ns=200,Hu=15,Vu=(d,y)=>{const C=c.value.canvas.ctx;C.fillText(d.title,d.section.start.x,y*d.nth+Hu),Fu(d,y),C.moveTo(d.section.start.x,y*d.nth),C.lineTo(d.section.end.x,y*d.nth),C.stroke(),(g==null?void 0:g.handType)===d.handType&&(C.strokeStyle="#FF0000",C.lineWidth=3,C.strokeRect(d.section.start.x,y*d.nth,At().end.x,d.height)),C.lineWidth=1,C.strokeStyle="#000000"},Fu=(d,y)=>{for(let C=0;C<c.value.players.length;C++){const A=Mu(d.handType,c.value.players[C]),G={x:Ns+50+$s*C,y:y*(d.nth+1)-5};if(Du(c.value.players[C],A,G),A&&A.last){const W=c.value.canvas.ctx;W.fillStyle="red",W.font="900 24px Arial",W.fillText(" *",G.x+20,G.y+5),W.font="bold "+js.DEFAULT+" Arial",W.fillStyle="black"}}},He=(d,y,C,A)=>{let G=At();return{section:{start:{x:Bu,y:A*y},end:{x:G.end.x,y:A*y}},title:d,nth:y,handType:C,height:A}},to=()=>{const d=c.value.canvas;At();let y=l()/s;d.element.width;const C=d.ctx;C.font="bolder "+js.LARGEST+" Arial",C.beginPath(),C.fillText("Scorecards",150,35),C.font="bold "+js.DEFAULT+" Arial",d.element.width<768&&(C.font=js.DEFAULT+" Arial"),c.value.scoreCardRows.forEach(A=>{Vu(A,y)});for(let A=0;A<c.value.players.length;A++){C.fillStyle=c.value.players[A].enabled?"black":"gray";let G=c.value.players[A].name;if(G.length>10){let W=G.substring(0,10),fe=G.substring(10);C.fillText(W,Ns+8+A*$s,y*2.5),C.fillText(fe,Ns+8+A*$s,y*3)}else C.fillText(G,Ns+5+A*$s,y*3);C.moveTo(Ns+A*$s,y*3),C.lineTo(Ns+A*$s,y*21),C.stroke()}C.fillStyle="black",C.closePath()};return(d,y)=>{var C,A,G;return _(),T(ce,null,[m("div",ow,[m("div",rw,[Oe()?(_(),T("button",{key:0,disabled:!Re(Te),onClick:we,type:"button",class:"btn btn-primary w-30 float-xs-start float-sm-end"}," Resign ",8,aw)):F("",!0),Oe()?(_(),T("button",{key:1,disabled:!Re(Ae),onClick:y[0]||(y[0]=(...W)=>Re(vl)&&Re(vl)(...W)),type:"button",class:"btn btn-primary w-30 float-xs-start float-sm-end"}," Rematch ",8,lw)):F("",!0)])]),m("div",cw,[m("div",uw,[hw,Me(m("input",{type:"checkbox",id:"notificationSound","onUpdate:modelValue":y[1]||(y[1]=W=>o.value.notificationSound=W)},null,512),[[wt,o.value.notificationSound]]),m("span",dw,[Me(m("input",{class:"",type:"checkbox",id:"animate",onClick:a,"onUpdate:modelValue":y[2]||(y[2]=W=>o.value.animations=W)},null,512),[[wt,o.value.animations]]),fw])])]),m("div",pw,[m("div",mw,[((C=c.value.playerInTurn)==null?void 0:C.name)===Re(b)?(_(),T("span",gw," It's your turn "+j(Re(b))+" time:"+j(c.value.secondsLeft),1)):((A=c.value)==null?void 0:A.playerInTurn)===null?(_(),T("span",bw," Game ended ")):(_(),T("div",yw," In turn: "+j((G=c.value.playerInTurn)==null?void 0:G.name)+" time:"+j(c.value.secondsLeft),1))])]),vw,Re(L)?(_(),dc(Gi,{key:0,id:c.value.tableId},null,8,["id"])):F("",!0)],64)}}});const Tw=Fe(_w,[["__scopeId","data-v-f786749a"]]),ww=De({name:"Info",data(){return{messages:null,message:{text:""}}},computed:{messageExist(){return this.message.text.length>0}},created(){},methods:{sendMessage(){let e=this.message.text.trim();e.length<1||e.length>200}}}),Ew={class:"row mb-3 mt-2"},Cw=rr('<div class="col"><span class="fw-bold"><h3>Terms and conditions 24.04.2022</h3></span><p class=""><span class="fw-bold">General</span><br> Site is under construction and can change/reset data without informing. At the moment you can play eightball, tic-tac-toe and connect4 games. On some occasions IP-address of the client is logged. <br></p><p class=""><span class="fw-bold">Cookies</span><br> This site does not use cookies to store information. Instead it uses browser&#39;s session storage to store login token.<br> With basic browser settings token is removed after closing or after using logging out functionality. <br></p><p class=""><span class="fw-bold">Browsers</span><br> Recommended browsers are latest versions of Firefox, Chrome and Edge. <br></p><p class=""><span class="fw-bold">Bugs </span><br> No bounties are available for bugs. But if you track them and find anything please use the feedback form for notifying. </p><p class=""><span class="fw-bold">Disclaimer</span><br> You use this site at your own risk.<br> There is no guarantee for this website to work error free. The author of this site is not liable for any damage what could be caused by using this website.<br></p></div>',1),xw=[Cw];function Sw(e,t,s,n,i,o){return _(),T("div",Ew,xw)}const kw=Fe(ww,[["render",Sw]]),Aw=De({name:"Instructions",mixins:[Ct],data(){},computed:{},created(){},methods:{}}),Iw={class:"row"},Pw=rr('<div class="col-xs-12 col-sm-12"><span class="fw-bold"> Eight ball briefly: </span><p> 1. Starting player sets the handball on the left side of the line by clicking the position with mouse.<br> 2. At first the table is open =&gt; players choose either solids or stripes to play with.<br> 3. Aim with mouse, put cursor near the ball you want to hit. <br> Holding mouse button down gives force to the cue, until maxed out or releasing the button.<br> 4. Last ball to put into a pocket is eight ball. A pocket selection must be done before pocketing.<br> 5. Player wins if eight ball is hit first and it goes to the selected pocket while cue ball stays on the table.<br> 6. Other than starting handball can be placed freely at the table unless it is overlapping other ball. </p><p><span class="fw-bold"> Mobile clients </span> It is possible to play the games also with mobile client. <p> Canvas, where the games are playd, is not responsive. However it is possible to zoom in and out. Playing can be easier if device supports horizontal layout by turning the device.<br> EightBall: Mobile device uses browser&#39;s pointer events which are not supported by all devices. <br> Both aiming and cue force loading happens by holding finger (or similar) on the screen at wanted point. <br> Zooming in and out _should_ be also possible before aiming has started. </p></p></div>',1),Ow=[Pw];function Lw(e,t,s,n,i,o){return _(),T("div",Iw,Ow)}const $w=Fe(Aw,[["render",Lw]]),Nw=De({name:"Feedback",data(){return{message:"",error:!1,success:!1,loading:!1}},computed:{sendButtonEnabled(){return this.message.trim().length>4},showError(){return this.error},showThanks(){return this.success},loadingData(){return this.loading}},methods:{send(){const e="http://35.217.7.146/portal/api/feedback",t={method:"POST",headers:{"Content-Type":"application/json",Authorization:null},body:JSON.stringify(this.message)};this.loading=!0,fetch(e,t).then(s=>{if(s.status!==200)return Promise.reject("error in feedback")}).then(s=>{this.error=!1,this.success=!0,this.message=""},s=>{this.error=!0,this.success=!1}).finally(()=>{this.loading=!1})}},created(){}});const Ji=e=>(hn("data-v-3cb062a9"),e=e(),dn(),e),Rw={key:0,class:"row"},Mw=Ji(()=>m("div",{class:"col fw-bold"}," Have some feedback? Are games not working? Have improvement ideas? ",-1)),Dw={class:"row mt-4"},Bw={class:"col"},Hw=["disabled"],Vw=Ji(()=>m("div",{class:"row"},[m("div",{class:"col"},[ee(" Known issues for 8-ball game: "),m("br"),ee(" 1. On some occasions the ball which collides with cue ball can go/move to an unexpected or even opposite direction than what can be expected. "),m("br"),ee(" 2. A ball can be wobbly when it goes along the pocket pathway. "),m("br"),m("br"),ee(" In these cases going to another browser window/tab and coming back refreshes the browser to the latest server level."),m("br")])],-1)),Fw={key:0,class:"row d-inline-flex p-2 alert-danger"},jw={key:1,class:"row spinner-border",role:"status"},Uw=Ji(()=>m("span",{class:"sr-only"},null,-1)),zw=[Uw],Gw={key:2,class:"row mt-4 alert alert-success"},Ww=Ji(()=>m("div",{class:"col"}," Thanks! ",-1)),Yw=[Ww];function qw(e,t,s,n,i,o){return _(),T(ce,null,[!e.showThanks&&!e.loadingData?(_(),T("div",Rw,[Mw,m("div",Dw,[m("div",Bw,[m("div",null,[Me(m("textarea",{"onUpdate:modelValue":t[0]||(t[0]=r=>e.message=r),maxlength:"400",class:"form-control",rows:"3"}," ",512),[[Hn,e.message]]),m("button",{disabled:!e.sendButtonEnabled,onClick:t[1]||(t[1]=(...r)=>e.send&&e.send(...r)),class:"btn btn-primary"}," Send feedback ",8,Hw)])])]),Vw,e.showError?(_(),T("div",Fw," Error occured! ")):F("",!0)])):e.loadingData?(_(),T("div",jw,zw)):F("",!0),e.showThanks?(_(),T("div",Gw,Yw)):F("",!0)],64)}const Kw=Fe(Nw,[["render",qw],["__scopeId","data-v-3cb062a9"]]),Qw=De({name:"Registration",data(){return{usrNameTemp:null,usrPwTemp:null,registerError:null,registerErrorNickName:null,requestOnTheFly:!1,registerDone:!1}},computed:{isRegistrateButtonDisabled(){return this.requestOnTheFly?!0:!this.registrationDataOk},errorInRegistration(){return this.registerError!=null},errorInRegistrationDuplicate(){return this.registerErrorNickName!=null},registrationDataOk(){return!(!this.usrPwTemp||!this.usrNameTemp||this.usrPwTemp===this.usrNameTemp||this.usrPwTemp.startsWith("1234567")||this.usrPwTemp.startsWith("qwerty")||this.usrPwTemp.startsWith(" ")||this.usrPwTemp.endsWith(" ")||this.usrPwTemp.length<8||this.usrNameTemp.length<1)}},created(){},methods:{showLogin(){},registrate(){var s;this.registerError=null,this.registerErrorNickName=null,this.requestOnTheFly=!0;const e={method:"POST",headers:{"Content-Type":"application/json",Authorization:null},body:JSON.stringify({userName:(s=this.usrNameTemp)==null?void 0:s.trim(),password:this.usrPwTemp.trim()})},t="http://35.217.7.146/portal/api/user/register";this.$store.dispatch("setLoadingStatus",!0),fetch(t,e).then(n=>(this.resetRegistrationData(),n.status===406?Promise.reject(406):n.status!==200?Promise.reject("error in login"):n.json())).then(n=>{this.usrNameTemp=n.name,this.registerDone=!0},n=>{n===406?this.registerErrorNickName=!0:this.registerError=!0}).finally(()=>{this.requestOnTheFly=!1,this.$store.dispatch("setLoadingStatus",!1)})},resetRegistrationData(){this.usrNameTemp=null,this.usrPwTemp=null}}}),Xw={key:0,class:"row"},Jw=m("div",{class:"col"},[m("h3",null," Create nickname")],-1),Zw=m("div",{class:"row"},[m("div",{class:"col m-2"}," Nickname is optional to play the game. Nickname must be at least 2 chars and must not contain special characters. Password must be at minimum 8 characters. ")],-1),e0=[Jw,Zw],t0={key:1,class:"row"},s0={class:"col m-2"},n0=ee(" * Nickname "),i0={key:2,class:"row"},o0={class:"col"},r0=ee(" * Password "),a0={key:3,class:"row"},l0={class:"col"},c0=["disabled"],u0={key:0,class:"text-danger"},h0={key:0,class:"d-inline-flex p-2 alert-danger",role:"alert"},d0={key:1,class:"d-inline-flex p-2 alert-danger",role:"alert"},f0={key:4,class:"row"},p0={class:"col alert alert-success"},m0=ee(" login ");function g0(e,t,s,n,i,o){const r=Rt("router-link");return _(),T(ce,null,[e.registerDone?F("",!0):(_(),T("div",Xw,e0)),e.registerDone?F("",!0):(_(),T("div",t0,[m("div",s0,[n0,Me(m("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.usrNameTemp=a),class:"p-3",id:"username",type:"text",name:"username",pattern:"\\\\S(.\\\\*\\\\S)\\\\?\\\\*",title:"This field is required",size:"40",maxlength:"15",autocomplete:"off"},null,512),[[Hn,e.usrNameTemp]])])])),e.registerDone?F("",!0):(_(),T("div",i0,[m("div",o0,[r0,Me(m("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.usrPwTemp=a),class:"p-3",id:"pw",name:"pw",type:"password",minlength:"8",size:"40",maxlength:"150",autocomplete:"off"},null,512),[[Hn,e.usrPwTemp]])])])),e.registerDone?F("",!0):(_(),T("div",a0,[m("div",l0,[m("button",{onClick:t[2]||(t[2]=(...a)=>e.registrate&&e.registrate(...a)),class:"btn btn-primary",disabled:e.isRegistrateButtonDisabled}," Registrate ",8,c0),e.registrationDataOk?F("",!0):(_(),T("span",u0," Type (better) password"))]),e.errorInRegistration?(_(),T("div",h0," Registration error occured! Nickname minimum 2 characters and password minimum 8 characters. Try another nickname. ")):F("",!0),e.errorInRegistrationDuplicate?(_(),T("div",d0,"Oops, seems like nickname is already taken, try another.")):F("",!0)])),e.registerDone?(_(),T("div",f0,[m("div",p0,[ee(" Registration for nickname "+j(e.usrNameTemp)+" is complete. You can now ",1),re(r,{to:{name:"Login"}},{default:rt(()=>[m0]),_:1})])])):F("",!0)],64)}const b0=Fe(Qw,[["render",g0]]),y0={class:"row"},v0=m("div",{class:"col text-danger"}," Timeout or an error occured. ",-1),_0=[v0],_l=De({__name:"Error",setup(e){const t=Ec();return sr(()=>{t.dispatch("logout")}),(s,n)=>(_(),T("div",y0,_0))}}),T0=[{path:"/portal/index.html",redirect:{name:"Home"}},{path:"/index.html",redirect:{name:"Home"}},{path:"/",redirect:{name:"Home"}},{path:"",redirect:{name:"Home"}},{path:"/portal",redirect:{name:"Home"}},{path:"/portal/home",component:pa,name:"Home"},{path:"/portal/instructions",component:$w,name:"Instructions"},{path:"/portal/login",component:fp,name:"Login",props:!0},{path:"/portal/registration",component:b0,name:"Registration",props:!0},{path:"/portal/toplists",component:rb,name:"TopLists",props:!0},{path:"/portal/lobby",component:zm,name:"Lobby",props:!0,beforeEnter:(e,t,s)=>{if(je.state.user)je.dispatch("updateUserTableId",null).then(()=>{s()});else{const n=sessionStorage.getItem("userName"),i=sessionStorage.getItem("token");let o={name:n,token:i,webSocket:null};je.dispatch("setUser",o).then(()=>{s()})}}},{path:"/portal/table/:watch?",component:yg,name:"TableTicTacToe",props:!0,beforeEnter:(e,t,s)=>{!je.state.user||!je.state.theTable?s("/"):s()}},{path:"/portal/connectfour/:watch?",component:Ab,name:"TableConnectFour",props:!0,beforeEnter:(e,t,s)=>{!je.state.user||!je.state.theTable?s("/"):s()}},{path:"/portal/pool/:watch?",component:Q_,name:"PoolTable",props:!0,beforeEnter:(e,t,s)=>{!je.state.user||!je.state.theTable?s("/"):s()}},{path:"/portal/yatzy/:watch?",component:Tw,name:"YatzyTable",props:!0},{path:"/portal/user/:selectedName/profile",component:Yg,name:"Profile",props:!0},{path:"/portal/terms",component:kw,name:"Info"},{path:"/portal/feedback",component:Kw,name:"Feedback"},{path:"/portal/:pathMatch(.*)*",component:pa,name:"Home"},{path:"/portal/error",component:_l,name:"Error"},{path:"/portal/:catchAll(.*)",component:_l,name:"Error",props:!0}],w0=ew({history:mT(),routes:T0}),E0=rf(Qf);E0.use(w0).use(je).mount("#app");
